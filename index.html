<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"VLO","momentum":211.6035920207,"atr":7.127555,"price":108.85,"sector":"Energy","shares":35,"position":3809.75},{"rank":2,"ticker":"T","momentum":58.4635498183,"atr":0.49142,"price":20.95,"sector":"Communication Services","shares":508,"position":10642.6},{"rank":3,"ticker":"MRK","momentum":56.8286037063,"atr":1.992375,"price":92.51,"sector":"Health Care","shares":125,"position":11563.75},{"rank":4,"ticker":"XOM","momentum":48.0162035411,"atr":3.78761,"price":88.12,"sector":"Energy","shares":66,"position":5815.92},{"rank":5,"ticker":"CEG","momentum":46.0029547084,"atr":2.73699,"price":57.31,"sector":"Utilities","shares":91,"position":5215.21},{"rank":6,"ticker":"LLY","momentum":43.6086802446,"atr":9.212,"price":323.0,"sector":"Health Care","shares":27,"position":8721.0},{"rank":7,"ticker":"MNST","momentum":42.1463065667,"atr":2.5436,"price":93.35,"sector":"Consumer Staples","shares":98,"position":9148.3},{"rank":8,"ticker":"IBM","momentum":32.0667305838,"atr":2.912785,"price":140.71,"sector":"Information Technology","shares":85,"position":11960.35},{"rank":9,"ticker":"MCK","momentum":28.5900244241,"atr":8.13685,"price":328.06,"sector":"Health Care","shares":30,"position":9841.8},{"rank":10,"ticker":"AMCR","momentum":27.8772488584,"atr":0.306885,"price":12.55,"sector":"Materials","shares":814,"position":10215.7},{"rank":11,"ticker":"WRB","momentum":26.2987761584,"atr":1.6065,"price":67.39,"sector":"Financials","shares":155,"position":10445.45},{"rank":12,"ticker":"CI","momentum":25.5873701113,"atr":7.516125,"price":267.34,"sector":"Health Care","shares":33,"position":8822.22},{"rank":13,"ticker":"BMY","momentum":24.5839329956,"atr":1.444455,"price":78.28,"sector":"Health Care","shares":173,"position":13542.44},{"rank":14,"ticker":"K","momentum":22.6818241344,"atr":1.672835,"price":71.62,"sector":"Consumer Staples","shares":149,"position":10671.38},{"rank":15,"ticker":"GPC","momentum":21.2532410847,"atr":3.077405,"price":133.51,"sector":"Consumer Discretionary","shares":81,"position":10814.31},{"rank":16,"ticker":"STZ","momentum":17.6950828914,"atr":5.45674,"price":243.63,"sector":"Consumer Staples","shares":45,"position":10963.35},{"rank":17,"ticker":"VICI","momentum":16.6443642226,"atr":1.068855,"price":29.87,"sector":"Real Estate","shares":233,"position":6959.71},{"rank":18,"ticker":"VRTX","momentum":13.8705191993,"atr":9.21162,"price":280.35,"sector":"Health Care","shares":27,"position":7569.45},{"rank":19,"ticker":"CPB","momentum":13.4854471031,"atr":1.3025,"price":48.4,"sector":"Consumer Staples","shares":191,"position":9244.4},{"rank":20,"ticker":"DG","momentum":8.8958808447,"atr":5.866355,"price":247.05,"sector":"Consumer Discretionary","shares":42,"position":10376.1},{"rank":21,"ticker":"NOC","momentum":7.6710874247,"atr":12.702715,"price":461.81,"sector":"Industrials","shares":19,"position":8774.39},{"rank":22,"ticker":"PGR","momentum":6.5146774646,"atr":2.9,"price":113.64,"sector":"Financials","shares":86,"position":9773.04},{"rank":23,"ticker":"TMUS","momentum":6.4630973227,"atr":3.79347,"price":134.37,"sector":"Communication Services","shares":65,"position":8734.05},{"rank":24,"ticker":"AMGN","momentum":5.6973165327,"atr":4.889635,"price":245.43,"sector":"Health Care","shares":51,"position":12516.93},{"rank":25,"ticker":"AZO","momentum":5.3677044928,"atr":53.75233,"price":2140.0,"sector":"Consumer Discretionary","shares":4,"position":8560.0},{"rank":26,"ticker":"ED","momentum":5.3030069085,"atr":2.237835,"price":94.72,"sector":"Utilities","shares":111,"position":10513.92},{"rank":27,"ticker":"WEC","momentum":4.4658449029,"atr":2.344645,"price":99.31,"sector":"Utilities","shares":106,"position":10526.86},{"rank":28,"ticker":"GIS","momentum":3.6404017739,"atr":1.66062,"price":74.72,"sector":"Consumer Staples","shares":150,"position":11208.0},{"rank":29,"ticker":"AMT","momentum":3.4477624761,"atr":8.8325,"price":253.16,"sector":"Real Estate","shares":28,"position":7088.48},{"rank":30,"ticker":"TAP","momentum":3.1875511145,"atr":1.5695,"price":55.36,"sector":"Consumer Staples","shares":159,"position":8802.24},{"rank":31,"ticker":"JNJ","momentum":2.7273297881,"atr":3.468645,"price":176.99,"sector":"Health Care","shares":72,"position":12743.28},{"rank":32,"ticker":"HII","momentum":2.4697260859,"atr":5.216595,"price":215.89,"sector":"Industrials","shares":47,"position":10146.83},{"rank":33,"ticker":"GILD","momentum":2.2721258737,"atr":1.439755,"price":62.48,"sector":"Health Care","shares":173,"position":10809.04},{"rank":34,"ticker":"APD","momentum":2.2171457891,"atr":7.015865,"price":243.13,"sector":"Materials","shares":35,"position":8509.55},{"rank":35,"ticker":"KMB","momentum":2.0260583227,"atr":2.84685,"price":134.25,"sector":"Consumer Staples","shares":87,"position":11679.75},{"rank":36,"ticker":"ULTA","momentum":1.8922513296,"atr":14.091895,"price":391.64,"sector":"Consumer Discretionary","shares":17,"position":6657.88},{"rank":37,"ticker":"ROL","momentum":1.4657342227,"atr":0.838255,"price":34.97,"sector":"Industrials","shares":298,"position":10421.06},{"rank":38,"ticker":"ELV","momentum":1.0923812829,"atr":13.4935,"price":485.57,"sector":"Health Care","shares":18,"position":8740.26},{"rank":39,"ticker":"HSY","momentum":0.7753216049,"atr":4.49374,"price":218.91,"sector":"Consumer Staples","shares":55,"position":12040.05},{"rank":40,"ticker":"BF.B","momentum":0.685971455,"atr":1.77206,"price":70.92,"sector":"Consumer Staples","shares":141,"position":9999.72},{"rank":41,"ticker":"WAT","momentum":0.5487265033,"atr":9.33548,"price":329.6,"sector":"Health Care","shares":26,"position":8569.6},{"rank":42,"ticker":"RSG","momentum":0.5034366697,"atr":2.77825,"price":130.21,"sector":"Industrials","shares":89,"position":11588.69},{"rank":43,"ticker":"KO","momentum":0.344893143,"atr":1.32824,"price":62.73,"sector":"Consumer Staples","shares":188,"position":11793.24},{"rank":44,"ticker":"PWR","momentum":0.3001827412,"atr":5.55377,"price":119.75,"sector":"Industrials","shares":45,"position":5388.75},{"rank":45,"ticker":"CL","momentum":0.2290509759,"atr":1.614395,"price":79.67,"sector":"Consumer Staples","shares":154,"position":12269.18},{"rank":46,"ticker":"CTLT","momentum":0.2269438754,"atr":3.62034,"price":106.15,"sector":"Health Care","shares":69,"position":7324.35},{"rank":47,"ticker":"MCD","momentum":0.2098429955,"atr":4.68629,"price":247.74,"sector":"Consumer Discretionary","shares":53,"position":13130.22},{"rank":48,"ticker":"PFE","momentum":0.1562502369,"atr":1.454585,"price":50.94,"sector":"Health Care","shares":171,"position":8710.74},{"rank":49,"ticker":"INCY","momentum":0.0283737737,"atr":2.209,"price":75.89,"sector":"Health Care","shares":113,"position":8575.57},{"rank":50,"ticker":"O","momentum":0.0000226769,"atr":1.54775,"price":69.36,"sector":"Real Estate","shares":161,"position":11166.96},{"rank":51,"ticker":"SYY","momentum":-0.0010886107,"atr":2.168,"price":85.3,"sector":"Consumer Staples","shares":115,"position":9809.5},{"rank":52,"ticker":"DGX","momentum":-0.0107660653,"atr":3.29115,"price":137.61,"sector":"Health Care","shares":75,"position":10320.75},{"rank":53,"ticker":"UNH","momentum":-0.0158521131,"atr":13.7382,"price":515.71,"sector":"Health Care","shares":18,"position":9282.78},{"rank":54,"ticker":"SNPS","momentum":-0.0357435687,"atr":10.52339,"price":306.06,"sector":"Information Technology","shares":23,"position":7039.38},{"rank":55,"ticker":"CDNS","momentum":-0.0769315124,"atr":5.73081,"price":150.92,"sector":"Information Technology","shares":43,"position":6489.56},{"rank":56,"ticker":"CAG","momentum":-0.0971133749,"atr":0.79495,"price":34.33,"sector":"Consumer Staples","shares":314,"position":10779.62},{"rank":57,"ticker":"DRE","momentum":-1.2982118094,"atr":1.8075,"price":55.35,"sector":"Real Estate","shares":138,"position":7638.3},{"rank":58,"ticker":"ABBV","momentum":-1.748444919,"atr":3.6136,"price":154.14,"sector":"Health Care","shares":69,"position":10635.66},{"rank":59,"ticker":"CNC","momentum":-1.8844658618,"atr":2.38588,"price":84.94,"sector":"Health Care","shares":104,"position":8833.76}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

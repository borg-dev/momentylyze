<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":152.5632253212,"atr":1.6648,"price":70.33,"sector":"Health Care","shares":150,"position":10549.5},{"rank":2,"ticker":"MOH","momentum":108.200294153,"atr":8.633375,"price":352.69,"sector":"Health Care","shares":28,"position":9875.32},{"rank":3,"ticker":"PCG","momentum":101.8455180953,"atr":0.589705,"price":14.22,"sector":"Utilities","shares":423,"position":6015.06},{"rank":4,"ticker":"AES","momentum":67.8158559087,"atr":0.885375,"price":24.68,"sector":"Utilities","shares":282,"position":6959.76},{"rank":5,"ticker":"IT","momentum":59.2975846512,"atr":8.95209,"price":289.24,"sector":"Information Technology","shares":27,"position":7809.48},{"rank":6,"ticker":"SCHW","momentum":52.3425616418,"atr":2.08293,"price":71.71,"sector":"Financials","shares":120,"position":8605.2},{"rank":7,"ticker":"GPC","momentum":51.127582929,"atr":3.58196,"price":156.78,"sector":"Consumer Discretionary","shares":69,"position":10817.82},{"rank":8,"ticker":"RJF","momentum":50.9699163974,"atr":3.036865,"price":104.63,"sector":"Financials","shares":82,"position":8579.66},{"rank":9,"ticker":"KEYS","momentum":50.2438606894,"atr":4.3105,"price":156.0,"sector":"Information Technology","shares":57,"position":8892.0},{"rank":10,"ticker":"TT","momentum":49.1156894288,"atr":4.43425,"price":147.31,"sector":"Industrials","shares":56,"position":8249.36},{"rank":11,"ticker":"SBUX","momentum":45.3925814643,"atr":2.51325,"price":86.21,"sector":"Consumer Discretionary","shares":99,"position":8534.79},{"rank":12,"ticker":"NDAQ","momentum":42.6823869409,"atr":1.39025,"price":58.1,"sector":"Financials","shares":179,"position":10399.9},{"rank":13,"ticker":"CF","momentum":42.0077642302,"atr":4.999325,"price":102.83,"sector":"Materials","shares":50,"position":5141.5},{"rank":14,"ticker":"LW","momentum":40.5834685618,"atr":2.239,"price":81.35,"sector":"Consumer Staples","shares":111,"position":9029.85},{"rank":15,"ticker":"ORLY","momentum":39.4838544341,"atr":16.601135,"price":730.9,"sector":"Consumer Discretionary","shares":15,"position":10963.5},{"rank":16,"ticker":"XYL","momentum":36.9028912323,"atr":2.724615,"price":89.05,"sector":"Industrials","shares":91,"position":8103.55},{"rank":17,"ticker":"PFG","momentum":36.7096954343,"atr":2.13694,"price":75.71,"sector":"Financials","shares":116,"position":8782.36},{"rank":18,"ticker":"SJM","momentum":35.2575721412,"atr":2.77757,"price":141.46,"sector":"Consumer Staples","shares":90,"position":12731.4},{"rank":19,"ticker":"CI","momentum":32.6512516001,"atr":6.4112,"price":290.95,"sector":"Health Care","shares":38,"position":11056.1},{"rank":20,"ticker":"MCK","momentum":29.0474883975,"atr":7.8365,"price":351.55,"sector":"Health Care","shares":31,"position":10898.05},{"rank":21,"ticker":"HII","momentum":28.4585536816,"atr":5.670925,"price":234.7,"sector":"Industrials","shares":44,"position":10326.8},{"rank":22,"ticker":"AJG","momentum":27.9163509583,"atr":3.98685,"price":176.13,"sector":"Financials","shares":62,"position":10920.06},{"rank":23,"ticker":"IEX","momentum":25.6630064621,"atr":4.63404,"price":205.56,"sector":"Industrials","shares":53,"position":10894.68},{"rank":24,"ticker":"FDS","momentum":24.8455753595,"atr":11.92725,"price":414.71,"sector":"Financials","shares":20,"position":8294.2},{"rank":25,"ticker":"GIS","momentum":24.8118515945,"atr":1.824,"price":77.39,"sector":"Consumer Staples","shares":137,"position":10602.43},{"rank":26,"ticker":"MTB","momentum":24.2797133733,"atr":5.35659,"price":179.09,"sector":"Financials","shares":46,"position":8238.14},{"rank":27,"ticker":"WMT","momentum":21.4611660271,"atr":2.94999,"price":132.67,"sector":"Consumer Staples","shares":84,"position":11144.28},{"rank":28,"ticker":"DRI","momentum":18.922069175,"atr":4.19414,"price":128.53,"sector":"Consumer Discretionary","shares":59,"position":7583.27},{"rank":29,"ticker":"TJX","momentum":17.5624894381,"atr":1.80558,"price":64.36,"sector":"Consumer Discretionary","shares":138,"position":8881.68},{"rank":30,"ticker":"GWW","momentum":16.4363783223,"atr":13.76894,"price":514.09,"sector":"Industrials","shares":18,"position":9253.62},{"rank":31,"ticker":"AMP","momentum":13.8688981176,"atr":8.214375,"price":266.29,"sector":"Financials","shares":30,"position":7988.7},{"rank":32,"ticker":"GL","momentum":13.8245237192,"atr":2.250985,"price":106.69,"sector":"Financials","shares":111,"position":11842.59},{"rank":33,"ticker":"CTVA","momentum":13.5904997116,"atr":1.68783,"price":60.76,"sector":"Materials","shares":148,"position":8992.48},{"rank":34,"ticker":"PGR","momentum":13.3313876664,"atr":2.707245,"price":123.45,"sector":"Financials","shares":92,"position":11357.4},{"rank":35,"ticker":"COP","momentum":12.5789356101,"atr":4.72552,"price":115.58,"sector":"Energy","shares":52,"position":6010.16},{"rank":36,"ticker":"BRO","momentum":10.5673351718,"atr":1.443475,"price":61.96,"sector":"Financials","shares":173,"position":10719.08},{"rank":37,"ticker":"EQT","momentum":9.9679964396,"atr":2.57105,"price":43.55,"sector":"Energy","shares":97,"position":4224.35},{"rank":38,"ticker":"ADM","momentum":9.3487330511,"atr":2.43375,"price":86.3,"sector":"Consumer Staples","shares":102,"position":8802.6},{"rank":39,"ticker":"CMI","momentum":9.1786495604,"atr":5.84625,"price":220.07,"sector":"Industrials","shares":42,"position":9242.94},{"rank":40,"ticker":"HSY","momentum":8.7015519651,"atr":4.23885,"price":225.46,"sector":"Consumer Staples","shares":58,"position":13076.68},{"rank":41,"ticker":"VRTX","momentum":8.4082113844,"atr":7.718425,"price":295.16,"sector":"Health Care","shares":32,"position":9445.12},{"rank":42,"ticker":"GILD","momentum":8.2527236499,"atr":1.43746,"price":65.67,"sector":"Health Care","shares":173,"position":11360.91},{"rank":43,"ticker":"LOW","momentum":8.2308051548,"atr":5.207995,"price":196.43,"sector":"Consumer Discretionary","shares":48,"position":9428.64},{"rank":44,"ticker":"NOC","momentum":7.3455401648,"atr":13.636945,"price":507.31,"sector":"Industrials","shares":18,"position":9131.58},{"rank":45,"ticker":"CBOE","momentum":5.871558372,"atr":2.760965,"price":118.06,"sector":"Financials","shares":90,"position":10625.4},{"rank":46,"ticker":"KDP","momentum":5.7984741617,"atr":0.780615,"price":37.55,"sector":"Consumer Staples","shares":320,"position":12016.0},{"rank":47,"ticker":"MPC","momentum":4.317236598,"atr":3.78395,"price":103.43,"sector":"Energy","shares":66,"position":6826.38},{"rank":48,"ticker":"AZO","momentum":2.2987083286,"atr":60.309855,"price":2267.51,"sector":"Consumer Discretionary","shares":4,"position":9070.04},{"rank":49,"ticker":"DVN","momentum":2.2202482941,"atr":3.33915,"price":68.57,"sector":"Energy","shares":74,"position":5074.18},{"rank":50,"ticker":"NRG","momentum":2.2035950514,"atr":1.19089,"price":41.06,"sector":"Utilities","shares":209,"position":8581.54},{"rank":51,"ticker":"K","momentum":1.7188775916,"atr":1.51115,"price":71.96,"sector":"Consumer Staples","shares":165,"position":11873.4},{"rank":52,"ticker":"PCAR","momentum":1.6433769809,"atr":2.229,"price":89.07,"sector":"Industrials","shares":112,"position":9975.84},{"rank":53,"ticker":"ROL","momentum":1.0957831854,"atr":0.82295,"price":36.36,"sector":"Industrials","shares":303,"position":11017.08},{"rank":54,"ticker":"GD","momentum":1.0584082964,"atr":5.334565,"price":227.74,"sector":"Industrials","shares":46,"position":10476.04},{"rank":55,"ticker":"CAG","momentum":0.8167639417,"atr":0.818245,"price":33.89,"sector":"Consumer Staples","shares":305,"position":10336.45},{"rank":56,"ticker":"CPB","momentum":0.7056056526,"atr":0.97474,"price":48.62,"sector":"Consumer Staples","shares":256,"position":12446.72},{"rank":57,"ticker":"XOM","momentum":0.3867520682,"atr":3.222405,"price":98.0,"sector":"Energy","shares":77,"position":7546.0},{"rank":58,"ticker":"ALL","momentum":0.3103765534,"atr":3.44625,"price":132.97,"sector":"Financials","shares":72,"position":9573.84},{"rank":59,"ticker":"DHI","momentum":0.2674509782,"atr":2.41275,"price":72.7,"sector":"Consumer Discretionary","shares":103,"position":7488.1},{"rank":60,"ticker":"LLY","momentum":0.1924710614,"atr":9.62286,"price":327.6,"sector":"Health Care","shares":25,"position":8190.0},{"rank":61,"ticker":"FMC","momentum":0.0010779334,"atr":3.095,"price":112.42,"sector":"Materials","shares":80,"position":8993.6},{"rank":62,"ticker":"CVX","momentum":-0.0009261736,"atr":4.896805,"price":157.17,"sector":"Energy","shares":51,"position":8015.67},{"rank":63,"ticker":"SLB","momentum":-0.0116740316,"atr":1.7591,"price":41.76,"sector":"Energy","shares":142,"position":5929.92},{"rank":64,"ticker":"WRB","momentum":-0.3523617372,"atr":1.517265,"price":68.06,"sector":"Financials","shares":164,"position":11161.84},{"rank":65,"ticker":"TSCO","momentum":-0.5386350002,"atr":5.639535,"price":200.76,"sector":"Consumer Discretionary","shares":44,"position":8833.44},{"rank":66,"ticker":"MRK","momentum":-1.4846197204,"atr":1.733795,"price":91.05,"sector":"Health Care","shares":144,"position":13111.2},{"rank":67,"ticker":"AMGN","momentum":-3.9076586944,"atr":5.191925,"price":245.44,"sector":"Health Care","shares":48,"position":11781.12},{"rank":68,"ticker":"PSX","momentum":-4.4368243409,"atr":3.622215,"price":90.34,"sector":"Energy","shares":69,"position":6233.46}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":150.712094086,"atr":1.7283,"price":67.86,"sector":"Health Care","shares":144,"position":9771.84},{"rank":2,"ticker":"PCG","momentum":118.856574975,"atr":0.597205,"price":14.07,"sector":"Utilities","shares":418,"position":5881.26},{"rank":3,"ticker":"MOH","momentum":108.962867924,"atr":8.396375,"price":351.0,"sector":"Health Care","shares":29,"position":10179.0},{"rank":4,"ticker":"AES","momentum":68.3565412129,"atr":0.900745,"price":24.13,"sector":"Utilities","shares":277,"position":6684.01},{"rank":5,"ticker":"IT","momentum":60.9038536369,"atr":8.67509,"price":288.26,"sector":"Information Technology","shares":28,"position":8071.28},{"rank":6,"ticker":"SCHW","momentum":56.3571089563,"atr":2.11118,"price":71.89,"sector":"Financials","shares":118,"position":8483.02},{"rank":7,"ticker":"RJF","momentum":51.2883698126,"atr":3.020365,"price":103.31,"sector":"Financials","shares":82,"position":8471.42},{"rank":8,"ticker":"GPC","momentum":49.7111281847,"atr":3.519605,"price":154.92,"sector":"Consumer Discretionary","shares":71,"position":10999.32},{"rank":9,"ticker":"TT","momentum":47.167685208,"atr":4.455,"price":144.99,"sector":"Industrials","shares":56,"position":8119.44},{"rank":10,"ticker":"SBUX","momentum":45.1605043531,"atr":2.3235,"price":86.87,"sector":"Consumer Discretionary","shares":107,"position":9295.09},{"rank":11,"ticker":"CF","momentum":44.6604404227,"atr":4.988325,"price":102.55,"sector":"Materials","shares":50,"position":5127.5},{"rank":12,"ticker":"LW","momentum":39.7567496348,"atr":2.25475,"price":82.88,"sector":"Consumer Staples","shares":110,"position":9116.8},{"rank":13,"ticker":"NDAQ","momentum":39.2741624362,"atr":1.3545,"price":57.58,"sector":"Financials","shares":184,"position":10594.72},{"rank":14,"ticker":"PFG","momentum":39.1691346535,"atr":2.13544,"price":76.04,"sector":"Financials","shares":117,"position":8896.68},{"rank":15,"ticker":"ORLY","momentum":38.9377865647,"atr":16.184635,"price":727.56,"sector":"Consumer Discretionary","shares":15,"position":10913.4},{"rank":16,"ticker":"SJM","momentum":34.0630049869,"atr":2.79757,"price":140.94,"sector":"Consumer Staples","shares":89,"position":12543.66},{"rank":17,"ticker":"CI","momentum":31.3005694594,"atr":6.3637,"price":288.36,"sector":"Health Care","shares":39,"position":11246.04},{"rank":18,"ticker":"HII","momentum":27.684305977,"atr":5.777175,"price":226.7,"sector":"Industrials","shares":43,"position":9748.1},{"rank":19,"ticker":"MCK","momentum":27.1638725355,"atr":7.8005,"price":345.39,"sector":"Health Care","shares":32,"position":11052.48},{"rank":20,"ticker":"AJG","momentum":26.1413482393,"atr":3.98475,"price":174.87,"sector":"Financials","shares":62,"position":10841.94},{"rank":21,"ticker":"MTB","momentum":25.6517847532,"atr":5.03809,"price":178.82,"sector":"Financials","shares":49,"position":8762.18},{"rank":22,"ticker":"IEX","momentum":25.5083939538,"atr":4.73404,"price":200.4,"sector":"Industrials","shares":52,"position":10420.8},{"rank":23,"ticker":"GIS","momentum":23.3853587909,"atr":1.82625,"price":77.36,"sector":"Consumer Staples","shares":136,"position":10520.96},{"rank":24,"ticker":"DRI","momentum":21.1095607406,"atr":4.18314,"price":130.26,"sector":"Consumer Discretionary","shares":59,"position":7685.34},{"rank":25,"ticker":"WMT","momentum":20.8509428258,"atr":3.018455,"price":131.17,"sector":"Consumer Staples","shares":82,"position":10755.94},{"rank":26,"ticker":"TJX","momentum":18.4813130219,"atr":1.78658,"price":63.88,"sector":"Consumer Discretionary","shares":139,"position":8879.32},{"rank":27,"ticker":"COP","momentum":17.9219154391,"atr":4.59002,"price":116.3,"sector":"Energy","shares":54,"position":6280.2},{"rank":28,"ticker":"CTVA","momentum":16.5072527914,"atr":1.65058,"price":60.79,"sector":"Materials","shares":151,"position":9179.29},{"rank":29,"ticker":"AMP","momentum":15.1189691179,"atr":8.192125,"price":263.4,"sector":"Financials","shares":30,"position":7902.0},{"rank":30,"ticker":"GL","momentum":14.5989652403,"atr":2.256485,"price":106.84,"sector":"Financials","shares":110,"position":11752.4},{"rank":31,"ticker":"PGR","momentum":13.7736864753,"atr":2.772995,"price":121.4,"sector":"Financials","shares":90,"position":10926.0},{"rank":32,"ticker":"EQT","momentum":12.0302461612,"atr":2.449045,"price":43.55,"sector":"Energy","shares":102,"position":4442.1},{"rank":33,"ticker":"ADM","momentum":11.5052225496,"atr":2.51435,"price":86.03,"sector":"Consumer Staples","shares":99,"position":8516.97},{"rank":34,"ticker":"CMI","momentum":9.9387241962,"atr":5.817,"price":218.1,"sector":"Industrials","shares":42,"position":9160.2},{"rank":35,"ticker":"GILD","momentum":9.4604327521,"atr":1.43796,"price":65.39,"sector":"Health Care","shares":173,"position":11312.47},{"rank":36,"ticker":"LOW","momentum":8.7474501134,"atr":5.187245,"price":193.87,"sector":"Consumer Discretionary","shares":48,"position":9305.76},{"rank":37,"ticker":"NOC","momentum":8.2795263648,"atr":13.620195,"price":492.38,"sector":"Industrials","shares":18,"position":8862.84},{"rank":38,"ticker":"HSY","momentum":7.8690760575,"atr":4.2681,"price":224.53,"sector":"Consumer Staples","shares":58,"position":13022.74},{"rank":39,"ticker":"VRTX","momentum":7.8463648449,"atr":7.618175,"price":290.13,"sector":"Health Care","shares":32,"position":9284.16},{"rank":40,"ticker":"MPC","momentum":6.3800258018,"atr":3.84195,"price":104.96,"sector":"Energy","shares":65,"position":6822.4},{"rank":41,"ticker":"CBOE","momentum":5.2399864231,"atr":2.805965,"price":118.14,"sector":"Financials","shares":89,"position":10514.46},{"rank":42,"ticker":"KDP","momentum":5.1262361388,"atr":0.773615,"price":37.71,"sector":"Consumer Staples","shares":323,"position":12180.33},{"rank":43,"ticker":"DVN","momentum":3.9673900392,"atr":3.2778,"price":69.4,"sector":"Energy","shares":76,"position":5274.4},{"rank":44,"ticker":"AZO","momentum":2.2153764474,"atr":59.529855,"price":2245.99,"sector":"Consumer Discretionary","shares":4,"position":8983.96},{"rank":45,"ticker":"PCAR","momentum":1.9082558256,"atr":2.26035,"price":88.55,"sector":"Industrials","shares":110,"position":9740.5},{"rank":46,"ticker":"K","momentum":1.2794081066,"atr":1.50965,"price":72.03,"sector":"Consumer Staples","shares":165,"position":11884.95},{"rank":47,"ticker":"ROL","momentum":1.0729981902,"atr":0.7977,"price":36.2,"sector":"Industrials","shares":313,"position":11330.6},{"rank":48,"ticker":"XOM","momentum":0.7709137301,"atr":3.144905,"price":98.43,"sector":"Energy","shares":79,"position":7775.97},{"rank":49,"ticker":"ALL","momentum":0.6078027372,"atr":3.53525,"price":131.13,"sector":"Financials","shares":70,"position":9179.1},{"rank":50,"ticker":"CPB","momentum":0.5332911086,"atr":0.99124,"price":49.09,"sector":"Consumer Staples","shares":252,"position":12370.68},{"rank":51,"ticker":"LLY","momentum":0.168130648,"atr":9.815715,"price":324.57,"sector":"Health Care","shares":25,"position":8114.25},{"rank":52,"ticker":"FMC","momentum":0.0581959005,"atr":3.145,"price":114.7,"sector":"Materials","shares":79,"position":9061.3},{"rank":53,"ticker":"CVX","momentum":0.0009984616,"atr":4.853095,"price":157.64,"sector":"Energy","shares":51,"position":8039.64},{"rank":54,"ticker":"SLB","momentum":0.0007043183,"atr":1.7164,"price":42.02,"sector":"Energy","shares":145,"position":6092.9},{"rank":55,"ticker":"CTRA","momentum":-0.0571922156,"atr":1.28769,"price":29.8,"sector":"Energy","shares":194,"position":5781.2},{"rank":56,"ticker":"WRB","momentum":-0.1597923263,"atr":1.509765,"price":68.12,"sector":"Financials","shares":165,"position":11239.8},{"rank":57,"ticker":"TSCO","momentum":-0.3947568715,"atr":5.493035,"price":203.61,"sector":"Consumer Discretionary","shares":45,"position":9162.45},{"rank":58,"ticker":"MRK","momentum":-1.3157509671,"atr":1.733545,"price":90.42,"sector":"Health Care","shares":144,"position":13020.48},{"rank":59,"ticker":"VLO","momentum":-1.8335000743,"atr":5.164845,"price":115.2,"sector":"Energy","shares":48,"position":5529.6},{"rank":60,"ticker":"RHI","momentum":-1.8717916487,"atr":2.189895,"price":80.3,"sector":"Industrials","shares":114,"position":9154.2},{"rank":61,"ticker":"PSX","momentum":-3.0528377669,"atr":3.659965,"price":92.94,"sector":"Energy","shares":68,"position":6319.92},{"rank":62,"ticker":"AMGN","momentum":-3.3016385409,"atr":5.325425,"price":246.44,"sector":"Health Care","shares":46,"position":11336.24}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"PCG","momentum":197.7914326731,"atr":0.63469,"price":13.96,"sector":"Utilities","shares":393,"position":5486.28},{"rank":2,"ticker":"CAH","momentum":141.1364951392,"atr":1.8688,"price":70.8,"sector":"Health Care","shares":133,"position":9416.4},{"rank":3,"ticker":"MOH","momentum":112.4645526027,"atr":8.67878,"price":353.21,"sector":"Health Care","shares":28,"position":9889.88},{"rank":4,"ticker":"COP","momentum":81.7525293226,"atr":5.02652,"price":121.11,"sector":"Energy","shares":49,"position":5934.39},{"rank":5,"ticker":"AES","momentum":65.561611058,"atr":0.962045,"price":24.13,"sector":"Utilities","shares":259,"position":6249.67},{"rank":6,"ticker":"IT","momentum":59.6824311163,"atr":9.29196,"price":286.27,"sector":"Information Technology","shares":26,"position":7443.02},{"rank":7,"ticker":"PFG","momentum":56.5652894258,"atr":2.42175,"price":78.77,"sector":"Financials","shares":103,"position":8113.31},{"rank":8,"ticker":"GPC","momentum":49.4176058258,"atr":3.623065,"price":158.97,"sector":"Consumer Discretionary","shares":69,"position":10968.93},{"rank":9,"ticker":"RJF","momentum":47.3546864504,"atr":3.559075,"price":100.0,"sector":"Financials","shares":70,"position":7000.0},{"rank":10,"ticker":"MPC","momentum":44.8821251593,"atr":4.1012,"price":108.87,"sector":"Energy","shares":60,"position":6532.2},{"rank":11,"ticker":"SBUX","momentum":43.8899645502,"atr":2.69233,"price":87.52,"sector":"Consumer Discretionary","shares":92,"position":8051.84},{"rank":12,"ticker":"CF","momentum":42.4141350987,"atr":5.080845,"price":100.66,"sector":"Materials","shares":49,"position":4932.34},{"rank":13,"ticker":"LW","momentum":36.6662347424,"atr":2.3545,"price":83.87,"sector":"Consumer Staples","shares":106,"position":8890.22},{"rank":14,"ticker":"KEYS","momentum":36.3830327087,"atr":4.674,"price":161.15,"sector":"Information Technology","shares":53,"position":8540.95},{"rank":15,"ticker":"ORLY","momentum":35.5284652479,"atr":16.62159,"price":737.72,"sector":"Consumer Discretionary","shares":15,"position":11065.8},{"rank":16,"ticker":"CTVA","momentum":34.8003891704,"atr":1.87733,"price":61.8,"sector":"Materials","shares":133,"position":8219.4},{"rank":17,"ticker":"DVN","momentum":33.7881639966,"atr":3.44892,"price":71.94,"sector":"Energy","shares":72,"position":5179.68},{"rank":18,"ticker":"SJM","momentum":32.7533194834,"atr":2.93207,"price":143.04,"sector":"Consumer Staples","shares":85,"position":12158.4},{"rank":19,"ticker":"DRI","momentum":32.1841919725,"atr":4.31651,"price":133.0,"sector":"Consumer Discretionary","shares":57,"position":7581.0},{"rank":20,"ticker":"XYL","momentum":31.528491106,"atr":2.932865,"price":92.9,"sector":"Industrials","shares":85,"position":7896.5},{"rank":21,"ticker":"CDAY","momentum":30.0332779012,"atr":2.783125,"price":56.84,"sector":"Information Technology","shares":89,"position":5058.76},{"rank":22,"ticker":"CI","momentum":28.9866412762,"atr":6.9492,"price":293.08,"sector":"Health Care","shares":35,"position":10257.8},{"rank":23,"ticker":"ADM","momentum":28.3343461608,"atr":2.804035,"price":88.35,"sector":"Consumer Staples","shares":89,"position":7863.15},{"rank":24,"ticker":"HII","momentum":27.8917931668,"atr":6.65911,"price":243.14,"sector":"Industrials","shares":37,"position":8996.18},{"rank":25,"ticker":"IEX","momentum":24.2868846054,"atr":5.28075,"price":204.06,"sector":"Industrials","shares":47,"position":9590.82},{"rank":26,"ticker":"TJX","momentum":22.9408726753,"atr":2.00403,"price":66.1,"sector":"Consumer Discretionary","shares":124,"position":8196.4},{"rank":27,"ticker":"AMP","momentum":22.5960151504,"atr":9.91782,"price":264.3,"sector":"Financials","shares":25,"position":6607.5},{"rank":28,"ticker":"MCK","momentum":22.5356348388,"atr":8.07031,"price":360.66,"sector":"Health Care","shares":30,"position":10819.8},{"rank":29,"ticker":"NRG","momentum":22.2418732157,"atr":1.31289,"price":41.96,"sector":"Utilities","shares":190,"position":7972.4},{"rank":30,"ticker":"HBAN","momentum":21.5964339191,"atr":0.45973,"price":13.62,"sector":"Financials","shares":543,"position":7395.66},{"rank":31,"ticker":"GL","momentum":21.3170239903,"atr":2.673485,"price":112.56,"sector":"Financials","shares":93,"position":10468.08},{"rank":32,"ticker":"GIS","momentum":17.5857419244,"atr":1.7327,"price":78.13,"sector":"Consumer Staples","shares":144,"position":11250.72},{"rank":33,"ticker":"CMI","momentum":16.7583303932,"atr":6.493235,"price":224.76,"sector":"Industrials","shares":38,"position":8540.88},{"rank":34,"ticker":"AJG","momentum":16.5442464794,"atr":4.449,"price":178.05,"sector":"Financials","shares":56,"position":9970.8},{"rank":35,"ticker":"WMT","momentum":16.1108835606,"atr":3.12808,"price":133.76,"sector":"Consumer Staples","shares":79,"position":10567.04},{"rank":36,"ticker":"BSX","momentum":14.0366297875,"atr":1.063,"price":40.96,"sector":"Health Care","shares":235,"position":9625.6},{"rank":37,"ticker":"GWW","momentum":13.9554955421,"atr":14.756495,"price":521.13,"sector":"Industrials","shares":16,"position":8338.08},{"rank":38,"ticker":"GILD","momentum":13.6022377052,"atr":1.40192,"price":66.19,"sector":"Health Care","shares":178,"position":11781.82},{"rank":39,"ticker":"WM","momentum":13.4142000005,"atr":3.7265,"price":161.5,"sector":"Industrials","shares":67,"position":10820.5},{"rank":40,"ticker":"PGR","momentum":13.0296671051,"atr":3.470745,"price":121.2,"sector":"Financials","shares":72,"position":8726.4},{"rank":41,"ticker":"SLB","momentum":12.552428202,"atr":1.8039,"price":45.47,"sector":"Energy","shares":138,"position":6274.86},{"rank":42,"ticker":"RF","momentum":12.5058865774,"atr":0.7435,"price":20.9,"sector":"Financials","shares":336,"position":7022.4},{"rank":43,"ticker":"XOM","momentum":12.2833786997,"atr":3.310905,"price":103.79,"sector":"Energy","shares":75,"position":7784.25},{"rank":44,"ticker":"NOC","momentum":11.3705193234,"atr":16.288395,"price":510.91,"sector":"Industrials","shares":15,"position":7663.65},{"rank":45,"ticker":"AFL","momentum":11.1148506126,"atr":1.52239,"price":60.14,"sector":"Financials","shares":164,"position":9862.96},{"rank":46,"ticker":"ADP","momentum":11.0904992932,"atr":6.0088,"price":233.24,"sector":"Information Technology","shares":41,"position":9562.84},{"rank":47,"ticker":"URI","momentum":10.1757080523,"atr":12.240355,"price":286.85,"sector":"Industrials","shares":20,"position":5737.0},{"rank":48,"ticker":"A","momentum":9.7889733107,"atr":3.89186,"price":128.96,"sector":"Health Care","shares":64,"position":8253.44},{"rank":49,"ticker":"MGM","momentum":9.0423674784,"atr":1.50875,"price":32.46,"sector":"Consumer Discretionary","shares":165,"position":5355.9},{"rank":50,"ticker":"SYK","momentum":7.4059532781,"atr":6.729155,"price":216.69,"sector":"Health Care","shares":37,"position":8017.53},{"rank":51,"ticker":"HLT","momentum":6.6012925141,"atr":4.44725,"price":128.7,"sector":"Consumer Discretionary","shares":56,"position":7207.2},{"rank":52,"ticker":"WFC","momentum":6.2072207885,"atr":1.444875,"price":43.62,"sector":"Financials","shares":173,"position":7546.26},{"rank":53,"ticker":"CTAS","momentum":5.6867231362,"atr":11.201215,"price":400.25,"sector":"Industrials","shares":22,"position":8805.5},{"rank":54,"ticker":"VRTX","momentum":5.6641733659,"atr":8.069425,"price":292.02,"sector":"Health Care","shares":30,"position":8760.6},{"rank":55,"ticker":"BRO","momentum":5.151243496,"atr":1.781975,"price":62.9,"sector":"Financials","shares":140,"position":8806.0},{"rank":56,"ticker":"HSY","momentum":5.1440754532,"atr":4.63586,"price":226.26,"sector":"Consumer Staples","shares":53,"position":11991.78},{"rank":57,"ticker":"ALL","momentum":4.9826051047,"atr":4.02438,"price":135.15,"sector":"Financials","shares":62,"position":8379.3},{"rank":58,"ticker":"FMC","momentum":4.8268526875,"atr":3.511,"price":116.67,"sector":"Materials","shares":71,"position":8283.57},{"rank":59,"ticker":"ETN","momentum":4.4911382505,"atr":4.22875,"price":139.0,"sector":"Industrials","shares":59,"position":8201.0},{"rank":60,"ticker":"TRGP","momentum":4.3418511553,"atr":2.871245,"price":67.12,"sector":"Energy","shares":87,"position":5839.44},{"rank":61,"ticker":"WTW","momentum":4.2262594526,"atr":5.6365,"price":208.56,"sector":"Financials","shares":44,"position":9176.64},{"rank":62,"ticker":"PCAR","momentum":4.192825841,"atr":2.38745,"price":90.74,"sector":"Industrials","shares":104,"position":9436.96},{"rank":63,"ticker":"KDP","momentum":4.0147807894,"atr":0.819765,"price":37.78,"sector":"Consumer Staples","shares":304,"position":11485.12},{"rank":64,"ticker":"CVX","momentum":3.9279845455,"atr":5.404285,"price":168.0,"sector":"Energy","shares":46,"position":7728.0},{"rank":65,"ticker":"MET","momentum":3.761083449,"atr":1.86892,"price":67.34,"sector":"Financials","shares":133,"position":8956.22},{"rank":66,"ticker":"GD","momentum":3.3980308147,"atr":6.288,"price":239.37,"sector":"Industrials","shares":39,"position":9335.43},{"rank":67,"ticker":"SNA","momentum":3.3430443666,"atr":5.54461,"price":213.7,"sector":"Industrials","shares":45,"position":9616.5},{"rank":68,"ticker":"AZO","momentum":3.0559118129,"atr":54.10875,"price":2289.8,"sector":"Consumer Discretionary","shares":4,"position":9159.2},{"rank":69,"ticker":"CBOE","momentum":2.8866256823,"atr":2.96095,"price":119.75,"sector":"Financials","shares":84,"position":10059.0},{"rank":70,"ticker":"AON","momentum":2.2961549084,"atr":7.45691,"price":280.93,"sector":"Financials","shares":33,"position":9270.69},{"rank":71,"ticker":"CTRA","momentum":1.1112613554,"atr":1.268795,"price":30.12,"sector":"Energy","shares":197,"position":5933.64},{"rank":72,"ticker":"UNH","momentum":0.9957662668,"atr":13.349995,"price":520.32,"sector":"Health Care","shares":18,"position":9365.76},{"rank":73,"ticker":"ROL","momentum":0.7553082807,"atr":0.93535,"price":36.88,"sector":"Industrials","shares":267,"position":9846.96},{"rank":74,"ticker":"KMI","momentum":0.7524448433,"atr":0.53021,"price":17.99,"sector":"Energy","shares":471,"position":8473.29},{"rank":75,"ticker":"HST","momentum":0.5654316548,"atr":0.6347,"price":17.53,"sector":"Real Estate","shares":393,"position":6889.29},{"rank":76,"ticker":"CPB","momentum":0.5454697185,"atr":1.05449,"price":50.98,"sector":"Consumer Staples","shares":237,"position":12082.26},{"rank":77,"ticker":"K","momentum":0.3740653039,"atr":1.587395,"price":73.58,"sector":"Consumer Staples","shares":157,"position":11552.06},{"rank":78,"ticker":"WRB","momentum":0.3504383189,"atr":1.76325,"price":71.46,"sector":"Financials","shares":141,"position":10075.86},{"rank":79,"ticker":"LLY","momentum":0.3158832585,"atr":10.05531,"price":329.29,"sector":"Health Care","shares":24,"position":7902.96},{"rank":80,"ticker":"PEP","momentum":0.2388957169,"atr":3.919065,"price":173.36,"sector":"Consumer Staples","shares":63,"position":10921.68},{"rank":81,"ticker":"CAG","momentum":0.1528027365,"atr":0.85462,"price":34.93,"sector":"Consumer Staples","shares":292,"position":10199.56},{"rank":82,"ticker":"GE","momentum":0.1337890099,"atr":2.18334,"price":70.53,"sector":"Industrials","shares":114,"position":8040.42},{"rank":83,"ticker":"VLO","momentum":0.0174223066,"atr":5.608245,"price":123.96,"sector":"Energy","shares":44,"position":5454.24},{"rank":84,"ticker":"BAC","momentum":0.0057555331,"atr":1.17122,"price":33.92,"sector":"Financials","shares":213,"position":7224.96},{"rank":85,"ticker":"ELV","momentum":0.0009495168,"atr":12.64187,"price":487.81,"sector":"Health Care","shares":19,"position":9268.39},{"rank":86,"ticker":"PSX","momentum":0.0007863218,"atr":3.763715,"price":97.95,"sector":"Energy","shares":66,"position":6464.7},{"rank":87,"ticker":"RHI","momentum":0.0003852077,"atr":2.3569,"price":80.83,"sector":"Industrials","shares":106,"position":8567.98},{"rank":88,"ticker":"MO","momentum":0.0001155502,"atr":1.12362,"price":44.67,"sector":"Consumer Staples","shares":222,"position":9916.74},{"rank":89,"ticker":"HIG","momentum":-0.0000611729,"atr":1.697835,"price":68.0,"sector":"Financials","shares":147,"position":9996.0},{"rank":90,"ticker":"AIG","momentum":-0.0030130396,"atr":1.636325,"price":52.75,"sector":"Financials","shares":152,"position":8018.0},{"rank":91,"ticker":"TSCO","momentum":-0.0240064037,"atr":5.983785,"price":196.32,"sector":"Consumer Discretionary","shares":41,"position":8049.12},{"rank":92,"ticker":"LMT","momentum":-0.0417602817,"atr":13.163025,"price":439.96,"sector":"Industrials","shares":18,"position":7919.28},{"rank":93,"ticker":"RE","momentum":-0.0509445882,"atr":8.041375,"price":279.68,"sector":"Financials","shares":31,"position":8670.08},{"rank":94,"ticker":"CB","momentum":-0.253198682,"atr":5.01341,"price":195.98,"sector":"Financials","shares":49,"position":9603.02},{"rank":95,"ticker":"MRK","momentum":-0.2884288985,"atr":1.861785,"price":93.26,"sector":"Health Care","shares":134,"position":12496.84},{"rank":96,"ticker":"TRV","momentum":-0.332987142,"atr":4.03114,"price":174.17,"sector":"Financials","shares":62,"position":10798.54},{"rank":97,"ticker":"JPM","momentum":-0.9409086612,"atr":3.931595,"price":116.51,"sector":"Financials","shares":63,"position":7340.13},{"rank":98,"ticker":"AMGN","momentum":-1.0874687668,"atr":5.431675,"price":248.19,"sector":"Health Care","shares":46,"position":11416.74},{"rank":99,"ticker":"LHX","momentum":-1.105459356,"atr":6.97417,"price":237.61,"sector":"Industrials","shares":35,"position":8316.35},{"rank":100,"ticker":"IPG","momentum":-1.2297696692,"atr":0.850135,"price":28.49,"sector":"Communication Services","shares":294,"position":8376.06},{"rank":101,"ticker":"HAL","momentum":-5.4838834394,"atr":1.50225,"price":31.96,"sector":"Energy","shares":166,"position":5305.36}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

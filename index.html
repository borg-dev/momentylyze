<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":80.4001516802,"atr":2.4075,"price":97.75,"sector":"Consumer Staples","shares":103,"position":10068.25},{"rank":2,"ticker":"T","momentum":56.7286250929,"atr":0.48025,"price":20.33,"sector":"Communication Services","shares":520,"position":10571.6},{"rank":3,"ticker":"MRK","momentum":43.8597791256,"atr":2.082115,"price":93.88,"sector":"Health Care","shares":120,"position":11265.6},{"rank":4,"ticker":"K","momentum":33.0528059673,"atr":1.578135,"price":72.86,"sector":"Consumer Staples","shares":158,"position":11511.88},{"rank":5,"ticker":"LLY","momentum":32.3650236636,"atr":8.52037,"price":326.89,"sector":"Health Care","shares":29,"position":9479.81},{"rank":6,"ticker":"IBM","momentum":25.2823938984,"atr":2.98983,"price":139.06,"sector":"Information Technology","shares":83,"position":11541.98},{"rank":7,"ticker":"AMCR","momentum":24.7897057081,"atr":0.30775,"price":12.39,"sector":"Materials","shares":812,"position":10060.68},{"rank":8,"ticker":"CI","momentum":24.2057425813,"atr":7.69372,"price":264.91,"sector":"Health Care","shares":32,"position":8477.12},{"rank":9,"ticker":"VICI","momentum":23.5178386855,"atr":0.864635,"price":31.33,"sector":"Real Estate","shares":289,"position":9054.37},{"rank":10,"ticker":"CPB","momentum":18.9961035549,"atr":1.00352,"price":49.05,"sector":"Consumer Staples","shares":249,"position":12213.45},{"rank":11,"ticker":"GPC","momentum":14.9893679472,"atr":2.948225,"price":136.69,"sector":"Consumer Discretionary","shares":84,"position":11481.96},{"rank":12,"ticker":"GIS","momentum":13.7041735003,"atr":1.633905,"price":74.7,"sector":"Consumer Staples","shares":153,"position":11429.1},{"rank":13,"ticker":"MCK","momentum":11.448543497,"atr":8.473285,"price":326.49,"sector":"Health Care","shares":29,"position":9468.21},{"rank":14,"ticker":"VRTX","momentum":10.7132359789,"atr":8.57466,"price":286.15,"sector":"Health Care","shares":29,"position":8298.35},{"rank":15,"ticker":"KMB","momentum":8.3634440789,"atr":2.555365,"price":135.13,"sector":"Consumer Staples","shares":97,"position":13107.61},{"rank":16,"ticker":"TMUS","momentum":7.2935461165,"atr":3.5684,"price":135.66,"sector":"Communication Services","shares":70,"position":9496.2},{"rank":17,"ticker":"CEG","momentum":6.6523563389,"atr":2.67025,"price":57.92,"sector":"Utilities","shares":93,"position":5386.56},{"rank":18,"ticker":"NOC","momentum":5.4491758778,"atr":13.23075,"price":458.99,"sector":"Industrials","shares":18,"position":8261.82},{"rank":19,"ticker":"BF.B","momentum":4.9919704512,"atr":1.482735,"price":71.56,"sector":"Consumer Staples","shares":168,"position":12022.08},{"rank":20,"ticker":"STZ","momentum":4.4465956886,"atr":6.074335,"price":250.97,"sector":"Consumer Staples","shares":41,"position":10289.77},{"rank":21,"ticker":"DG","momentum":4.4157776054,"atr":5.58947,"price":248.35,"sector":"Consumer Discretionary","shares":44,"position":10927.4},{"rank":22,"ticker":"GILD","momentum":4.0737789303,"atr":1.147785,"price":61.81,"sector":"Health Care","shares":217,"position":13412.77},{"rank":23,"ticker":"WAT","momentum":3.8760512565,"atr":8.95073,"price":328.55,"sector":"Health Care","shares":27,"position":8870.85},{"rank":24,"ticker":"AZO","momentum":3.5175356118,"atr":54.94233,"price":2175.34,"sector":"Consumer Discretionary","shares":4,"position":8701.36},{"rank":25,"ticker":"TAP","momentum":3.0041927202,"atr":1.511475,"price":58.18,"sector":"Consumer Staples","shares":165,"position":9599.7},{"rank":26,"ticker":"MCD","momentum":1.8682748902,"atr":4.604845,"price":252.6,"sector":"Consumer Discretionary","shares":54,"position":13640.4},{"rank":27,"ticker":"CL","momentum":1.4484236576,"atr":1.611125,"price":78.34,"sector":"Consumer Staples","shares":155,"position":12142.7},{"rank":28,"ticker":"AMT","momentum":1.3292772237,"atr":7.52275,"price":256.51,"sector":"Real Estate","shares":33,"position":8464.83},{"rank":29,"ticker":"AMGN","momentum":1.0446001365,"atr":4.371115,"price":245.59,"sector":"Health Care","shares":57,"position":13998.63},{"rank":30,"ticker":"ROL","momentum":0.9600983605,"atr":0.85215,"price":35.16,"sector":"Industrials","shares":293,"position":10301.88},{"rank":31,"ticker":"SYY","momentum":0.8872140456,"atr":2.091245,"price":86.74,"sector":"Consumer Staples","shares":119,"position":10322.06},{"rank":32,"ticker":"WEC","momentum":0.1165858019,"atr":2.274645,"price":100.11,"sector":"Utilities","shares":109,"position":10911.99},{"rank":33,"ticker":"PEP","momentum":0.0513687669,"atr":3.178755,"price":170.98,"sector":"Consumer Staples","shares":78,"position":13336.44},{"rank":34,"ticker":"HSY","momentum":0.0410093309,"atr":4.326795,"price":217.87,"sector":"Consumer Staples","shares":57,"position":12418.59},{"rank":35,"ticker":"SO","momentum":0.0004332151,"atr":1.4956,"price":71.86,"sector":"Utilities","shares":167,"position":12000.62},{"rank":36,"ticker":"PFE","momentum":-0.0048934752,"atr":1.36341,"price":51.39,"sector":"Health Care","shares":183,"position":9404.37},{"rank":37,"ticker":"SNPS","momentum":-0.0055847369,"atr":10.04099,"price":305.02,"sector":"Information Technology","shares":24,"position":7320.48},{"rank":38,"ticker":"O","momentum":-0.009810987,"atr":1.486815,"price":68.45,"sector":"Real Estate","shares":168,"position":11499.6},{"rank":39,"ticker":"INCY","momentum":-0.0381065046,"atr":2.193495,"price":79.63,"sector":"Health Care","shares":113,"position":8998.19},{"rank":40,"ticker":"PWR","momentum":-0.054543538,"atr":5.18407,"price":128.04,"sector":"Industrials","shares":48,"position":6145.92},{"rank":41,"ticker":"CBOE","momentum":-0.1463817383,"atr":2.62708,"price":117.93,"sector":"Financials","shares":95,"position":11203.35},{"rank":42,"ticker":"CDNS","momentum":-0.1563484071,"atr":5.428,"price":154.02,"sector":"Information Technology","shares":46,"position":7084.92},{"rank":43,"ticker":"UNH","momentum":-0.4971975739,"atr":14.628205,"price":502.43,"sector":"Health Care","shares":17,"position":8541.31},{"rank":44,"ticker":"CNC","momentum":-0.6308668364,"atr":2.500535,"price":85.76,"sector":"Health Care","shares":99,"position":8490.24},{"rank":45,"ticker":"DRE","momentum":-1.2879330127,"atr":1.757,"price":55.59,"sector":"Real Estate","shares":142,"position":7893.78},{"rank":46,"ticker":"JKHY","momentum":-2.8295651739,"atr":4.068895,"price":186.0,"sector":"Information Technology","shares":61,"position":11346.0},{"rank":47,"ticker":"NEE","momentum":-4.2160217203,"atr":2.227595,"price":80.13,"sector":"Utilities","shares":112,"position":8974.56},{"rank":48,"ticker":"PHM","momentum":-4.8298528669,"atr":1.843565,"price":43.8,"sector":"Consumer Discretionary","shares":135,"position":5913.0},{"rank":49,"ticker":"BR","momentum":-5.678709134,"atr":3.74535,"price":146.79,"sector":"Information Technology","shares":66,"position":9688.14},{"rank":50,"ticker":"ORLY","momentum":-10.1527572576,"atr":15.265495,"price":673.78,"sector":"Consumer Discretionary","shares":16,"position":10780.48},{"rank":51,"ticker":"CHD","momentum":-11.7606356121,"atr":2.058715,"price":95.83,"sector":"Consumer Staples","shares":121,"position":11595.43}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":126.1547554914,"atr":1.7265,"price":67.97,"sector":"Health Care","shares":144,"position":9787.68},{"rank":2,"ticker":"MOH","momentum":79.1655948295,"atr":8.377375,"price":339.33,"sector":"Health Care","shares":29,"position":9840.57},{"rank":3,"ticker":"NDAQ","momentum":59.8985892761,"atr":1.378245,"price":58.33,"sector":"Financials","shares":181,"position":10557.73},{"rank":4,"ticker":"AES","momentum":55.6267882737,"atr":0.82788,"price":23.56,"sector":"Utilities","shares":301,"position":7091.56},{"rank":5,"ticker":"KEYS","momentum":55.5326987922,"atr":4.0458,"price":162.42,"sector":"Information Technology","shares":61,"position":9907.62},{"rank":6,"ticker":"GPC","momentum":54.896783557,"atr":3.59871,"price":152.91,"sector":"Consumer Discretionary","shares":69,"position":10550.79},{"rank":7,"ticker":"TT","momentum":51.9640011493,"atr":4.47025,"price":150.99,"sector":"Industrials","shares":55,"position":8304.45},{"rank":8,"ticker":"LW","momentum":49.5638834884,"atr":1.96175,"price":76.63,"sector":"Consumer Staples","shares":127,"position":9732.01},{"rank":9,"ticker":"SBUX","momentum":49.2660014797,"atr":2.5951,"price":85.62,"sector":"Consumer Discretionary","shares":96,"position":8219.52},{"rank":10,"ticker":"IT","momentum":49.0925830062,"atr":8.20034,"price":284.36,"sector":"Information Technology","shares":30,"position":8530.8},{"rank":11,"ticker":"ON","momentum":41.3509786577,"atr":3.05928,"price":64.79,"sector":"Information Technology","shares":81,"position":5247.99},{"rank":12,"ticker":"ORLY","momentum":40.3662337447,"atr":15.801135,"price":718.19,"sector":"Consumer Discretionary","shares":15,"position":10772.85},{"rank":13,"ticker":"SJM","momentum":39.1961423494,"atr":2.85082,"price":139.56,"sector":"Consumer Staples","shares":87,"position":12141.72},{"rank":14,"ticker":"XYL","momentum":38.6502739272,"atr":2.69125,"price":90.2,"sector":"Industrials","shares":92,"position":8298.4},{"rank":15,"ticker":"RJF","momentum":36.1443172431,"atr":2.88754,"price":101.42,"sector":"Financials","shares":86,"position":8722.12},{"rank":16,"ticker":"FDS","momentum":35.2190588144,"atr":11.3515,"price":408.12,"sector":"Financials","shares":22,"position":8978.64},{"rank":17,"ticker":"AJG","momentum":34.7699801713,"atr":3.80916,"price":176.58,"sector":"Financials","shares":65,"position":11477.7},{"rank":18,"ticker":"GIS","momentum":32.7863039102,"atr":1.75976,"price":78.48,"sector":"Consumer Staples","shares":142,"position":11144.16},{"rank":19,"ticker":"PCG","momentum":30.8065266905,"atr":0.475955,"price":13.11,"sector":"Utilities","shares":525,"position":6882.75},{"rank":20,"ticker":"MSI","momentum":29.0081004834,"atr":5.1665,"price":228.97,"sector":"Information Technology","shares":48,"position":10990.56},{"rank":21,"ticker":"RSG","momentum":28.4707642769,"atr":2.667385,"price":139.3,"sector":"Industrials","shares":93,"position":12954.9},{"rank":22,"ticker":"MCK","momentum":28.0702516442,"atr":8.491495,"price":346.74,"sector":"Health Care","shares":29,"position":10055.46},{"rank":23,"ticker":"CI","momentum":27.9443319047,"atr":6.3537,"price":287.22,"sector":"Health Care","shares":39,"position":11201.58},{"rank":24,"ticker":"WM","momentum":27.8452853069,"atr":3.01972,"price":165.09,"sector":"Industrials","shares":82,"position":13537.38},{"rank":25,"ticker":"SCHW","momentum":27.5026032166,"atr":1.99443,"price":73.21,"sector":"Financials","shares":125,"position":9151.25},{"rank":26,"ticker":"HII","momentum":27.4085809258,"atr":5.619125,"price":227.08,"sector":"Industrials","shares":44,"position":9991.52},{"rank":27,"ticker":"CDAY","momentum":25.2513702193,"atr":2.17275,"price":57.27,"sector":"Information Technology","shares":115,"position":6586.05},{"rank":28,"ticker":"IEX","momentum":24.34613826,"atr":4.434165,"price":205.09,"sector":"Industrials","shares":56,"position":11485.04},{"rank":29,"ticker":"ADP","momentum":22.6540832341,"atr":5.22447,"price":232.25,"sector":"Information Technology","shares":47,"position":10915.75},{"rank":30,"ticker":"WMT","momentum":22.0326777701,"atr":2.806775,"price":132.53,"sector":"Consumer Staples","shares":89,"position":11795.17},{"rank":31,"ticker":"CF","momentum":21.5957110227,"atr":4.959875,"price":100.3,"sector":"Materials","shares":50,"position":5015.0},{"rank":32,"ticker":"PWR","momentum":21.4125060525,"atr":4.56976,"price":131.35,"sector":"Industrials","shares":54,"position":7092.9},{"rank":33,"ticker":"CDNS","momentum":19.4001472903,"atr":4.54825,"price":170.28,"sector":"Information Technology","shares":54,"position":9195.12},{"rank":34,"ticker":"PFG","momentum":18.3073894474,"atr":2.08794,"price":75.55,"sector":"Financials","shares":119,"position":8990.45},{"rank":35,"ticker":"BRO","momentum":14.0491222698,"atr":1.406975,"price":62.04,"sector":"Financials","shares":177,"position":10981.08},{"rank":36,"ticker":"HSY","momentum":14.0131241037,"atr":4.311645,"price":224.56,"sector":"Consumer Staples","shares":57,"position":12799.92},{"rank":37,"ticker":"MTB","momentum":13.3384562261,"atr":5.49309,"price":181.02,"sector":"Financials","shares":45,"position":8145.9},{"rank":38,"ticker":"CVS","momentum":11.997360578,"atr":2.14408,"price":97.76,"sector":"Health Care","shares":116,"position":11340.16},{"rank":39,"ticker":"DRI","momentum":10.8752174088,"atr":4.041395,"price":125.41,"sector":"Consumer Discretionary","shares":61,"position":7650.01},{"rank":40,"ticker":"CBOE","momentum":10.6914448923,"atr":2.736965,"price":118.13,"sector":"Financials","shares":91,"position":10749.83},{"rank":41,"ticker":"DHR","momentum":10.3010036838,"atr":7.84565,"price":268.79,"sector":"Health Care","shares":31,"position":8332.49},{"rank":42,"ticker":"CTAS","momentum":10.1914915735,"atr":10.349985,"price":400.84,"sector":"Industrials","shares":24,"position":9620.16},{"rank":43,"ticker":"PGR","momentum":9.9175276404,"atr":2.86125,"price":120.5,"sector":"Financials","shares":87,"position":10483.5},{"rank":44,"ticker":"RMD","momentum":9.8091004152,"atr":5.6435,"price":224.25,"sector":"Health Care","shares":44,"position":9867.0},{"rank":45,"ticker":"VRTX","momentum":8.1812970352,"atr":8.136975,"price":297.43,"sector":"Health Care","shares":30,"position":8922.9},{"rank":46,"ticker":"GL","momentum":8.0803523496,"atr":2.24275,"price":102.09,"sector":"Financials","shares":111,"position":11331.99},{"rank":47,"ticker":"TJX","momentum":7.8217348865,"atr":1.85878,"price":62.9,"sector":"Consumer Discretionary","shares":134,"position":8428.6},{"rank":48,"ticker":"UNH","momentum":7.51775281,"atr":12.143245,"price":515.51,"sector":"Health Care","shares":20,"position":10310.2},{"rank":49,"ticker":"BSX","momentum":7.4160312939,"atr":1.0115,"price":39.88,"sector":"Health Care","shares":247,"position":9850.36},{"rank":50,"ticker":"A","momentum":6.7151680797,"atr":3.51136,"price":126.38,"sector":"Health Care","shares":71,"position":8972.98},{"rank":51,"ticker":"TMUS","momentum":6.4741551068,"atr":3.50325,"price":138.9,"sector":"Communication Services","shares":71,"position":9861.9},{"rank":52,"ticker":"CMI","momentum":5.803745939,"atr":5.336885,"price":209.59,"sector":"Industrials","shares":46,"position":9641.14},{"rank":53,"ticker":"HBAN","momentum":5.7683860458,"atr":0.45961,"price":13.47,"sector":"Financials","shares":543,"position":7314.21},{"rank":54,"ticker":"NOC","momentum":4.7695970364,"atr":13.907785,"price":485.71,"sector":"Industrials","shares":17,"position":8257.07},{"rank":55,"ticker":"AMP","momentum":4.7679061488,"atr":8.0755,"price":262.41,"sector":"Financials","shares":30,"position":7872.3},{"rank":56,"ticker":"LOW","momentum":4.5853364387,"atr":5.77421,"price":193.92,"sector":"Consumer Discretionary","shares":43,"position":8338.56},{"rank":57,"ticker":"AZO","momentum":3.7150499013,"atr":55.810605,"price":2197.71,"sector":"Consumer Discretionary","shares":4,"position":8790.84},{"rank":58,"ticker":"DG","momentum":3.1943774186,"atr":5.12325,"price":246.48,"sector":"Consumer Discretionary","shares":48,"position":11831.04},{"rank":59,"ticker":"CTVA","momentum":2.511792508,"atr":1.79408,"price":59.18,"sector":"Materials","shares":139,"position":8226.02},{"rank":60,"ticker":"ADM","momentum":1.619865007,"atr":2.69075,"price":83.03,"sector":"Consumer Staples","shares":92,"position":7638.76},{"rank":61,"ticker":"ULTA","momentum":1.6060163936,"atr":11.74435,"price":404.75,"sector":"Consumer Discretionary","shares":21,"position":8499.75},{"rank":62,"ticker":"WTW","momentum":1.3420608807,"atr":5.289385,"price":206.67,"sector":"Financials","shares":47,"position":9713.49},{"rank":63,"ticker":"PCAR","momentum":0.8987161313,"atr":2.2585,"price":86.48,"sector":"Industrials","shares":110,"position":9512.8},{"rank":64,"ticker":"LEN","momentum":0.8765104772,"atr":2.870245,"price":78.16,"sector":"Consumer Discretionary","shares":87,"position":6799.92},{"rank":65,"ticker":"COP","momentum":0.6861452039,"atr":4.38493,"price":109.97,"sector":"Energy","shares":57,"position":6268.29},{"rank":66,"ticker":"MPC","momentum":0.1055835244,"atr":3.47196,"price":102.79,"sector":"Energy","shares":72,"position":7400.88},{"rank":67,"ticker":"LLY","momentum":0.0116658763,"atr":9.428175,"price":321.55,"sector":"Health Care","shares":26,"position":8360.3},{"rank":68,"ticker":"DVN","momentum":-0.0008030769,"atr":3.150635,"price":65.33,"sector":"Energy","shares":79,"position":5161.07},{"rank":69,"ticker":"ALL","momentum":-0.1347362081,"atr":3.33775,"price":128.28,"sector":"Financials","shares":74,"position":9492.72},{"rank":70,"ticker":"TSCO","momentum":-0.1938324843,"atr":5.81158,"price":194.12,"sector":"Consumer Discretionary","shares":43,"position":8347.16},{"rank":71,"ticker":"WRB","momentum":-3.4248909265,"atr":1.555665,"price":66.39,"sector":"Financials","shares":160,"position":10622.4}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"VLO","momentum":327.6758577044,"atr":5.000395,"price":143.41,"sector":"Energy","shares":49,"position":7027.09},{"rank":2,"ticker":"CTRA","momentum":242.9075425497,"atr":1.297495,"price":34.96,"sector":"Energy","shares":192,"position":6712.32},{"rank":3,"ticker":"MPC","momentum":145.9535775585,"atr":2.95521,"price":111.36,"sector":"Energy","shares":84,"position":9354.24},{"rank":4,"ticker":"DVN","momentum":142.5070138129,"atr":2.79912,"price":77.85,"sector":"Energy","shares":89,"position":6928.65},{"rank":5,"ticker":"CEG","momentum":107.1990231888,"atr":3.00985,"price":61.21,"sector":"Utilities","shares":83,"position":5080.43},{"rank":6,"ticker":"LLY","momentum":85.7078446023,"atr":9.8235,"price":303.25,"sector":"Health Care","shares":25,"position":7581.25},{"rank":7,"ticker":"MCK","momentum":78.1815910306,"atr":9.20795,"price":312.03,"sector":"Health Care","shares":27,"position":8424.81},{"rank":8,"ticker":"WMB","momentum":77.9502495151,"atr":0.84628,"price":35.59,"sector":"Energy","shares":295,"position":10499.05},{"rank":9,"ticker":"MRK","momentum":73.9343286216,"atr":1.846305,"price":88.0,"sector":"Health Care","shares":135,"position":11880.0},{"rank":10,"ticker":"CVX","momentum":69.3012951568,"atr":4.401235,"price":177.52,"sector":"Energy","shares":56,"position":9941.12},{"rank":11,"ticker":"XOM","momentum":67.3121273228,"atr":2.620025,"price":102.33,"sector":"Energy","shares":95,"position":9721.35},{"rank":12,"ticker":"PXD","momentum":59.6852445824,"atr":8.948445,"price":276.78,"sector":"Energy","shares":27,"position":7473.06},{"rank":13,"ticker":"WRB","momentum":59.0822982861,"atr":1.45675,"price":69.65,"sector":"Financials","shares":171,"position":11910.15},{"rank":14,"ticker":"CTVA","momentum":58.9379482059,"atr":1.5404,"price":61.08,"sector":"Materials","shares":162,"position":9894.96},{"rank":15,"ticker":"CI","momentum":56.3078963018,"atr":6.82925,"price":257.58,"sector":"Health Care","shares":36,"position":9272.88},{"rank":16,"ticker":"COP","momentum":53.6762476489,"atr":3.9595,"price":118.56,"sector":"Energy","shares":63,"position":7469.28},{"rank":17,"ticker":"BMY","momentum":53.6709988768,"atr":1.44368,"price":75.98,"sector":"Health Care","shares":173,"position":13144.54},{"rank":18,"ticker":"T","momentum":49.8993032081,"atr":0.384305,"price":20.88,"sector":"Communication Services","shares":650,"position":13572.0},{"rank":19,"ticker":"HAL","momentum":49.6044137016,"atr":1.5908,"price":42.21,"sector":"Energy","shares":157,"position":6626.97},{"rank":20,"ticker":"ED","momentum":44.4905079007,"atr":1.869565,"price":94.51,"sector":"Utilities","shares":133,"position":12569.83},{"rank":21,"ticker":"SRE","momentum":44.1752144512,"atr":3.40379,"price":155.16,"sector":"Utilities","shares":73,"position":11326.68},{"rank":22,"ticker":"EXC","momentum":43.4963539874,"atr":1.05625,"price":46.66,"sector":"Utilities","shares":236,"position":11011.76},{"rank":23,"ticker":"CNP","momentum":42.4269829501,"atr":0.61269,"price":30.61,"sector":"Utilities","shares":408,"position":12488.88},{"rank":24,"ticker":"WEC","momentum":41.7648349235,"atr":2.26176,"price":99.52,"sector":"Utilities","shares":110,"position":10947.2},{"rank":25,"ticker":"NOC","momentum":41.6770102247,"atr":12.145785,"price":462.92,"sector":"Industrials","shares":20,"position":9258.4},{"rank":26,"ticker":"DOW","momentum":41.6145315974,"atr":1.62199,"price":65.86,"sector":"Materials","shares":154,"position":10142.44},{"rank":27,"ticker":"SO","momentum":40.9943420139,"atr":1.328595,"price":72.89,"sector":"Utilities","shares":188,"position":13703.32},{"rank":28,"ticker":"AEP","momentum":40.828088904,"atr":1.9521,"price":98.26,"sector":"Utilities","shares":128,"position":12577.28},{"rank":29,"ticker":"KMI","momentum":34.8267166013,"atr":0.468205,"price":19.29,"sector":"Energy","shares":533,"position":10281.57},{"rank":30,"ticker":"BKR","momentum":31.9946284971,"atr":1.398875,"price":36.08,"sector":"Energy","shares":178,"position":6422.24},{"rank":31,"ticker":"AMCR","momentum":31.9891546666,"atr":0.30975,"price":13.17,"sector":"Materials","shares":807,"position":10628.19},{"rank":32,"ticker":"AIZ","momentum":31.7871538933,"atr":4.101875,"price":178.76,"sector":"Financials","shares":60,"position":10725.6},{"rank":33,"ticker":"LYB","momentum":29.3683656421,"atr":3.498265,"price":108.22,"sector":"Materials","shares":71,"position":7683.62},{"rank":34,"ticker":"IRM","momentum":28.9319418124,"atr":1.579965,"price":52.29,"sector":"Real Estate","shares":158,"position":8261.82},{"rank":35,"ticker":"K","momentum":28.5407160183,"atr":1.70168,"price":68.66,"sector":"Consumer Staples","shares":146,"position":10024.36},{"rank":36,"ticker":"PSX","momentum":28.5300684326,"atr":3.067015,"price":108.27,"sector":"Energy","shares":81,"position":8769.87},{"rank":37,"ticker":"HST","momentum":28.5060353363,"atr":0.814,"price":19.91,"sector":"Real Estate","shares":307,"position":6112.37},{"rank":38,"ticker":"ETR","momentum":28.3590137848,"atr":2.357625,"price":116.19,"sector":"Utilities","shares":106,"position":12316.14},{"rank":39,"ticker":"NRG","momentum":28.1574065651,"atr":1.22824,"price":45.52,"sector":"Utilities","shares":203,"position":9240.56},{"rank":40,"ticker":"ANTM","momentum":28.018735044,"atr":11.72125,"price":486.2,"sector":"Health Care","shares":21,"position":10210.2},{"rank":41,"ticker":"ADM","momentum":26.9877337369,"atr":2.57943,"price":85.98,"sector":"Consumer Staples","shares":96,"position":8254.08},{"rank":42,"ticker":"CMS","momentum":24.9057388725,"atr":1.28075,"price":67.87,"sector":"Utilities","shares":195,"position":13234.65},{"rank":43,"ticker":"EIX","momentum":24.4730515478,"atr":1.61795,"price":66.74,"sector":"Utilities","shares":154,"position":10277.96},{"rank":44,"ticker":"ROL","momentum":23.6925393628,"atr":0.909465,"price":34.16,"sector":"Industrials","shares":274,"position":9359.84},{"rank":45,"ticker":"TAP","momentum":23.168070706,"atr":1.586585,"price":52.41,"sector":"Consumer Staples","shares":157,"position":8228.37},{"rank":46,"ticker":"DTE","momentum":22.4310283852,"atr":2.389675,"price":128.44,"sector":"Utilities","shares":104,"position":13357.76},{"rank":47,"ticker":"VRTX","momentum":21.8555546308,"atr":8.135495,"price":259.7,"sector":"Health Care","shares":30,"position":7791.0},{"rank":48,"ticker":"EVRG","momentum":21.6011582186,"atr":1.25175,"price":67.37,"sector":"Utilities","shares":199,"position":13406.63},{"rank":49,"ticker":"AMGN","momentum":21.4597609182,"atr":4.86355,"price":241.75,"sector":"Health Care","shares":51,"position":12329.25},{"rank":50,"ticker":"HII","momentum":21.4326405295,"atr":5.1445,"price":214.0,"sector":"Industrials","shares":48,"position":10272.0},{"rank":51,"ticker":"CPB","momentum":20.7275786487,"atr":1.41094,"price":47.0,"sector":"Consumer Staples","shares":177,"position":8319.0},{"rank":52,"ticker":"STZ","momentum":17.7063567657,"atr":5.100565,"price":241.65,"sector":"Consumer Staples","shares":49,"position":11840.85},{"rank":53,"ticker":"ES","momentum":17.5867215936,"atr":1.778585,"price":87.82,"sector":"Utilities","shares":140,"position":12294.8},{"rank":54,"ticker":"LDOS","momentum":16.5317563065,"atr":2.205525,"price":102.83,"sector":"Industrials","shares":113,"position":11619.79},{"rank":55,"ticker":"SLB","momentum":15.6300241387,"atr":1.85917,"price":48.14,"sector":"Energy","shares":134,"position":6450.76},{"rank":56,"ticker":"WDC","momentum":15.5144588259,"atr":2.398745,"price":56.58,"sector":"Information Technology","shares":104,"position":5884.32},{"rank":57,"ticker":"DG","momentum":13.7755597303,"atr":9.91997,"price":237.71,"sector":"Consumer Discretionary","shares":25,"position":5942.75},{"rank":58,"ticker":"PKG","momentum":13.7688414676,"atr":4.0825,"price":156.16,"sector":"Materials","shares":61,"position":9525.76},{"rank":59,"ticker":"PWR","momentum":13.5596910111,"atr":4.8425,"price":130.76,"sector":"Industrials","shares":51,"position":6668.76},{"rank":60,"ticker":"VICI","momentum":12.7734006943,"atr":0.92177,"price":30.68,"sector":"Real Estate","shares":271,"position":8314.28},{"rank":61,"ticker":"LMT","momentum":12.522869799,"atr":10.07053,"price":432.72,"sector":"Industrials","shares":24,"position":10385.28},{"rank":62,"ticker":"GPC","momentum":12.2724932085,"atr":3.50034,"price":139.59,"sector":"Consumer Discretionary","shares":71,"position":9910.89},{"rank":63,"ticker":"TMUS","momentum":11.5202503076,"atr":2.982995,"price":133.02,"sector":"Communication Services","shares":83,"position":11040.66},{"rank":64,"ticker":"PGR","momentum":11.4615646005,"atr":2.76025,"price":115.54,"sector":"Financials","shares":90,"position":10398.6},{"rank":65,"ticker":"MNST","momentum":10.3622486616,"atr":2.1678,"price":89.3,"sector":"Consumer Staples","shares":115,"position":10269.5},{"rank":66,"ticker":"LIN","momentum":10.2777733044,"atr":7.77037,"price":318.69,"sector":"Materials","shares":32,"position":10198.08},{"rank":67,"ticker":"PPL","momentum":9.0682219251,"atr":0.546195,"price":29.14,"sector":"Utilities","shares":457,"position":13316.98},{"rank":68,"ticker":"FANG","momentum":8.6204015164,"atr":5.79038,"price":157.83,"sector":"Energy","shares":43,"position":6786.69},{"rank":69,"ticker":"NI","momentum":7.7847376662,"atr":0.56015,"price":30.23,"sector":"Utilities","shares":446,"position":13482.58},{"rank":70,"ticker":"CAT","momentum":7.4089736848,"atr":5.9734,"price":223.67,"sector":"Industrials","shares":41,"position":9170.47},{"rank":71,"ticker":"SBAC","momentum":6.8546855493,"atr":10.627245,"price":333.65,"sector":"Real Estate","shares":23,"position":7673.95},{"rank":72,"ticker":"WRK","momentum":6.4441957815,"atr":1.705685,"price":47.31,"sector":"Materials","shares":146,"position":6907.26},{"rank":73,"ticker":"ADP","momentum":5.9226129221,"atr":4.98325,"price":215.7,"sector":"Information Technology","shares":50,"position":10785.0},{"rank":74,"ticker":"IBM","momentum":5.7549829019,"atr":3.318435,"price":137.96,"sector":"Information Technology","shares":75,"position":10347.0},{"rank":75,"ticker":"ULTA","momentum":5.3136126015,"atr":19.270895,"price":422.35,"sector":"Consumer Discretionary","shares":12,"position":5068.2},{"rank":76,"ticker":"SNA","momentum":4.9746305268,"atr":5.3767,"price":218.67,"sector":"Industrials","shares":46,"position":10058.82},{"rank":77,"ticker":"AMT","momentum":3.5485182541,"atr":7.456155,"price":260.2,"sector":"Real Estate","shares":33,"position":8586.6},{"rank":78,"ticker":"AZO","momentum":2.2327390559,"atr":77.269675,"price":2101.15,"sector":"Consumer Discretionary","shares":3,"position":6303.45},{"rank":79,"ticker":"LHX","momentum":1.5920352485,"atr":5.134575,"price":240.59,"sector":"Industrials","shares":48,"position":11548.32},{"rank":80,"ticker":"HWM","momentum":1.0765918082,"atr":1.24245,"price":35.17,"sector":"Industrials","shares":201,"position":7069.17},{"rank":81,"ticker":"OKE","momentum":0.6539679451,"atr":1.73041,"price":66.19,"sector":"Energy","shares":144,"position":9531.36},{"rank":82,"ticker":"PFE","momentum":0.6221122792,"atr":1.30657,"price":51.78,"sector":"Health Care","shares":191,"position":9889.98},{"rank":83,"ticker":"OGN","momentum":0.3545022674,"atr":1.04712,"price":36.39,"sector":"Health Care","shares":238,"position":8660.82},{"rank":84,"ticker":"CE","momentum":0.1967925014,"atr":4.821945,"price":155.27,"sector":"Materials","shares":51,"position":7918.77},{"rank":85,"ticker":"PM","momentum":0.0915126283,"atr":2.708955,"price":101.69,"sector":"Consumer Staples","shares":92,"position":9355.48},{"rank":86,"ticker":"CDNS","momentum":0.0588379377,"atr":5.58956,"price":155.81,"sector":"Information Technology","shares":44,"position":6855.64},{"rank":87,"ticker":"FLT","momentum":0.0572172046,"atr":7.47,"price":241.43,"sector":"Information Technology","shares":33,"position":7967.19},{"rank":88,"ticker":"ADI","momentum":0.0534516892,"atr":5.13775,"price":161.61,"sector":"Information Technology","shares":48,"position":7757.28},{"rank":89,"ticker":"GWW","momentum":0.0133413032,"atr":11.32539,"price":494.42,"sector":"Industrials","shares":22,"position":10877.24},{"rank":90,"ticker":"WAT","momentum":0.0017394646,"atr":10.66475,"price":336.98,"sector":"Health Care","shares":23,"position":7750.54},{"rank":91,"ticker":"EA","momentum":0.0000911257,"atr":3.852745,"price":135.81,"sector":"Communication Services","shares":64,"position":8691.84},{"rank":92,"ticker":"MPWR","momentum":0.0000546813,"atr":25.218415,"price":444.08,"sector":"Information Technology","shares":9,"position":3996.72},{"rank":93,"ticker":"CTLT","momentum":-0.0015624559,"atr":3.644275,"price":109.84,"sector":"Health Care","shares":68,"position":7469.12},{"rank":94,"ticker":"RTX","momentum":-0.0021480421,"atr":2.207665,"price":97.38,"sector":"Industrials","shares":113,"position":11003.94},{"rank":95,"ticker":"APD","momentum":-0.0231571962,"atr":6.47456,"price":253.62,"sector":"Materials","shares":38,"position":9637.56},{"rank":96,"ticker":"BF.B","momentum":-0.0392365126,"atr":1.65531,"price":68.28,"sector":"Consumer Staples","shares":151,"position":10310.28},{"rank":97,"ticker":"IFF","momentum":-0.0555225208,"atr":3.1483,"price":130.8,"sector":"Materials","shares":79,"position":10333.2},{"rank":98,"ticker":"WAB","momentum":-0.084898315,"atr":2.334,"price":92.82,"sector":"Industrials","shares":107,"position":9931.74},{"rank":99,"ticker":"SNPS","momentum":-0.0857768086,"atr":12.16789,"price":317.08,"sector":"Information Technology","shares":20,"position":6341.6},{"rank":100,"ticker":"MHK","momentum":-0.9646359743,"atr":4.673745,"price":140.93,"sector":"Consumer Discretionary","shares":53,"position":7469.29},{"rank":101,"ticker":"MAS","momentum":-2.0584905389,"atr":1.51705,"price":56.7,"sector":"Industrials","shares":164,"position":9298.8},{"rank":102,"ticker":"CMI","momentum":-3.2561520996,"atr":5.59607,"price":211.5,"sector":"Industrials","shares":44,"position":9306.0},{"rank":103,"ticker":"BKNG","momentum":-3.8489392047,"atr":84.38657,"price":2277.84,"sector":"Consumer Discretionary","shares":2,"position":4555.68}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CTRA","momentum":242.3172767544,"atr":1.289995,"price":34.31,"sector":"Energy","shares":193,"position":6621.83},{"rank":2,"ticker":"MPC","momentum":149.5282465994,"atr":3.04246,"price":108.34,"sector":"Energy","shares":82,"position":8883.88},{"rank":3,"ticker":"DVN","momentum":144.0922817892,"atr":2.92212,"price":74.06,"sector":"Energy","shares":85,"position":6295.1},{"rank":4,"ticker":"CEG","momentum":103.5371192026,"atr":2.87135,"price":59.79,"sector":"Utilities","shares":87,"position":5201.73},{"rank":5,"ticker":"MRK","momentum":75.3501536142,"atr":1.788305,"price":87.18,"sector":"Health Care","shares":139,"position":12118.02},{"rank":6,"ticker":"WMB","momentum":75.0376490765,"atr":0.86028,"price":34.89,"sector":"Energy","shares":290,"position":10118.1},{"rank":7,"ticker":"MCK","momentum":72.6569879876,"atr":8.65845,"price":313.34,"sector":"Health Care","shares":28,"position":8773.52},{"rank":8,"ticker":"XOM","momentum":71.2907397744,"atr":2.628525,"price":100.46,"sector":"Energy","shares":95,"position":9543.7},{"rank":9,"ticker":"WRB","momentum":55.9615840451,"atr":1.467195,"price":68.26,"sector":"Financials","shares":170,"position":11604.2},{"rank":10,"ticker":"COP","momentum":55.6388367879,"atr":3.967,"price":116.83,"sector":"Energy","shares":63,"position":7360.29},{"rank":11,"ticker":"CTVA","momentum":54.3127611092,"atr":1.6269,"price":57.98,"sector":"Materials","shares":153,"position":8870.94},{"rank":12,"ticker":"CI","momentum":53.6310746244,"atr":6.79125,"price":253.29,"sector":"Health Care","shares":36,"position":9118.44},{"rank":13,"ticker":"T","momentum":52.6575463378,"atr":0.379305,"price":20.69,"sector":"Communication Services","shares":659,"position":13634.71},{"rank":14,"ticker":"BMY","momentum":50.7159308785,"atr":1.42468,"price":75.09,"sector":"Health Care","shares":175,"position":13140.75},{"rank":15,"ticker":"HAL","momentum":48.2634340394,"atr":1.6588,"price":40.49,"sector":"Energy","shares":150,"position":6073.5},{"rank":16,"ticker":"ED","momentum":42.8966272611,"atr":1.913565,"price":95.15,"sector":"Utilities","shares":130,"position":12369.5},{"rank":17,"ticker":"WEC","momentum":40.4185331175,"atr":2.24676,"price":99.31,"sector":"Utilities","shares":111,"position":11023.41},{"rank":18,"ticker":"CNP","momentum":39.8529482329,"atr":0.61094,"price":30.12,"sector":"Utilities","shares":409,"position":12319.08},{"rank":19,"ticker":"EXC","momentum":39.5076053717,"atr":0.98925,"price":46.01,"sector":"Utilities","shares":252,"position":11594.52},{"rank":20,"ticker":"NOC","momentum":38.3706635586,"atr":12.377285,"price":463.82,"sector":"Industrials","shares":20,"position":9276.4},{"rank":21,"ticker":"AEP","momentum":37.9774210776,"atr":1.9061,"price":98.26,"sector":"Utilities","shares":131,"position":12872.06},{"rank":22,"ticker":"AMCR","momentum":35.403308282,"atr":0.324135,"price":12.76,"sector":"Materials","shares":771,"position":9837.96},{"rank":23,"ticker":"KMI","momentum":33.5893782792,"atr":0.471705,"price":19.03,"sector":"Energy","shares":529,"position":10066.87},{"rank":24,"ticker":"PSX","momentum":33.1231806672,"atr":3.092265,"price":106.31,"sector":"Energy","shares":80,"position":8504.8},{"rank":25,"ticker":"NRG","momentum":30.0642666005,"atr":1.22874,"price":44.01,"sector":"Utilities","shares":203,"position":8934.03},{"rank":26,"ticker":"BKR","momentum":28.7344792171,"atr":1.386875,"price":35.23,"sector":"Energy","shares":180,"position":6341.4},{"rank":27,"ticker":"K","momentum":28.595024374,"atr":1.72498,"price":69.58,"sector":"Consumer Staples","shares":144,"position":10019.52},{"rank":28,"ticker":"ETR","momentum":27.0938697618,"atr":2.330075,"price":115.93,"sector":"Utilities","shares":107,"position":12404.51},{"rank":29,"ticker":"IRM","momentum":25.8020047592,"atr":1.562465,"price":51.04,"sector":"Real Estate","shares":160,"position":8166.4},{"rank":30,"ticker":"ANTM","momentum":24.967515305,"atr":11.84775,"price":482.83,"sector":"Health Care","shares":21,"position":10139.43},{"rank":31,"ticker":"ADM","momentum":23.2039893622,"atr":2.58593,"price":84.68,"sector":"Consumer Staples","shares":96,"position":8129.28},{"rank":32,"ticker":"CMS","momentum":22.4502748635,"atr":1.28025,"price":67.71,"sector":"Utilities","shares":195,"position":13203.45},{"rank":33,"ticker":"EIX","momentum":22.2238150502,"atr":1.50895,"price":66.98,"sector":"Utilities","shares":165,"position":11051.7},{"rank":34,"ticker":"ROL","momentum":21.6640958552,"atr":0.91135,"price":33.94,"sector":"Industrials","shares":274,"position":9299.56},{"rank":35,"ticker":"VRTX","momentum":20.786083642,"atr":8.105495,"price":254.88,"sector":"Health Care","shares":30,"position":7646.4},{"rank":36,"ticker":"CPB","momentum":20.6347791592,"atr":1.43019,"price":46.93,"sector":"Consumer Staples","shares":174,"position":8165.82},{"rank":37,"ticker":"TAP","momentum":20.5882724608,"atr":1.594585,"price":52.34,"sector":"Consumer Staples","shares":156,"position":8165.04},{"rank":38,"ticker":"EVRG","momentum":20.5011160771,"atr":1.24725,"price":66.75,"sector":"Utilities","shares":200,"position":13350.0},{"rank":39,"ticker":"AMGN","momentum":20.1779216817,"atr":4.80805,"price":240.01,"sector":"Health Care","shares":51,"position":12240.51},{"rank":40,"ticker":"HII","momentum":20.0351887046,"atr":4.934005,"price":211.99,"sector":"Industrials","shares":50,"position":10599.5},{"rank":41,"ticker":"STZ","momentum":18.2160125669,"atr":5.077065,"price":239.09,"sector":"Consumer Staples","shares":49,"position":11715.41},{"rank":42,"ticker":"ES","momentum":17.7423502025,"atr":1.781585,"price":88.03,"sector":"Utilities","shares":140,"position":12324.2},{"rank":43,"ticker":"SLB","momentum":17.0505556628,"atr":1.84067,"price":47.21,"sector":"Energy","shares":135,"position":6373.35},{"rank":44,"ticker":"WDC","momentum":15.9232504603,"atr":2.44125,"price":54.03,"sector":"Information Technology","shares":102,"position":5511.06},{"rank":45,"ticker":"GPC","momentum":14.5605160764,"atr":3.49484,"price":135.93,"sector":"Consumer Discretionary","shares":71,"position":9651.03},{"rank":46,"ticker":"DG","momentum":13.8736302549,"atr":9.94597,"price":233.36,"sector":"Consumer Discretionary","shares":25,"position":5834.0},{"rank":47,"ticker":"VICI","momentum":13.821549435,"atr":0.93727,"price":29.94,"sector":"Real Estate","shares":266,"position":7964.04},{"rank":48,"ticker":"PWR","momentum":12.5299895874,"atr":4.9615,"price":126.6,"sector":"Industrials","shares":50,"position":6330.0},{"rank":49,"ticker":"MNST","momentum":12.0909208479,"atr":2.14905,"price":87.04,"sector":"Consumer Staples","shares":116,"position":10096.64},{"rank":50,"ticker":"LIN","momentum":11.4515546732,"atr":8.01125,"price":310.89,"sector":"Materials","shares":31,"position":9637.59},{"rank":51,"ticker":"PGR","momentum":11.3709886684,"atr":2.79275,"price":113.56,"sector":"Financials","shares":89,"position":10106.84},{"rank":52,"ticker":"LMT","momentum":10.3634270146,"atr":9.85203,"price":430.19,"sector":"Industrials","shares":25,"position":10754.75},{"rank":53,"ticker":"TMUS","momentum":9.9322535491,"atr":3.024465,"price":130.51,"sector":"Communication Services","shares":82,"position":10701.82},{"rank":54,"ticker":"FANG","momentum":9.8314515943,"atr":5.75538,"price":155.49,"sector":"Energy","shares":43,"position":6686.07},{"rank":55,"ticker":"HSY","momentum":7.1599247871,"atr":5.046805,"price":213.35,"sector":"Consumer Staples","shares":49,"position":10454.15},{"rank":56,"ticker":"IBM","momentum":6.8972669538,"atr":3.293435,"price":136.19,"sector":"Information Technology","shares":75,"position":10214.25},{"rank":57,"ticker":"NI","momentum":6.8136013555,"atr":0.55775,"price":30.05,"sector":"Utilities","shares":448,"position":13462.4},{"rank":58,"ticker":"ULTA","momentum":5.4498715356,"atr":19.263895,"price":407.72,"sector":"Consumer Discretionary","shares":12,"position":4892.64},{"rank":59,"ticker":"AMT","momentum":4.0191363716,"atr":7.733155,"price":251.01,"sector":"Real Estate","shares":32,"position":8032.32},{"rank":60,"ticker":"AZO","momentum":2.5413818839,"atr":76.552105,"price":2064.46,"sector":"Consumer Discretionary","shares":3,"position":6193.38},{"rank":61,"ticker":"LHX","momentum":0.9968023635,"atr":5.032325,"price":240.43,"sector":"Industrials","shares":49,"position":11781.07},{"rank":62,"ticker":"OGN","momentum":0.2430307327,"atr":1.03987,"price":35.46,"sector":"Health Care","shares":240,"position":8510.4},{"rank":63,"ticker":"PM","momentum":0.1232969614,"atr":2.696955,"price":102.33,"sector":"Consumer Staples","shares":92,"position":9414.36},{"rank":64,"ticker":"WAT","momentum":0.0084068771,"atr":10.69748,"price":329.71,"sector":"Health Care","shares":23,"position":7583.33},{"rank":65,"ticker":"EA","momentum":0.0019548511,"atr":3.813745,"price":133.44,"sector":"Communication Services","shares":65,"position":8673.6},{"rank":66,"ticker":"CTLT","momentum":0.000000402,"atr":3.639275,"price":106.67,"sector":"Health Care","shares":68,"position":7253.56},{"rank":67,"ticker":"APD","momentum":-0.0000182947,"atr":6.4615,"price":248.2,"sector":"Materials","shares":38,"position":9431.6},{"rank":68,"ticker":"BF.B","momentum":-0.0127750108,"atr":1.69856,"price":68.45,"sector":"Consumer Staples","shares":147,"position":10062.15},{"rank":69,"ticker":"SNPS","momentum":-0.0662565695,"atr":12.33139,"price":305.39,"sector":"Information Technology","shares":20,"position":6107.8}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

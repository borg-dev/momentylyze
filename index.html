<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"T","momentum":59.5251665237,"atr":0.49392,"price":20.96,"sector":"Communication Services","shares":506,"position":10605.76},{"rank":2,"ticker":"MRK","momentum":55.2966621163,"atr":1.992375,"price":91.17,"sector":"Health Care","shares":125,"position":11396.25},{"rank":3,"ticker":"MNST","momentum":44.2457278998,"atr":2.5321,"price":92.7,"sector":"Consumer Staples","shares":98,"position":9084.6},{"rank":4,"ticker":"LLY","momentum":42.10842639,"atr":9.1485,"price":324.23,"sector":"Health Care","shares":27,"position":8754.21},{"rank":5,"ticker":"CEG","momentum":39.5838319506,"atr":2.75919,"price":57.26,"sector":"Utilities","shares":90,"position":5153.4},{"rank":6,"ticker":"IBM","momentum":32.2303424128,"atr":2.97429,"price":141.19,"sector":"Information Technology","shares":84,"position":11859.96},{"rank":7,"ticker":"AMCR","momentum":28.6219382884,"atr":0.304385,"price":12.43,"sector":"Materials","shares":821,"position":10205.03},{"rank":8,"ticker":"MCK","momentum":26.732918492,"atr":7.65285,"price":326.21,"sector":"Health Care","shares":32,"position":10438.72},{"rank":9,"ticker":"CI","momentum":24.5498696426,"atr":7.338875,"price":263.52,"sector":"Health Care","shares":34,"position":8959.68},{"rank":10,"ticker":"WRB","momentum":24.4686083255,"atr":1.60225,"price":68.26,"sector":"Financials","shares":156,"position":10648.56},{"rank":11,"ticker":"K","momentum":24.056537373,"atr":1.633335,"price":71.34,"sector":"Consumer Staples","shares":153,"position":10915.02},{"rank":12,"ticker":"BMY","momentum":23.2165720872,"atr":1.485455,"price":77.0,"sector":"Health Care","shares":168,"position":12936.0},{"rank":13,"ticker":"GPC","momentum":21.0200633575,"atr":3.08988,"price":133.0,"sector":"Consumer Discretionary","shares":80,"position":10640.0},{"rank":14,"ticker":"VICI","momentum":16.6026546802,"atr":1.07671,"price":29.79,"sector":"Real Estate","shares":232,"position":6911.28},{"rank":15,"ticker":"CPB","momentum":13.9516329604,"atr":1.2485,"price":48.05,"sector":"Consumer Staples","shares":200,"position":9610.0},{"rank":16,"ticker":"VRTX","momentum":13.2922464365,"atr":9.13587,"price":281.79,"sector":"Health Care","shares":27,"position":7608.33},{"rank":17,"ticker":"DG","momentum":8.4658645783,"atr":5.78488,"price":245.44,"sector":"Consumer Discretionary","shares":43,"position":10553.92},{"rank":18,"ticker":"NOC","momentum":6.804672182,"atr":13.14207,"price":478.57,"sector":"Industrials","shares":19,"position":9092.83},{"rank":19,"ticker":"TMUS","momentum":6.5912460505,"atr":3.75797,"price":134.54,"sector":"Communication Services","shares":66,"position":8879.64},{"rank":20,"ticker":"PGR","momentum":6.3686874615,"atr":2.998,"price":116.27,"sector":"Financials","shares":83,"position":9650.41},{"rank":21,"ticker":"AZO","momentum":5.60669481,"atr":56.14058,"price":2149.12,"sector":"Consumer Discretionary","shares":4,"position":8596.48},{"rank":22,"ticker":"AMGN","momentum":4.7585486935,"atr":4.793635,"price":243.3,"sector":"Health Care","shares":52,"position":12651.6},{"rank":23,"ticker":"GIS","momentum":4.5593430122,"atr":1.658645,"price":75.45,"sector":"Consumer Staples","shares":150,"position":11317.5},{"rank":24,"ticker":"ED","momentum":4.4797926671,"atr":2.242335,"price":95.1,"sector":"Utilities","shares":111,"position":10556.1},{"rank":25,"ticker":"WEC","momentum":3.7310508504,"atr":2.421145,"price":100.64,"sector":"Utilities","shares":103,"position":10365.92},{"rank":26,"ticker":"AMT","momentum":3.1524139068,"atr":8.94325,"price":255.59,"sector":"Real Estate","shares":27,"position":6900.93},{"rank":27,"ticker":"SO","momentum":3.121837331,"atr":1.62077,"price":71.31,"sector":"Utilities","shares":154,"position":10981.74},{"rank":28,"ticker":"TAP","momentum":2.7204803631,"atr":1.48875,"price":54.51,"sector":"Consumer Staples","shares":167,"position":9103.17},{"rank":29,"ticker":"KMB","momentum":2.5963938791,"atr":2.815125,"price":135.15,"sector":"Consumer Staples","shares":88,"position":11893.2},{"rank":30,"ticker":"GILD","momentum":2.3484933261,"atr":1.445755,"price":61.81,"sector":"Health Care","shares":172,"position":10631.32},{"rank":31,"ticker":"JNJ","momentum":2.1816405764,"atr":3.435145,"price":177.51,"sector":"Health Care","shares":72,"position":12780.72},{"rank":32,"ticker":"HII","momentum":2.0413460752,"atr":5.16617,"price":217.82,"sector":"Industrials","shares":48,"position":10455.36},{"rank":33,"ticker":"ROL","momentum":1.1476010713,"atr":0.823005,"price":34.92,"sector":"Industrials","shares":303,"position":10580.76},{"rank":34,"ticker":"BF.B","momentum":0.9343102466,"atr":1.72556,"price":70.16,"sector":"Consumer Staples","shares":144,"position":10103.04},{"rank":35,"ticker":"WAT","momentum":0.6622302774,"atr":9.19873,"price":330.98,"sector":"Health Care","shares":27,"position":8936.46},{"rank":36,"ticker":"HSY","momentum":0.5728074552,"atr":4.50654,"price":215.16,"sector":"Consumer Staples","shares":55,"position":11833.8},{"rank":37,"ticker":"CL","momentum":0.4033433687,"atr":1.635395,"price":80.14,"sector":"Consumer Staples","shares":152,"position":12181.28},{"rank":38,"ticker":"KO","momentum":0.3593645519,"atr":1.29846,"price":62.91,"sector":"Consumer Staples","shares":192,"position":12078.72},{"rank":39,"ticker":"MCD","momentum":0.3068693951,"atr":4.58197,"price":246.88,"sector":"Consumer Discretionary","shares":54,"position":13331.52},{"rank":40,"ticker":"RSG","momentum":0.2803326029,"atr":2.85525,"price":130.87,"sector":"Industrials","shares":87,"position":11385.69},{"rank":41,"ticker":"CTLT","momentum":0.2604718045,"atr":3.61984,"price":107.29,"sector":"Health Care","shares":69,"position":7403.01},{"rank":42,"ticker":"PWR","momentum":0.1453356988,"atr":5.74777,"price":125.34,"sector":"Industrials","shares":43,"position":5389.62},{"rank":43,"ticker":"PFE","momentum":0.1441370066,"atr":1.479585,"price":52.43,"sector":"Health Care","shares":168,"position":8808.24},{"rank":44,"ticker":"INCY","momentum":0.0081841483,"atr":2.206,"price":75.97,"sector":"Health Care","shares":113,"position":8584.61},{"rank":45,"ticker":"O","momentum":0.0000000219,"atr":1.577,"price":68.26,"sector":"Real Estate","shares":158,"position":10785.08},{"rank":46,"ticker":"SYY","momentum":-0.0002549312,"atr":2.19,"price":84.71,"sector":"Consumer Staples","shares":114,"position":9656.94},{"rank":47,"ticker":"UNH","momentum":-0.0282256105,"atr":13.388205,"price":513.63,"sector":"Health Care","shares":18,"position":9245.34},{"rank":48,"ticker":"CAG","momentum":-0.0416191276,"atr":0.77345,"price":34.24,"sector":"Consumer Staples","shares":323,"position":11059.52},{"rank":49,"ticker":"DRE","momentum":-1.4339713256,"atr":1.796,"price":54.95,"sector":"Real Estate","shares":139,"position":7638.05},{"rank":50,"ticker":"CNC","momentum":-1.9042877001,"atr":2.38113,"price":84.61,"sector":"Health Care","shares":104,"position":8799.44},{"rank":51,"ticker":"ABBV","momentum":-2.1521779277,"atr":3.5986,"price":153.16,"sector":"Health Care","shares":69,"position":10568.04},{"rank":52,"ticker":"NEE","momentum":-5.9195150962,"atr":2.39371,"price":77.46,"sector":"Utilities","shares":104,"position":8055.84},{"rank":53,"ticker":"LHX","momentum":-6.0957177343,"atr":5.860725,"price":241.7,"sector":"Industrials","shares":42,"position":10151.4}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

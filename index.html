<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CF","momentum":246.7144161054,"atr":6.13595,"price":100.35,"sector":"Materials","shares":40,"position":4014.0},{"rank":2,"ticker":"CTRA","momentum":215.4079210788,"atr":1.57606,"price":30.42,"sector":"Energy","shares":158,"position":4806.36},{"rank":3,"ticker":"VLO","momentum":214.8233165653,"atr":5.90684,"price":124.26,"sector":"Energy","shares":42,"position":5218.92},{"rank":4,"ticker":"BALL","momentum":149.6545133616,"atr":0.1,"price":69.7,"sector":"Materials","shares":2500,"position":174250.0},{"rank":5,"ticker":"MCK","momentum":126.1851488885,"atr":10.3339,"price":319.13,"sector":"Health Care","shares":24,"position":7659.12},{"rank":6,"ticker":"CEG","momentum":116.2422849952,"atr":2.848565,"price":57.23,"sector":"Utilities","shares":87,"position":4979.01},{"rank":7,"ticker":"DVN","momentum":109.6041076316,"atr":3.913285,"price":69.51,"sector":"Energy","shares":63,"position":4379.13},{"rank":8,"ticker":"CVX","momentum":105.0501985514,"atr":6.1595,"price":166.86,"sector":"Energy","shares":40,"position":6674.4},{"rank":9,"ticker":"MPC","momentum":104.9488198266,"atr":3.812915,"price":95.76,"sector":"Energy","shares":65,"position":6224.4},{"rank":10,"ticker":"ADM","momentum":90.1912318027,"atr":3.33331,"price":83.86,"sector":"Consumer Staples","shares":75,"position":6289.5},{"rank":11,"ticker":"SRE","momentum":87.2286034828,"atr":3.918905,"price":161.89,"sector":"Utilities","shares":63,"position":10199.07},{"rank":12,"ticker":"AIZ","momentum":83.7835178573,"atr":4.89475,"price":180.44,"sector":"Financials","shares":51,"position":9202.44},{"rank":13,"ticker":"LLY","momentum":82.9823881303,"atr":9.740155,"price":286.27,"sector":"Health Care","shares":25,"position":7156.75},{"rank":14,"ticker":"WMB","momentum":81.9833732003,"atr":1.21525,"price":35.02,"sector":"Energy","shares":205,"position":7179.1},{"rank":15,"ticker":"BMY","momentum":81.649977556,"atr":1.6615,"price":75.96,"sector":"Health Care","shares":150,"position":11394.0},{"rank":16,"ticker":"WRB","momentum":79.4061580285,"atr":1.80754,"price":66.29,"sector":"Financials","shares":138,"position":9148.02},{"rank":17,"ticker":"HAL","momentum":77.5048836836,"atr":1.97352,"price":36.06,"sector":"Energy","shares":126,"position":4543.56},{"rank":18,"ticker":"CTVA","momentum":69.1326215444,"atr":1.958605,"price":59.0,"sector":"Materials","shares":127,"position":7493.0},{"rank":19,"ticker":"EXC","momentum":64.903300728,"atr":1.257385,"price":47.35,"sector":"Utilities","shares":198,"position":9375.3},{"rank":20,"ticker":"XOM","momentum":59.0747622575,"atr":3.45425,"price":91.14,"sector":"Energy","shares":72,"position":6562.08},{"rank":21,"ticker":"ABC","momentum":58.2162150986,"atr":5.08825,"price":149.38,"sector":"Health Care","shares":49,"position":7319.62},{"rank":22,"ticker":"BKR","momentum":57.0245404841,"atr":1.62908,"price":34.97,"sector":"Energy","shares":153,"position":5350.41},{"rank":23,"ticker":"PXD","momentum":56.3868893856,"atr":11.88521,"price":265.42,"sector":"Energy","shares":21,"position":5573.82},{"rank":24,"ticker":"ED","momentum":52.0068805371,"atr":2.3088,"price":94.82,"sector":"Utilities","shares":108,"position":10240.56},{"rank":25,"ticker":"NOC","momentum":49.2221153292,"atr":12.1075,"price":448.5,"sector":"Industrials","shares":20,"position":8970.0},{"rank":26,"ticker":"CNP","momentum":48.6901190178,"atr":0.7375,"price":30.66,"sector":"Utilities","shares":338,"position":10363.08},{"rank":27,"ticker":"LMT","momentum":47.5709238391,"atr":10.78623,"price":425.62,"sector":"Industrials","shares":23,"position":9789.26},{"rank":28,"ticker":"DOW","momentum":44.8415512035,"atr":2.055545,"price":68.76,"sector":"Materials","shares":121,"position":8319.96},{"rank":29,"ticker":"COP","momentum":44.039156977,"atr":5.0505,"price":104.61,"sector":"Energy","shares":49,"position":5125.89},{"rank":30,"ticker":"AEP","momentum":42.88586402,"atr":2.556995,"price":99.04,"sector":"Utilities","shares":97,"position":9606.88},{"rank":31,"ticker":"PKG","momentum":41.8691717144,"atr":4.27888,"price":150.49,"sector":"Materials","shares":58,"position":8728.42},{"rank":32,"ticker":"LDOS","momentum":40.6219481081,"atr":2.5762,"price":101.52,"sector":"Industrials","shares":97,"position":9847.44},{"rank":33,"ticker":"ANTM","momentum":40.4944657095,"atr":15.00125,"price":479.92,"sector":"Health Care","shares":16,"position":7678.72},{"rank":34,"ticker":"HST","momentum":36.5051623737,"atr":0.913315,"price":19.45,"sector":"Real Estate","shares":273,"position":5309.85},{"rank":35,"ticker":"DTE","momentum":36.3901588147,"atr":2.933495,"price":128.82,"sector":"Utilities","shares":85,"position":10949.7},{"rank":36,"ticker":"ABBV","momentum":33.3879429279,"atr":4.54836,"price":151.72,"sector":"Health Care","shares":54,"position":8192.88},{"rank":37,"ticker":"TMUS","momentum":32.6663410008,"atr":4.560245,"price":125.88,"sector":"Communication Services","shares":54,"position":6797.52},{"rank":38,"ticker":"CI","momentum":31.6442772086,"atr":7.8346,"price":256.88,"sector":"Health Care","shares":31,"position":7963.28},{"rank":39,"ticker":"MRK","momentum":31.5690305502,"atr":2.17601,"price":92.09,"sector":"Health Care","shares":114,"position":10498.26},{"rank":40,"ticker":"CMS","momentum":30.8562471483,"atr":1.591545,"price":69.21,"sector":"Utilities","shares":157,"position":10865.97},{"rank":41,"ticker":"SO","momentum":30.5530217936,"atr":1.74501,"price":73.33,"sector":"Utilities","shares":143,"position":10486.19},{"rank":42,"ticker":"VRTX","momentum":30.4935575908,"atr":9.723245,"price":255.45,"sector":"Health Care","shares":25,"position":6386.25},{"rank":43,"ticker":"XEL","momentum":26.9373494875,"atr":1.72525,"price":75.01,"sector":"Utilities","shares":144,"position":10801.44},{"rank":44,"ticker":"ETR","momentum":26.3830526802,"atr":2.9795,"price":115.67,"sector":"Utilities","shares":83,"position":9600.61},{"rank":45,"ticker":"HII","momentum":26.0301965196,"atr":6.788635,"price":200.73,"sector":"Industrials","shares":36,"position":7226.28},{"rank":46,"ticker":"LYB","momentum":24.9042324306,"atr":3.78225,"price":109.03,"sector":"Materials","shares":66,"position":7195.98},{"rank":47,"ticker":"KMI","momentum":24.5495823626,"atr":0.617995,"price":19.02,"sector":"Energy","shares":404,"position":7684.08},{"rank":48,"ticker":"FMC","momentum":23.6524212265,"atr":4.436965,"price":121.38,"sector":"Materials","shares":56,"position":6797.28},{"rank":49,"ticker":"AEE","momentum":23.4862236957,"atr":1.98513,"price":92.48,"sector":"Utilities","shares":125,"position":11560.0},{"rank":50,"ticker":"DUK","momentum":23.0066223523,"atr":2.626885,"price":108.95,"sector":"Utilities","shares":95,"position":10350.25},{"rank":51,"ticker":"WEC","momentum":20.0436937285,"atr":2.486795,"price":102.87,"sector":"Utilities","shares":100,"position":10287.0},{"rank":52,"ticker":"VTR","momentum":19.9302920712,"atr":1.65525,"price":56.09,"sector":"Real Estate","shares":151,"position":8469.59},{"rank":53,"ticker":"ROL","momentum":17.9940256326,"atr":1.135805,"price":34.33,"sector":"Industrials","shares":220,"position":7552.6},{"rank":54,"ticker":"JNJ","momentum":16.8325355177,"atr":3.23632,"price":173.94,"sector":"Health Care","shares":77,"position":13393.38},{"rank":55,"ticker":"AMGN","momentum":15.4775408427,"atr":6.021195,"price":244.77,"sector":"Health Care","shares":41,"position":10035.57},{"rank":56,"ticker":"NI","momentum":14.4904577196,"atr":0.68115,"price":30.31,"sector":"Utilities","shares":367,"position":11123.77},{"rank":57,"ticker":"D","momentum":14.1328516952,"atr":2.04963,"price":82.21,"sector":"Utilities","shares":121,"position":9947.41},{"rank":58,"ticker":"L","momentum":13.6457210475,"atr":1.693615,"price":62.94,"sector":"Financials","shares":147,"position":9252.18},{"rank":59,"ticker":"J","momentum":13.6183774237,"atr":4.61405,"price":133.77,"sector":"Industrials","shares":54,"position":7223.58},{"rank":60,"ticker":"EVRG","momentum":13.3431811399,"atr":1.635805,"price":66.7,"sector":"Utilities","shares":152,"position":10138.4},{"rank":61,"ticker":"PNW","momentum":13.2084645896,"atr":1.910695,"price":75.53,"sector":"Utilities","shares":130,"position":9818.9},{"rank":62,"ticker":"REGN","momentum":12.5776458953,"atr":20.08098,"price":657.15,"sector":"Health Care","shares":12,"position":7885.8},{"rank":63,"ticker":"HOLX","momentum":11.3360073774,"atr":2.22975,"price":78.12,"sector":"Health Care","shares":112,"position":8749.44},{"rank":64,"ticker":"CPB","momentum":11.0272051339,"atr":1.4515,"price":46.06,"sector":"Consumer Staples","shares":172,"position":7922.32},{"rank":65,"ticker":"K","momentum":10.2982640783,"atr":2.031725,"price":68.0,"sector":"Consumer Staples","shares":123,"position":8364.0},{"rank":66,"ticker":"SLB","momentum":7.4357425907,"atr":2.32125,"price":40.85,"sector":"Energy","shares":107,"position":4370.95},{"rank":67,"ticker":"CERN","momentum":6.6106157206,"atr":0.37027,"price":93.92,"sector":"Health Care","shares":675,"position":63396.0},{"rank":68,"ticker":"ES","momentum":5.3714019012,"atr":2.239285,"price":89.44,"sector":"Utilities","shares":111,"position":9927.84},{"rank":69,"ticker":"PGR","momentum":2.0813667591,"atr":3.37925,"price":110.42,"sector":"Financials","shares":73,"position":8060.66},{"rank":70,"ticker":"SNA","momentum":1.0639279032,"atr":6.548615,"price":215.03,"sector":"Industrials","shares":38,"position":8171.14},{"rank":71,"ticker":"AMCR","momentum":0.9604706405,"atr":0.43529,"price":12.96,"sector":"Materials","shares":574,"position":7439.04},{"rank":72,"ticker":"PSX","momentum":0.9510486675,"atr":3.88775,"price":95.33,"sector":"Energy","shares":64,"position":6101.12},{"rank":73,"ticker":"OGN","momentum":0.7406899427,"atr":1.26524,"price":36.57,"sector":"Health Care","shares":197,"position":7204.29},{"rank":74,"ticker":"T","momentum":0.3576287975,"atr":0.51563,"price":20.21,"sector":"Communication Services","shares":484,"position":9781.64},{"rank":75,"ticker":"NRG","momentum":0.094915157,"atr":1.4455,"price":46.21,"sector":"Utilities","shares":172,"position":7948.12},{"rank":76,"ticker":"GPC","momentum":0.0336071584,"atr":4.063255,"price":132.0,"sector":"Consumer Discretionary","shares":61,"position":8052.0},{"rank":77,"ticker":"IP","momentum":0.020121048,"atr":1.41125,"price":47.82,"sector":"Materials","shares":177,"position":8464.14},{"rank":78,"ticker":"PPL","momentum":-0.0000000041,"atr":0.63,"price":29.21,"sector":"Utilities","shares":396,"position":11567.16},{"rank":79,"ticker":"DGX","momentum":-0.0005222736,"atr":3.939875,"price":140.07,"sector":"Health Care","shares":63,"position":8824.41},{"rank":80,"ticker":"MNST","momentum":-0.0234457857,"atr":2.97295,"price":86.76,"sector":"Consumer Staples","shares":84,"position":7287.84},{"rank":81,"ticker":"PM","momentum":-0.2524176216,"atr":2.85343,"price":100.5,"sector":"Consumer Staples","shares":87,"position":8743.5},{"rank":82,"ticker":"WDC","momentum":-0.574941988,"atr":2.76141,"price":58.01,"sector":"Information Technology","shares":90,"position":5220.9},{"rank":83,"ticker":"WAT","momentum":-1.270967427,"atr":12.32675,"price":323.83,"sector":"Health Care","shares":20,"position":6476.6},{"rank":84,"ticker":"EA","momentum":-14.8887756196,"atr":4.771795,"price":130.02,"sector":"Communication Services","shares":52,"position":6761.04}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

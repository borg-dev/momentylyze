<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":148.7569943673,"atr":1.6708,"price":68.22,"sector":"Health Care","shares":149,"position":10164.78},{"rank":2,"ticker":"MOH","momentum":103.0593206008,"atr":8.339125,"price":348.76,"sector":"Health Care","shares":29,"position":10114.04},{"rank":3,"ticker":"PCG","momentum":72.0611398615,"atr":0.552955,"price":14.93,"sector":"Utilities","shares":452,"position":6748.36},{"rank":4,"ticker":"AES","momentum":65.0606992104,"atr":0.90563,"price":24.92,"sector":"Utilities","shares":276,"position":6877.92},{"rank":5,"ticker":"IT","momentum":56.273848909,"atr":8.83984,"price":294.01,"sector":"Information Technology","shares":28,"position":8232.28},{"rank":6,"ticker":"KEYS","momentum":54.1478356193,"atr":4.211,"price":161.06,"sector":"Information Technology","shares":59,"position":9502.54},{"rank":7,"ticker":"GPC","momentum":53.0454758245,"atr":3.69446,"price":153.87,"sector":"Consumer Discretionary","shares":67,"position":10309.29},{"rank":8,"ticker":"TT","momentum":51.663712165,"atr":4.49725,"price":146.36,"sector":"Industrials","shares":55,"position":8049.8},{"rank":9,"ticker":"NDAQ","momentum":49.4315212104,"atr":1.45075,"price":57.66,"sector":"Financials","shares":172,"position":9917.52},{"rank":10,"ticker":"ON","momentum":47.4274809935,"atr":3.31726,"price":64.83,"sector":"Information Technology","shares":75,"position":4862.25},{"rank":11,"ticker":"SBUX","momentum":47.0124861876,"atr":2.61675,"price":87.03,"sector":"Consumer Discretionary","shares":95,"position":8267.85},{"rank":12,"ticker":"RJF","momentum":46.0143051103,"atr":3.056365,"price":107.12,"sector":"Financials","shares":81,"position":8676.72},{"rank":13,"ticker":"SCHW","momentum":43.2172732294,"atr":2.03668,"price":74.31,"sector":"Financials","shares":122,"position":9065.82},{"rank":14,"ticker":"LW","momentum":43.1632834435,"atr":2.225,"price":82.79,"sector":"Consumer Staples","shares":112,"position":9272.48},{"rank":15,"ticker":"ORLY","momentum":40.47265697,"atr":16.719885,"price":710.77,"sector":"Consumer Discretionary","shares":14,"position":9950.78},{"rank":16,"ticker":"XYL","momentum":38.3706205354,"atr":2.745365,"price":89.27,"sector":"Industrials","shares":91,"position":8123.57},{"rank":17,"ticker":"SJM","momentum":36.8567396334,"atr":2.73957,"price":137.59,"sector":"Consumer Staples","shares":91,"position":12520.69},{"rank":18,"ticker":"CF","momentum":35.138477536,"atr":5.129575,"price":104.8,"sector":"Materials","shares":48,"position":5030.4},{"rank":19,"ticker":"CDAY","momentum":34.9822948498,"atr":2.266375,"price":59.64,"sector":"Information Technology","shares":110,"position":6560.4},{"rank":20,"ticker":"CI","momentum":32.8359226886,"atr":6.2477,"price":288.38,"sector":"Health Care","shares":40,"position":11535.2},{"rank":21,"ticker":"MCK","momentum":31.1141904523,"atr":8.29875,"price":346.68,"sector":"Health Care","shares":30,"position":10400.4},{"rank":22,"ticker":"PFG","momentum":30.9875264548,"atr":2.15369,"price":76.04,"sector":"Financials","shares":116,"position":8820.64},{"rank":23,"ticker":"AJG","momentum":30.7654188195,"atr":3.99016,"price":174.31,"sector":"Financials","shares":62,"position":10807.22},{"rank":24,"ticker":"FDS","momentum":28.9726096799,"atr":11.75775,"price":413.69,"sector":"Financials","shares":21,"position":8687.49},{"rank":25,"ticker":"HII","momentum":27.8823370645,"atr":5.587425,"price":232.88,"sector":"Industrials","shares":44,"position":10246.72},{"rank":26,"ticker":"GIS","momentum":27.6813589263,"atr":1.81526,"price":75.35,"sector":"Consumer Staples","shares":137,"position":10322.95},{"rank":27,"ticker":"MSI","momentum":25.5220082303,"atr":5.504495,"price":229.85,"sector":"Information Technology","shares":45,"position":10343.25},{"rank":28,"ticker":"IEX","momentum":24.9552989854,"atr":4.56454,"price":202.03,"sector":"Industrials","shares":54,"position":10909.62},{"rank":29,"ticker":"MTB","momentum":20.8203139453,"atr":5.36009,"price":182.06,"sector":"Financials","shares":46,"position":8374.76},{"rank":30,"ticker":"DRI","momentum":16.1224610073,"atr":4.246395,"price":125.69,"sector":"Consumer Discretionary","shares":58,"position":7290.02},{"rank":31,"ticker":"TJX","momentum":14.3407452722,"atr":1.832775,"price":64.59,"sector":"Consumer Discretionary","shares":136,"position":8784.24},{"rank":32,"ticker":"BBWI","momentum":12.9220402947,"atr":1.70308,"price":35.51,"sector":"Consumer Discretionary","shares":146,"position":5184.46},{"rank":33,"ticker":"BSX","momentum":11.917585746,"atr":1.009,"price":39.76,"sector":"Health Care","shares":247,"position":9820.72},{"rank":34,"ticker":"BRO","momentum":11.8938835426,"atr":1.492975,"price":61.22,"sector":"Financials","shares":167,"position":10223.74},{"rank":35,"ticker":"PGR","momentum":11.6998017375,"atr":2.68525,"price":121.96,"sector":"Financials","shares":93,"position":11342.28},{"rank":36,"ticker":"GL","momentum":11.5470374929,"atr":2.204985,"price":105.98,"sector":"Financials","shares":113,"position":11975.74},{"rank":37,"ticker":"AMP","momentum":10.5620845848,"atr":8.3575,"price":271.86,"sector":"Financials","shares":29,"position":7883.94},{"rank":38,"ticker":"HSY","momentum":10.3704863954,"atr":4.2441,"price":220.52,"sector":"Consumer Staples","shares":58,"position":12790.16},{"rank":39,"ticker":"CTAS","momentum":9.4164981591,"atr":10.559,"price":398.41,"sector":"Industrials","shares":23,"position":9163.43},{"rank":40,"ticker":"VRTX","momentum":8.8574123975,"atr":8.07971,"price":295.23,"sector":"Health Care","shares":30,"position":8856.9},{"rank":41,"ticker":"CTVA","momentum":8.5923862557,"atr":1.78433,"price":60.83,"sector":"Materials","shares":140,"position":8516.2},{"rank":42,"ticker":"A","momentum":8.567668401,"atr":3.67586,"price":127.44,"sector":"Health Care","shares":68,"position":8665.92},{"rank":43,"ticker":"CMI","momentum":7.7303071915,"atr":5.886635,"price":218.04,"sector":"Industrials","shares":42,"position":9157.68},{"rank":44,"ticker":"LOW","momentum":7.2395461681,"atr":5.631245,"price":197.21,"sector":"Consumer Discretionary","shares":44,"position":8677.24},{"rank":45,"ticker":"CBOE","momentum":7.1379840722,"atr":2.735965,"price":118.94,"sector":"Financials","shares":91,"position":10823.54},{"rank":46,"ticker":"RMD","momentum":6.2518368507,"atr":5.62324,"price":222.41,"sector":"Health Care","shares":44,"position":9786.04},{"rank":47,"ticker":"NOC","momentum":6.1409756371,"atr":14.031445,"price":496.09,"sector":"Industrials","shares":17,"position":8433.53},{"rank":48,"ticker":"COP","momentum":5.9502286862,"atr":4.53152,"price":118.51,"sector":"Energy","shares":55,"position":6518.05},{"rank":49,"ticker":"ADM","momentum":5.8185710849,"atr":2.57125,"price":85.44,"sector":"Consumer Staples","shares":97,"position":8287.68},{"rank":50,"ticker":"GILD","momentum":5.7897975963,"atr":1.65596,"price":64.29,"sector":"Health Care","shares":150,"position":9643.5},{"rank":51,"ticker":"MGM","momentum":2.9010767815,"atr":1.50325,"price":32.68,"sector":"Consumer Discretionary","shares":166,"position":5424.88},{"rank":52,"ticker":"AZO","momentum":2.4636558273,"atr":58.773855,"price":2174.0,"sector":"Consumer Discretionary","shares":4,"position":8696.0},{"rank":53,"ticker":"MPC","momentum":1.8326131492,"atr":3.698955,"price":106.84,"sector":"Energy","shares":67,"position":7158.28},{"rank":54,"ticker":"PCAR","momentum":1.1438823204,"atr":2.2675,"price":87.68,"sector":"Industrials","shares":110,"position":9644.8},{"rank":55,"ticker":"ROL","momentum":1.080140716,"atr":0.8202,"price":36.16,"sector":"Industrials","shares":304,"position":10992.64},{"rank":56,"ticker":"NRG","momentum":0.7344595562,"atr":1.20714,"price":41.12,"sector":"Utilities","shares":207,"position":8511.84},{"rank":57,"ticker":"DVN","momentum":0.5049091855,"atr":3.32315,"price":72.04,"sector":"Energy","shares":75,"position":5403.0},{"rank":58,"ticker":"LLY","momentum":0.1699515503,"atr":9.59452,"price":326.66,"sector":"Health Care","shares":26,"position":8493.16},{"rank":59,"ticker":"XOM","momentum":0.061994125,"atr":3.184405,"price":101.03,"sector":"Energy","shares":78,"position":7880.34},{"rank":60,"ticker":"ALL","momentum":0.0168771222,"atr":3.47875,"price":130.64,"sector":"Financials","shares":71,"position":9275.44},{"rank":61,"ticker":"NVR","momentum":-0.0233127968,"atr":127.907045,"price":4255.08,"sector":"Consumer Discretionary","shares":1,"position":4255.08},{"rank":62,"ticker":"FMC","momentum":-0.0634286313,"atr":3.06825,"price":110.76,"sector":"Materials","shares":81,"position":8971.56},{"rank":63,"ticker":"CVX","momentum":-0.0820349383,"atr":4.778305,"price":160.03,"sector":"Energy","shares":52,"position":8321.56},{"rank":64,"ticker":"SLB","momentum":-0.4583741921,"atr":1.768465,"price":42.59,"sector":"Energy","shares":141,"position":6005.19},{"rank":65,"ticker":"TSCO","momentum":-0.5806070712,"atr":5.767245,"price":194.62,"sector":"Consumer Discretionary","shares":43,"position":8368.66},{"rank":66,"ticker":"WRB","momentum":-1.0260166242,"atr":1.498765,"price":66.92,"sector":"Financials","shares":166,"position":11108.72},{"rank":67,"ticker":"PSX","momentum":-7.2814757096,"atr":3.631215,"price":92.5,"sector":"Energy","shares":68,"position":6290.0}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

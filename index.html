<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":72.2063551338,"atr":2.23233,"price":95.07,"sector":"Consumer Staples","shares":111,"position":10552.77},{"rank":2,"ticker":"MRK","momentum":30.7155400194,"atr":1.904865,"price":90.11,"sector":"Health Care","shares":131,"position":11804.41},{"rank":3,"ticker":"LLY","momentum":27.0399039021,"atr":7.83287,"price":328.75,"sector":"Health Care","shares":31,"position":10191.25},{"rank":4,"ticker":"VICI","momentum":26.7959910496,"atr":0.742635,"price":33.06,"sector":"Real Estate","shares":336,"position":11108.16},{"rank":5,"ticker":"K","momentum":25.0267850079,"atr":1.278285,"price":71.14,"sector":"Consumer Staples","shares":195,"position":13872.3},{"rank":6,"ticker":"CI","momentum":17.7564116443,"atr":7.413005,"price":269.2,"sector":"Health Care","shares":33,"position":8883.6},{"rank":7,"ticker":"AMCR","momentum":14.3804051791,"atr":0.29775,"price":12.6,"sector":"Materials","shares":839,"position":10571.4},{"rank":8,"ticker":"CPB","momentum":12.9056935912,"atr":0.861285,"price":47.85,"sector":"Consumer Staples","shares":290,"position":13876.5},{"rank":9,"ticker":"GPC","momentum":12.8605767791,"atr":2.72316,"price":144.49,"sector":"Consumer Discretionary","shares":91,"position":13148.59},{"rank":10,"ticker":"GIS","momentum":11.0626183856,"atr":1.471685,"price":73.63,"sector":"Consumer Staples","shares":169,"position":12443.47},{"rank":11,"ticker":"VRTX","momentum":7.4384985731,"atr":7.82798,"price":280.29,"sector":"Health Care","shares":31,"position":8688.99},{"rank":12,"ticker":"BF.B","momentum":5.8825746847,"atr":1.298215,"price":71.22,"sector":"Consumer Staples","shares":192,"position":13674.24},{"rank":13,"ticker":"WAT","momentum":5.3703634093,"atr":9.21623,"price":345.68,"sector":"Health Care","shares":27,"position":9333.36},{"rank":14,"ticker":"TMUS","momentum":5.3202926613,"atr":3.37715,"price":132.48,"sector":"Communication Services","shares":74,"position":9803.52},{"rank":15,"ticker":"MCK","momentum":5.0091313554,"atr":8.05952,"price":330.44,"sector":"Health Care","shares":31,"position":10243.64},{"rank":16,"ticker":"TAP","momentum":4.4968497878,"atr":1.39192,"price":57.91,"sector":"Consumer Staples","shares":179,"position":10365.89},{"rank":17,"ticker":"KMB","momentum":4.4400047292,"atr":2.16153,"price":132.4,"sector":"Consumer Staples","shares":115,"position":15226.0},{"rank":18,"ticker":"AZO","momentum":2.1051783112,"atr":53.3582,"price":2147.62,"sector":"Consumer Discretionary","shares":4,"position":8590.48},{"rank":19,"ticker":"DG","momentum":1.7419453914,"atr":5.4937,"price":247.81,"sector":"Consumer Discretionary","shares":45,"position":11151.45},{"rank":20,"ticker":"ROL","momentum":1.0124721111,"atr":0.81276,"price":36.47,"sector":"Industrials","shares":307,"position":11196.29},{"rank":21,"ticker":"STZ","momentum":0.6906264718,"atr":5.797835,"price":242.38,"sector":"Consumer Staples","shares":43,"position":10422.34},{"rank":22,"ticker":"SYY","momentum":0.413234606,"atr":1.964245,"price":86.86,"sector":"Consumer Staples","shares":127,"position":11031.22},{"rank":23,"ticker":"EA","momentum":0.3841002094,"atr":2.814625,"price":130.16,"sector":"Communication Services","shares":88,"position":11454.08},{"rank":24,"ticker":"MCD","momentum":0.371346905,"atr":4.048345,"price":253.99,"sector":"Consumer Discretionary","shares":61,"position":15493.39},{"rank":25,"ticker":"AMT","momentum":0.3199077193,"atr":6.621495,"price":259.6,"sector":"Real Estate","shares":37,"position":9605.2},{"rank":26,"ticker":"CTLT","momentum":0.228109913,"atr":3.810325,"price":107.61,"sector":"Health Care","shares":65,"position":6994.65},{"rank":27,"ticker":"AMGN","momentum":0.1442096147,"atr":3.91048,"price":245.95,"sector":"Health Care","shares":63,"position":15494.85},{"rank":28,"ticker":"CBOE","momentum":0.021926375,"atr":2.67575,"price":123.73,"sector":"Financials","shares":93,"position":11506.89},{"rank":29,"ticker":"DPZ","momentum":0.0067141318,"atr":10.19265,"price":399.27,"sector":"Consumer Discretionary","shares":24,"position":9582.48},{"rank":30,"ticker":"SNPS","momentum":0.0007220168,"atr":9.45574,"price":338.04,"sector":"Information Technology","shares":26,"position":8789.04},{"rank":31,"ticker":"MAS","momentum":-0.0016895396,"atr":1.4293,"price":56.31,"sector":"Industrials","shares":174,"position":9797.94},{"rank":32,"ticker":"CNC","momentum":-0.0037505174,"atr":2.36341,"price":90.94,"sector":"Health Care","shares":105,"position":9548.7},{"rank":33,"ticker":"PEP","momentum":-0.0154706185,"atr":2.943505,"price":169.61,"sector":"Consumer Staples","shares":84,"position":14247.24},{"rank":34,"ticker":"ULTA","momentum":-0.0211711046,"atr":12.212,"price":406.4,"sector":"Consumer Discretionary","shares":20,"position":8128.0},{"rank":35,"ticker":"CDNS","momentum":-0.0333714055,"atr":5.08,"price":167.71,"sector":"Information Technology","shares":49,"position":8217.79},{"rank":36,"ticker":"INCY","momentum":-0.0344742828,"atr":2.059495,"price":80.9,"sector":"Health Care","shares":121,"position":9788.9},{"rank":37,"ticker":"PWR","momentum":-0.0506793741,"atr":4.9002,"price":133.06,"sector":"Industrials","shares":51,"position":6786.06},{"rank":38,"ticker":"O","momentum":-0.1047214649,"atr":1.274065,"price":71.35,"sector":"Real Estate","shares":196,"position":13984.6},{"rank":39,"ticker":"PFE","momentum":-0.2340330619,"atr":1.183815,"price":51.23,"sector":"Health Care","shares":211,"position":10809.53},{"rank":40,"ticker":"CMI","momentum":-0.2687525008,"atr":5.74749,"price":205.2,"sector":"Industrials","shares":43,"position":8823.6},{"rank":41,"ticker":"UNH","momentum":-0.4802054714,"atr":14.13,"price":521.41,"sector":"Health Care","shares":17,"position":8863.97},{"rank":42,"ticker":"DRE","momentum":-0.5479855502,"atr":1.603,"price":59.69,"sector":"Real Estate","shares":155,"position":9251.95},{"rank":43,"ticker":"PHM","momentum":-0.6709344795,"atr":1.6852,"price":45.91,"sector":"Consumer Discretionary","shares":148,"position":6794.68},{"rank":44,"ticker":"MHK","momentum":-0.7559932472,"atr":4.84384,"price":134.82,"sector":"Consumer Discretionary","shares":51,"position":6875.82},{"rank":45,"ticker":"YUM","momentum":-1.0013198821,"atr":2.29742,"price":119.45,"sector":"Consumer Discretionary","shares":108,"position":12900.6},{"rank":46,"ticker":"FIS","momentum":-1.5152068171,"atr":2.79372,"price":99.02,"sector":"Information Technology","shares":89,"position":8812.78},{"rank":47,"ticker":"RSG","momentum":-1.9974897483,"atr":2.524475,"price":131.02,"sector":"Industrials","shares":99,"position":12970.98},{"rank":48,"ticker":"NEE","momentum":-2.0322821878,"atr":1.871095,"price":80.25,"sector":"Utilities","shares":133,"position":10673.25},{"rank":49,"ticker":"SNA","momentum":-2.1675591789,"atr":4.64445,"price":213.27,"sector":"Industrials","shares":53,"position":11303.31},{"rank":50,"ticker":"ON","momentum":-2.2270327557,"atr":2.674825,"price":59.42,"sector":"Information Technology","shares":93,"position":5526.06},{"rank":51,"ticker":"SHW","momentum":-2.2416523007,"atr":6.90425,"price":259.01,"sector":"Materials","shares":36,"position":9324.36},{"rank":52,"ticker":"TJX","momentum":-2.2489815239,"atr":1.64186,"price":63.76,"sector":"Consumer Discretionary","shares":152,"position":9691.52},{"rank":53,"ticker":"AVY","momentum":-2.2794117486,"atr":4.41547,"price":175.3,"sector":"Materials","shares":56,"position":9816.8},{"rank":54,"ticker":"GL","momentum":-2.317403613,"atr":2.27221,"price":100.67,"sector":"Financials","shares":110,"position":11073.7},{"rank":55,"ticker":"JKHY","momentum":-2.6520860487,"atr":3.814395,"price":199.69,"sector":"Information Technology","shares":65,"position":12979.85},{"rank":56,"ticker":"BR","momentum":-3.3481072406,"atr":3.67943,"price":156.19,"sector":"Information Technology","shares":67,"position":10464.73},{"rank":57,"ticker":"ADP","momentum":-3.7233782948,"atr":5.06068,"price":220.34,"sector":"Information Technology","shares":49,"position":10796.66},{"rank":58,"ticker":"ADI","momentum":-3.9640520692,"atr":4.59275,"price":163.27,"sector":"Information Technology","shares":54,"position":8816.58},{"rank":59,"ticker":"KLAC","momentum":-4.0327396993,"atr":13.60537,"price":354.02,"sector":"Information Technology","shares":18,"position":6372.36},{"rank":60,"ticker":"AJG","momentum":-4.4453163635,"atr":3.50775,"price":168.23,"sector":"Financials","shares":71,"position":11944.33},{"rank":61,"ticker":"ORLY","momentum":-5.123214783,"atr":13.821745,"price":688.2,"sector":"Consumer Discretionary","shares":18,"position":12387.6},{"rank":62,"ticker":"MTB","momentum":-5.3190219215,"atr":5.37985,"price":168.96,"sector":"Financials","shares":46,"position":7772.16},{"rank":63,"ticker":"EL","momentum":-5.6250776402,"atr":7.559,"price":260.1,"sector":"Consumer Staples","shares":33,"position":8583.3},{"rank":64,"ticker":"DHI","momentum":-5.8372716651,"atr":2.70226,"price":77.39,"sector":"Consumer Discretionary","shares":92,"position":7119.88},{"rank":65,"ticker":"SBUX","momentum":-6.0542873601,"atr":2.02301,"price":83.59,"sector":"Consumer Discretionary","shares":123,"position":10281.57},{"rank":66,"ticker":"IQV","momentum":-6.0750686827,"atr":6.290675,"price":221.74,"sector":"Health Care","shares":39,"position":8647.86},{"rank":67,"ticker":"V","momentum":-6.2538750507,"atr":5.570505,"price":213.7,"sector":"Information Technology","shares":44,"position":9402.8},{"rank":68,"ticker":"LEN","momentum":-7.158619253,"atr":2.79869,"price":83.08,"sector":"Consumer Discretionary","shares":89,"position":7394.12},{"rank":69,"ticker":"IEX","momentum":-7.9030486935,"atr":4.4425,"price":192.77,"sector":"Industrials","shares":56,"position":10795.12},{"rank":70,"ticker":"MPWR","momentum":-8.1259530054,"atr":18.97615,"price":436.44,"sector":"Information Technology","shares":13,"position":5673.72},{"rank":71,"ticker":"MA","momentum":-8.4896488009,"atr":9.32065,"price":343.88,"sector":"Information Technology","shares":26,"position":8940.88},{"rank":72,"ticker":"TMO","momentum":-8.7298297643,"atr":15.657765,"price":561.54,"sector":"Health Care","shares":15,"position":8423.1},{"rank":73,"ticker":"NVR","momentum":-8.8968207872,"atr":145.3101,"price":4552.61,"sector":"Consumer Discretionary","shares":1,"position":4552.61},{"rank":74,"ticker":"FISV","momentum":-9.3221083168,"atr":2.5805,"price":99.87,"sector":"Information Technology","shares":96,"position":9587.52},{"rank":75,"ticker":"HWM","momentum":-9.5491995028,"atr":1.062865,"price":34.36,"sector":"Industrials","shares":235,"position":8074.6},{"rank":76,"ticker":"FRC","momentum":-9.6050592538,"atr":4.231625,"price":158.66,"sector":"Financials","shares":59,"position":9360.94},{"rank":77,"ticker":"KEYS","momentum":-9.7174419129,"atr":3.93483,"price":150.58,"sector":"Information Technology","shares":63,"position":9486.54},{"rank":78,"ticker":"CTAS","momentum":-10.1787794265,"atr":9.1743,"price":396.73,"sector":"Industrials","shares":27,"position":10711.71},{"rank":79,"ticker":"RMD","momentum":-10.8010835128,"atr":5.505915,"price":231.75,"sector":"Health Care","shares":45,"position":10428.75},{"rank":80,"ticker":"CPRT","momentum":-11.444178619,"atr":2.98565,"price":121.97,"sector":"Industrials","shares":83,"position":10123.51},{"rank":81,"ticker":"FDS","momentum":-11.9410444466,"atr":10.05551,"price":408.03,"sector":"Financials","shares":24,"position":9792.72},{"rank":82,"ticker":"DHR","momentum":-12.3321376502,"atr":7.93768,"price":273.84,"sector":"Health Care","shares":31,"position":8489.04},{"rank":83,"ticker":"MSI","momentum":-12.5174453646,"atr":5.148,"price":221.16,"sector":"Information Technology","shares":48,"position":10615.68},{"rank":84,"ticker":"CDW","momentum":-12.9823455478,"atr":4.1935,"price":170.1,"sector":"Information Technology","shares":59,"position":10035.9},{"rank":85,"ticker":"ZTS","momentum":-12.9872857921,"atr":4.37838,"price":178.18,"sector":"Health Care","shares":57,"position":10156.26},{"rank":86,"ticker":"NDAQ","momentum":-14.0110337965,"atr":3.914795,"price":172.6,"sector":"Financials","shares":63,"position":10873.8},{"rank":87,"ticker":"NXPI","momentum":-14.1153149135,"atr":6.17425,"price":175.14,"sector":"Information Technology","shares":40,"position":7005.6},{"rank":88,"ticker":"NDSN","momentum":-14.9701267218,"atr":5.329695,"price":219.67,"sector":"Industrials","shares":46,"position":10104.82},{"rank":89,"ticker":"HD","momentum":-15.5457451352,"atr":7.311985,"price":306.59,"sector":"Consumer Discretionary","shares":34,"position":10424.06},{"rank":90,"ticker":"GS","momentum":-16.6253601862,"atr":9.604915,"price":323.93,"sector":"Financials","shares":26,"position":8422.18},{"rank":91,"ticker":"XYL","momentum":-17.7257383583,"atr":2.141455,"price":84.34,"sector":"Industrials","shares":116,"position":9783.44},{"rank":92,"ticker":"COST","momentum":-18.7326548512,"atr":11.87338,"price":529.72,"sector":"Consumer Staples","shares":21,"position":11124.12},{"rank":93,"ticker":"ADSK","momentum":-18.8631678661,"atr":6.972755,"price":195.95,"sector":"Information Technology","shares":35,"position":6858.25},{"rank":94,"ticker":"PPG","momentum":-18.9090566887,"atr":4.163595,"price":127.73,"sector":"Materials","shares":60,"position":7663.8},{"rank":95,"ticker":"INTU","momentum":-21.7989891232,"atr":15.71055,"price":434.74,"sector":"Information Technology","shares":15,"position":6521.1},{"rank":96,"ticker":"ABMD","momentum":-26.2044855505,"atr":9.708075,"price":281.7,"sector":"Health Care","shares":25,"position":7042.5},{"rank":97,"ticker":"AAPL","momentum":-27.6493982855,"atr":3.87841,"price":154.09,"sector":"Information Technology","shares":64,"position":9861.76},{"rank":98,"ticker":"BA","momentum":-31.2114314551,"atr":6.42851,"price":158.16,"sector":"Industrials","shares":38,"position":6010.08}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"RMD","momentum":265.9334478361,"atr":4.805775,"price":295.8,"sector":"Health Care","shares":52,"position":15381.6},{"rank":2,"ticker":"PAYC","momentum":203.2735670234,"atr":10.54324,"price":496.26,"sector":"Information Technology","shares":23,"position":11413.98},{"rank":3,"ticker":"WST","momentum":171.8921624706,"atr":6.98494,"price":464.38,"sector":"Health Care","shares":35,"position":16253.3},{"rank":4,"ticker":"PKI","momentum":171.1344321423,"atr":3.861285,"price":190.5,"sector":"Health Care","shares":64,"position":12192.0},{"rank":5,"ticker":"WAT","momentum":168.9988584392,"atr":6.69816,"price":423.4,"sector":"Health Care","shares":37,"position":15665.8},{"rank":6,"ticker":"REGN","momentum":148.2851549546,"atr":17.359525,"price":679.57,"sector":"Health Care","shares":14,"position":9513.98},{"rank":7,"ticker":"SNPS","momentum":138.1900165435,"atr":5.91439,"price":336.64,"sector":"Information Technology","shares":42,"position":14138.88},{"rank":8,"ticker":"SBAC","momentum":92.228040118,"atr":6.05325,"price":366.48,"sector":"Real Estate","shares":41,"position":15025.68},{"rank":9,"ticker":"ROK","momentum":89.9795716599,"atr":4.45273,"price":324.0,"sector":"Industrials","shares":56,"position":18144.0},{"rank":10,"ticker":"TMO","momentum":88.3641700543,"atr":9.09554,"price":568.11,"sector":"Health Care","shares":27,"position":15338.97},{"rank":11,"ticker":"ZTS","momentum":84.6276496808,"atr":2.959295,"price":209.69,"sector":"Health Care","shares":84,"position":17613.96},{"rank":12,"ticker":"TROW","momentum":78.2093599923,"atr":3.51056,"price":218.57,"sector":"Financials","shares":71,"position":15518.47},{"rank":13,"ticker":"ZBRA","momentum":76.6663179414,"atr":9.358855,"price":590.6,"sector":"Information Technology","shares":26,"position":15355.6},{"rank":14,"ticker":"TECH","momentum":75.1741850266,"atr":11.547625,"price":513.09,"sector":"Health Care","shares":21,"position":10774.89},{"rank":15,"ticker":"OTIS","momentum":73.6432729996,"atr":1.12518,"price":91.82,"sector":"Industrials","shares":222,"position":20384.04},{"rank":16,"ticker":"TGT","momentum":68.1333606739,"atr":4.43424,"price":244.31,"sector":"Consumer Discretionary","shares":56,"position":13681.36},{"rank":17,"ticker":"PAYX","momentum":64.7538021707,"atr":1.341005,"price":113.6,"sector":"Information Technology","shares":186,"position":21129.6},{"rank":18,"ticker":"UDR","momentum":63.862190239,"atr":0.8895,"price":55.37,"sector":"Real Estate","shares":281,"position":15558.97},{"rank":19,"ticker":"PFE","momentum":62.8533694195,"atr":1.44573,"price":46.84,"sector":"Health Care","shares":172,"position":8056.48},{"rank":20,"ticker":"TRMB","momentum":60.4348589684,"atr":1.61617,"price":94.86,"sector":"Information Technology","shares":154,"position":14608.44},{"rank":21,"ticker":"PSA","momentum":60.1893014991,"atr":4.582715,"price":330.76,"sector":"Real Estate","shares":54,"position":17861.04},{"rank":22,"ticker":"SPGI","momentum":59.554245048,"atr":6.816195,"price":452.08,"sector":"Financials","shares":36,"position":16274.88},{"rank":23,"ticker":"PLD","momentum":55.7655583643,"atr":1.964875,"price":138.99,"sector":"Real Estate","shares":127,"position":17651.73},{"rank":24,"ticker":"XYL","momentum":50.9341721884,"atr":1.82575,"price":137.25,"sector":"Industrials","shares":136,"position":18666.0},{"rank":25,"ticker":"ORCL","momentum":49.7724654372,"atr":1.16164,"price":90.0,"sector":"Information Technology","shares":215,"position":19350.0},{"rank":26,"ticker":"PNR","momentum":46.484764751,"atr":1.3075,"price":77.87,"sector":"Industrials","shares":191,"position":14873.17},{"rank":27,"ticker":"ULTA","momentum":45.1356694036,"atr":10.60499,"price":382.11,"sector":"Consumer Discretionary","shares":23,"position":8788.53},{"rank":28,"ticker":"RSG","momentum":43.0507713533,"atr":1.3513,"price":125.47,"sector":"Industrials","shares":185,"position":23211.95},{"rank":29,"ticker":"TEL","momentum":33.7115318536,"atr":1.9979,"price":149.67,"sector":"Information Technology","shares":125,"position":18708.75},{"rank":30,"ticker":"ROP","momentum":32.8205534556,"atr":5.94075,"price":486.22,"sector":"Industrials","shares":42,"position":20421.24},{"rank":31,"ticker":"VRSK","momentum":31.2854874128,"atr":2.516015,"price":205.08,"sector":"Industrials","shares":99,"position":20302.92},{"rank":32,"ticker":"TT","momentum":30.0640802171,"atr":3.066115,"price":199.94,"sector":"Industrials","shares":81,"position":16195.14},{"rank":33,"ticker":"ORLY","momentum":29.5222988244,"atr":9.076995,"price":584.8,"sector":"Consumer Discretionary","shares":27,"position":15789.6},{"rank":34,"ticker":"QCOM","momentum":28.4651353389,"atr":2.58684,"price":144.63,"sector":"Information Technology","shares":96,"position":13884.48},{"rank":35,"ticker":"WM","momentum":26.8349888578,"atr":1.6196,"price":155.4,"sector":"Industrials","shares":154,"position":23931.6},{"rank":36,"ticker":"PEP","momentum":26.1071849308,"atr":1.60328,"price":157.09,"sector":"Consumer Staples","shares":155,"position":24348.95},{"rank":37,"ticker":"YUM","momentum":23.6198665677,"atr":1.514105,"price":130.92,"sector":"Consumer Discretionary","shares":165,"position":21601.8},{"rank":38,"ticker":"WAB","momentum":20.8596807239,"atr":1.662,"price":90.23,"sector":"Industrials","shares":150,"position":13534.5},{"rank":39,"ticker":"PYPL","momentum":20.1099698654,"atr":5.40343,"price":289.13,"sector":"Information Technology","shares":46,"position":13299.98},{"rank":40,"ticker":"PEAK","momentum":19.4134779198,"atr":0.5885,"price":36.35,"sector":"Real Estate","shares":424,"position":15412.4},{"rank":41,"ticker":"STE","momentum":18.0608015401,"atr":3.81875,"price":217.82,"sector":"Health Care","shares":65,"position":14158.3},{"rank":42,"ticker":"TDY","momentum":17.9100699639,"atr":7.364955,"price":448.81,"sector":"Industrials","shares":33,"position":14810.73},{"rank":43,"ticker":"TXT","momentum":16.9980055558,"atr":1.550325,"price":72.55,"sector":"Industrials","shares":161,"position":11680.55},{"rank":44,"ticker":"PG","momentum":15.2398594947,"atr":1.2645,"price":144.05,"sector":"Consumer Staples","shares":197,"position":28377.85},{"rank":45,"ticker":"SWKS","momentum":13.1930623517,"atr":3.10769,"price":183.01,"sector":"Information Technology","shares":80,"position":14640.8},{"rank":46,"ticker":"SHW","momentum":13.0938868258,"atr":4.25013,"price":307.43,"sector":"Materials","shares":58,"position":17830.94},{"rank":47,"ticker":"ROL","momentum":12.1083571437,"atr":0.63375,"price":39.71,"sector":"Industrials","shares":394,"position":15645.74},{"rank":48,"ticker":"SYK","momentum":12.0786416325,"atr":4.27525,"price":276.65,"sector":"Health Care","shares":58,"position":16045.7},{"rank":49,"ticker":"PM","momentum":11.7798558773,"atr":1.26825,"price":106.1,"sector":"Consumer Staples","shares":197,"position":20901.7},{"rank":50,"ticker":"O","momentum":11.4830767131,"atr":0.982145,"price":72.3,"sector":"Real Estate","shares":254,"position":18364.2},{"rank":51,"ticker":"SEE","momentum":11.3284198996,"atr":0.8816,"price":61.22,"sector":"Materials","shares":283,"position":17325.26},{"rank":52,"ticker":"WMT","momentum":10.8940111318,"atr":2.01371,"price":149.25,"sector":"Consumer Staples","shares":124,"position":18507.0},{"rank":53,"ticker":"OGN","momentum":10.5884361793,"atr":1.339635,"price":35.61,"sector":"Health Care","shares":186,"position":6623.46},{"rank":54,"ticker":"ODFL","momentum":10.2857264124,"atr":5.30438,"price":301.15,"sector":"Industrials","shares":47,"position":14154.05},{"rank":55,"ticker":"SYF","momentum":9.5730625958,"atr":1.23295,"price":47.38,"sector":"Financials","shares":202,"position":9570.76},{"rank":56,"ticker":"SBUX","momentum":6.3176599568,"atr":1.42675,"price":117.19,"sector":"Consumer Discretionary","shares":175,"position":20508.25},{"rank":57,"ticker":"STT","momentum":4.4860825519,"atr":1.78535,"price":92.89,"sector":"Financials","shares":140,"position":13004.6},{"rank":58,"ticker":"TXN","momentum":2.8519468365,"atr":2.84825,"price":189.88,"sector":"Information Technology","shares":87,"position":16519.56},{"rank":59,"ticker":"UNH","momentum":2.7746447618,"atr":5.915055,"price":422.86,"sector":"Health Care","shares":42,"position":17760.12},{"rank":60,"ticker":"TSCO","momentum":1.6460703824,"atr":4.044255,"price":198.8,"sector":"Consumer Discretionary","shares":61,"position":12126.8},{"rank":61,"ticker":"RJF","momentum":1.5130023208,"atr":2.60737,"price":139.04,"sector":"Financials","shares":95,"position":13208.8},{"rank":62,"ticker":"PEG","momentum":1.4007164469,"atr":0.82791,"price":64.14,"sector":"Utilities","shares":301,"position":19306.14},{"rank":63,"ticker":"UA","momentum":1.3676819309,"atr":0.63618,"price":20.28,"sector":"Consumer Discretionary","shares":392,"position":7949.76},{"rank":64,"ticker":"TJX","momentum":1.2481876972,"atr":1.672445,"price":71.07,"sector":"Consumer Discretionary","shares":149,"position":10589.43},{"rank":65,"ticker":"PWR","momentum":0.2634837602,"atr":2.81107,"price":116.0,"sector":"Industrials","shares":88,"position":10208.0},{"rank":66,"ticker":"SO","momentum":0.1129425286,"atr":0.76748,"price":66.27,"sector":"Utilities","shares":325,"position":21537.75},{"rank":67,"ticker":"UAA","momentum":0.0988654323,"atr":0.709945,"price":23.15,"sector":"Consumer Discretionary","shares":352,"position":8148.8},{"rank":68,"ticker":"WEC","momentum":0.002239252,"atr":1.232685,"price":96.08,"sector":"Utilities","shares":202,"position":19408.16},{"rank":69,"ticker":"PPL","momentum":0.0006474837,"atr":0.400025,"price":30.09,"sector":"Utilities","shares":624,"position":18776.16},{"rank":70,"ticker":"SCHW","momentum":-0.000742878,"atr":1.71518,"price":72.09,"sector":"Financials","shares":145,"position":10453.05},{"rank":71,"ticker":"TRV","momentum":-0.028248536,"atr":2.24775,"price":159.17,"sector":"Financials","shares":111,"position":17667.87},{"rank":72,"ticker":"SIVB","momentum":-0.2308722459,"atr":15.1927,"price":571.51,"sector":"Financials","shares":16,"position":9144.16},{"rank":73,"ticker":"UHS","momentum":-0.2820578309,"atr":3.041195,"price":156.22,"sector":"Health Care","shares":82,"position":12810.04},{"rank":74,"ticker":"TSN","momentum":-0.5164045943,"atr":1.492715,"price":78.23,"sector":"Consumer Staples","shares":167,"position":13064.41},{"rank":75,"ticker":"PKG","momentum":-0.6090174489,"atr":2.32598,"price":152.45,"sector":"Materials","shares":107,"position":16312.15},{"rank":76,"ticker":"VRSN","momentum":-0.8178811023,"atr":2.814415,"price":220.23,"sector":"Information Technology","shares":88,"position":19380.24},{"rank":77,"ticker":"PNC","momentum":-1.5930802907,"atr":3.552375,"price":191.52,"sector":"Financials","shares":70,"position":13406.4},{"rank":78,"ticker":"XEL","momentum":-1.8096467199,"atr":1.015665,"price":69.8,"sector":"Utilities","shares":246,"position":17170.8},{"rank":79,"ticker":"WY","momentum":-12.0245908169,"atr":0.696635,"price":36.64,"sector":"Real Estate","shares":358,"position":13117.12},{"rank":80,"ticker":"WBA","momentum":-20.8705648044,"atr":1.002555,"price":51.29,"sector":"Consumer Staples","shares":249,"position":12771.21}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"NDAQ","momentum":108.5713265052,"atr":1.2948816667,"price":58.57,"sector":"Financials","shares":193,"position":11304.01},{"rank":2,"ticker":"CAH","momentum":100.3569560554,"atr":1.565,"price":67.52,"sector":"Health Care","shares":159,"position":10735.68},{"rank":3,"ticker":"LW","momentum":88.0876847082,"atr":1.8315,"price":77.94,"sector":"Consumer Staples","shares":136,"position":10599.84},{"rank":4,"ticker":"FDS","momentum":87.0002188906,"atr":9.24897,"price":430.45,"sector":"Financials","shares":27,"position":11622.15},{"rank":5,"ticker":"BR","momentum":86.1622573951,"atr":3.4729,"price":159.96,"sector":"Information Technology","shares":71,"position":11357.16},{"rank":6,"ticker":"AES","momentum":85.5441939562,"atr":0.70688,"price":25.4,"sector":"Utilities","shares":353,"position":8966.2},{"rank":7,"ticker":"KEYS","momentum":83.9150297117,"atr":3.88584,"price":162.05,"sector":"Information Technology","shares":64,"position":10371.2},{"rank":8,"ticker":"GPC","momentum":74.9680930862,"atr":3.19691,"price":155.6,"sector":"Consumer Discretionary","shares":78,"position":12136.8},{"rank":9,"ticker":"PWR","momentum":74.4263759952,"atr":4.311,"price":136.53,"sector":"Industrials","shares":57,"position":7782.21},{"rank":10,"ticker":"NEE","momentum":74.318468849,"atr":2.01727,"price":83.97,"sector":"Utilities","shares":123,"position":10328.31},{"rank":11,"ticker":"SBUX","momentum":72.7617529798,"atr":2.48748,"price":88.6,"sector":"Consumer Discretionary","shares":100,"position":8860.0},{"rank":12,"ticker":"TT","momentum":69.280590662,"atr":4.1455,"price":151.93,"sector":"Industrials","shares":60,"position":9115.8},{"rank":13,"ticker":"IT","momentum":62.3392948775,"atr":8.005,"price":287.6,"sector":"Information Technology","shares":31,"position":8915.6},{"rank":14,"ticker":"AJG","momentum":61.2925347434,"atr":3.66466,"price":174.32,"sector":"Financials","shares":68,"position":11853.76},{"rank":15,"ticker":"ON","momentum":58.8847308025,"atr":3.11703,"price":68.34,"sector":"Information Technology","shares":80,"position":5467.2},{"rank":16,"ticker":"CDNS","momentum":54.7272875237,"atr":4.5435,"price":166.04,"sector":"Information Technology","shares":55,"position":9132.2},{"rank":17,"ticker":"MSI","momentum":54.6433080192,"atr":4.87025,"price":237.86,"sector":"Information Technology","shares":51,"position":12130.86},{"rank":18,"ticker":"ORLY","momentum":54.1430600703,"atr":14.29106,"price":695.425,"sector":"Consumer Discretionary","shares":17,"position":11822.22},{"rank":19,"ticker":"GWW","momentum":53.5849282046,"atr":12.421775,"price":516.75,"sector":"Industrials","shares":20,"position":10335.0},{"rank":20,"ticker":"MOH","momentum":49.960281827,"atr":10.069045,"price":331.92,"sector":"Health Care","shares":24,"position":7966.08},{"rank":21,"ticker":"XYL","momentum":49.5042418077,"atr":2.542,"price":93.38,"sector":"Industrials","shares":98,"position":9151.24},{"rank":22,"ticker":"ADP","momentum":43.3627384611,"atr":5.14532,"price":230.42,"sector":"Information Technology","shares":48,"position":11060.16},{"rank":23,"ticker":"RJF","momentum":42.8616956393,"atr":2.47429,"price":106.98,"sector":"Financials","shares":101,"position":10804.98},{"rank":24,"ticker":"VICI","momentum":40.4501929984,"atr":0.649535,"price":32.02,"sector":"Real Estate","shares":384,"position":12295.68},{"rank":25,"ticker":"HII","momentum":39.5455446222,"atr":4.90831,"price":232.58,"sector":"Industrials","shares":50,"position":11629.0},{"rank":26,"ticker":"RSG","momentum":35.2804347882,"atr":2.490275,"price":143.26,"sector":"Industrials","shares":100,"position":14326.0},{"rank":27,"ticker":"CI","momentum":34.2819978853,"atr":5.793315,"price":284.95,"sector":"Health Care","shares":43,"position":12252.85},{"rank":28,"ticker":"MCK","momentum":33.6216763828,"atr":8.537245,"price":345.47,"sector":"Health Care","shares":29,"position":10018.63},{"rank":29,"ticker":"IEX","momentum":33.5078921378,"atr":4.208915,"price":204.32,"sector":"Industrials","shares":59,"position":12054.88},{"rank":30,"ticker":"BF.B","momentum":32.1422003461,"atr":1.555145,"price":70.8,"sector":"Consumer Staples","shares":160,"position":11328.0},{"rank":31,"ticker":"AAPL","momentum":31.6967987277,"atr":4.53307,"price":153.72,"sector":"Information Technology","shares":55,"position":8454.6},{"rank":32,"ticker":"WM","momentum":31.1837933219,"atr":2.6724,"price":168.89,"sector":"Industrials","shares":93,"position":15706.77},{"rank":33,"ticker":"DHR","momentum":30.8611754164,"atr":7.7622,"price":268.48,"sector":"Health Care","shares":32,"position":8591.36},{"rank":34,"ticker":"GIS","momentum":30.0737450087,"atr":1.57726,"price":79.72,"sector":"Consumer Staples","shares":158,"position":12595.76},{"rank":35,"ticker":"CBOE","momentum":29.385533346,"atr":2.78125,"price":118.07,"sector":"Financials","shares":89,"position":10508.23},{"rank":36,"ticker":"CTAS","momentum":29.3083559548,"atr":9.383735,"price":399.84,"sector":"Industrials","shares":26,"position":10395.84},{"rank":37,"ticker":"TMUS","momentum":28.6421236579,"atr":3.665725,"price":136.77,"sector":"Communication Services","shares":68,"position":9300.36},{"rank":38,"ticker":"CDAY","momentum":26.2393603269,"atr":2.22775,"price":57.34,"sector":"Information Technology","shares":112,"position":6422.08},{"rank":39,"ticker":"SCHW","momentum":25.4684909535,"atr":1.947115,"price":72.91,"sector":"Financials","shares":128,"position":9332.48},{"rank":40,"ticker":"KDP","momentum":24.8923250236,"atr":0.72895,"price":37.16,"sector":"Consumer Staples","shares":342,"position":12708.72},{"rank":41,"ticker":"NDSN","momentum":21.4035238744,"atr":5.011875,"price":218.91,"sector":"Industrials","shares":49,"position":10726.59},{"rank":42,"ticker":"PGR","momentum":21.0637005617,"atr":2.603805,"price":121.36,"sector":"Financials","shares":96,"position":11650.56},{"rank":43,"ticker":"FISV","momentum":20.6091484626,"atr":2.48145,"price":99.59,"sector":"Information Technology","shares":100,"position":9959.0},{"rank":44,"ticker":"SJM","momentum":20.2883371651,"atr":2.627745,"price":140.51,"sector":"Consumer Staples","shares":95,"position":13348.45},{"rank":45,"ticker":"UNH","momentum":18.9374162531,"atr":10.99275,"price":512.08,"sector":"Health Care","shares":22,"position":11265.76},{"rank":46,"ticker":"APH","momentum":18.6615346114,"atr":1.52041,"price":71.81,"sector":"Information Technology","shares":164,"position":11776.84},{"rank":47,"ticker":"FTV","momentum":17.8447898659,"atr":1.477195,"price":62.22,"sector":"Industrials","shares":169,"position":10515.18},{"rank":48,"ticker":"VRTX","momentum":17.3871739453,"atr":7.74853,"price":280.4,"sector":"Health Care","shares":32,"position":8972.8},{"rank":49,"ticker":"DG","momentum":17.380564253,"atr":5.437,"price":240.28,"sector":"Consumer Discretionary","shares":45,"position":10812.6},{"rank":50,"ticker":"MTB","momentum":17.263063127,"atr":4.65604,"price":185.64,"sector":"Financials","shares":53,"position":9838.92},{"rank":51,"ticker":"TJX","momentum":17.2224754071,"atr":1.7783,"price":62.96,"sector":"Consumer Discretionary","shares":140,"position":8814.4},{"rank":52,"ticker":"GS","momentum":16.7757936921,"atr":8.212,"price":320.71,"sector":"Financials","shares":30,"position":9621.3},{"rank":53,"ticker":"MS","momentum":15.6295888642,"atr":2.433745,"price":86.36,"sector":"Financials","shares":102,"position":8808.72},{"rank":54,"ticker":"A","momentum":15.5037712408,"atr":3.3777,"price":126.48,"sector":"Health Care","shares":74,"position":9359.52},{"rank":55,"ticker":"CMI","momentum":14.3448497548,"atr":4.673995,"price":210.76,"sector":"Industrials","shares":53,"position":11170.28},{"rank":56,"ticker":"CVS","momentum":13.7790745265,"atr":2.009315,"price":99.77,"sector":"Health Care","shares":124,"position":12371.48},{"rank":57,"ticker":"HSY","momentum":13.6370402552,"atr":3.892555,"price":223.41,"sector":"Consumer Staples","shares":64,"position":14298.24},{"rank":58,"ticker":"PFG","momentum":13.1415820266,"atr":1.72694,"price":76.06,"sector":"Financials","shares":144,"position":10952.64},{"rank":59,"ticker":"SO","momentum":13.1049052811,"atr":1.50344,"price":76.13,"sector":"Utilities","shares":166,"position":12637.58},{"rank":60,"ticker":"GM","momentum":11.9811235882,"atr":1.446745,"price":37.68,"sector":"Consumer Discretionary","shares":172,"position":6480.96},{"rank":61,"ticker":"AFL","momentum":11.2848624152,"atr":1.19625,"price":59.79,"sector":"Financials","shares":208,"position":12436.32},{"rank":62,"ticker":"WMT","momentum":10.8821210308,"atr":2.5737,"price":134.77,"sector":"Consumer Staples","shares":97,"position":13072.69},{"rank":63,"ticker":"GL","momentum":10.8699957389,"atr":1.87525,"price":103.74,"sector":"Financials","shares":133,"position":13797.42},{"rank":64,"ticker":"RF","momentum":10.6999194334,"atr":0.60338,"price":21.87,"sector":"Financials","shares":414,"position":9054.18},{"rank":65,"ticker":"DRI","momentum":10.3960120024,"atr":3.600645,"price":131.28,"sector":"Consumer Discretionary","shares":69,"position":9058.32},{"rank":66,"ticker":"SRE","momentum":9.1756244091,"atr":3.76791,"price":166.26,"sector":"Utilities","shares":66,"position":10973.16},{"rank":67,"ticker":"ULTA","momentum":8.9362305834,"atr":12.269245,"price":410.82,"sector":"Consumer Discretionary","shares":20,"position":8216.4},{"rank":68,"ticker":"CTXS","momentum":8.8272248183,"atr":0.43975,"price":103.75,"sector":"Information Technology","shares":568,"position":58930.0},{"rank":69,"ticker":"CF","momentum":8.2734459889,"atr":4.73776,"price":101.7,"sector":"Materials","shares":52,"position":5288.4},{"rank":70,"ticker":"K","momentum":8.2512882919,"atr":1.393875,"price":72.91,"sector":"Consumer Staples","shares":179,"position":13050.89},{"rank":71,"ticker":"BSX","momentum":8.0897572735,"atr":0.94225,"price":39.76,"sector":"Health Care","shares":265,"position":10536.4},{"rank":72,"ticker":"NOC","momentum":7.8625316308,"atr":11.10432,"price":492.87,"sector":"Industrials","shares":22,"position":10843.14},{"rank":73,"ticker":"AMP","momentum":6.105839956,"atr":7.10736,"price":269.87,"sector":"Financials","shares":35,"position":9445.45},{"rank":74,"ticker":"CNP","momentum":6.0689156524,"atr":0.64191,"price":31.95,"sector":"Utilities","shares":389,"position":12428.55},{"rank":75,"ticker":"HBAN","momentum":5.829787767,"atr":0.411245,"price":13.72,"sector":"Financials","shares":607,"position":8328.04},{"rank":76,"ticker":"ZION","momentum":5.638380259,"atr":1.498495,"price":57.1,"sector":"Financials","shares":166,"position":9478.6},{"rank":77,"ticker":"CAG","momentum":4.9288516755,"atr":0.66575,"price":34.32,"sector":"Consumer Staples","shares":375,"position":12870.0},{"rank":78,"ticker":"CPB","momentum":4.3294905928,"atr":1.1415,"price":48.53,"sector":"Consumer Staples","shares":219,"position":10628.07},{"rank":79,"ticker":"GD","momentum":3.4238491734,"atr":4.804945,"price":228.2,"sector":"Industrials","shares":52,"position":11866.4},{"rank":80,"ticker":"LNT","momentum":3.4065857117,"atr":1.267155,"price":60.29,"sector":"Utilities","shares":197,"position":11877.13},{"rank":81,"ticker":"ED","momentum":2.8681842127,"atr":1.982165,"price":96.24,"sector":"Utilities","shares":126,"position":12126.24},{"rank":82,"ticker":"SNA","momentum":2.8403232601,"atr":4.85175,"price":215.79,"sector":"Industrials","shares":51,"position":11005.29},{"rank":83,"ticker":"CTVA","momentum":2.2646629008,"atr":1.59355,"price":59.23,"sector":"Materials","shares":156,"position":9239.88},{"rank":84,"ticker":"ROL","momentum":2.2036275873,"atr":0.76395,"price":35.5,"sector":"Industrials","shares":327,"position":11608.5},{"rank":85,"ticker":"GILD","momentum":1.3507757745,"atr":1.47558,"price":63.5,"sector":"Health Care","shares":169,"position":10731.5},{"rank":86,"ticker":"MET","momentum":0.9066749272,"atr":1.513255,"price":64.52,"sector":"Financials","shares":165,"position":10645.8},{"rank":87,"ticker":"ADM","momentum":0.5396814598,"atr":2.49075,"price":86.0,"sector":"Consumer Staples","shares":100,"position":8600.0},{"rank":88,"ticker":"COP","momentum":0.0620554561,"atr":3.61675,"price":111.09,"sector":"Energy","shares":69,"position":7665.21},{"rank":89,"ticker":"FE","momentum":-0.0014882793,"atr":0.885945,"price":41.0,"sector":"Utilities","shares":282,"position":11562.0},{"rank":90,"ticker":"NRG","momentum":-0.1705977182,"atr":1.00946,"price":42.17,"sector":"Utilities","shares":247,"position":10415.99},{"rank":91,"ticker":"ALL","momentum":-0.4640097243,"atr":2.93975,"price":127.85,"sector":"Financials","shares":85,"position":10867.25}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

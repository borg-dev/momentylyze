<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CEG","momentum":62.6492205749,"atr":3.105825,"price":59.28,"sector":"Utilities","shares":80,"position":4742.4},{"rank":2,"ticker":"XOM","momentum":57.6198407634,"atr":3.544265,"price":86.9,"sector":"Energy","shares":70,"position":6083.0},{"rank":3,"ticker":"MRK","momentum":57.3179516608,"atr":1.99825,"price":93.13,"sector":"Health Care","shares":125,"position":11641.25},{"rank":4,"ticker":"T","momentum":54.6824198535,"atr":0.47517,"price":20.99,"sector":"Communication Services","shares":526,"position":11040.74},{"rank":5,"ticker":"LLY","momentum":47.3687789272,"atr":9.67875,"price":325.62,"sector":"Health Care","shares":25,"position":8140.5},{"rank":6,"ticker":"MNST","momentum":33.5031304817,"atr":2.37035,"price":94.58,"sector":"Consumer Staples","shares":105,"position":9930.9},{"rank":7,"ticker":"MCK","momentum":33.4494077327,"atr":8.17525,"price":321.55,"sector":"Health Care","shares":30,"position":9646.5},{"rank":8,"ticker":"WRB","momentum":32.0380410626,"atr":1.533255,"price":68.03,"sector":"Financials","shares":163,"position":11088.89},{"rank":9,"ticker":"IBM","momentum":27.6699948409,"atr":2.92744,"price":142.06,"sector":"Information Technology","shares":85,"position":12075.1},{"rank":10,"ticker":"CI","momentum":27.2446623731,"atr":7.498625,"price":265.13,"sector":"Health Care","shares":33,"position":8749.29},{"rank":11,"ticker":"AMCR","momentum":26.4145717488,"atr":0.310385,"price":12.41,"sector":"Materials","shares":805,"position":9990.05},{"rank":12,"ticker":"BMY","momentum":26.1308477429,"atr":1.507005,"price":78.96,"sector":"Health Care","shares":165,"position":13028.4},{"rank":13,"ticker":"K","momentum":20.7413731663,"atr":1.6742,"price":70.72,"sector":"Consumer Staples","shares":149,"position":10537.28},{"rank":14,"ticker":"STZ","momentum":19.5827821911,"atr":5.21149,"price":245.5,"sector":"Consumer Staples","shares":47,"position":11538.5},{"rank":15,"ticker":"GPC","momentum":18.474581524,"atr":3.126655,"price":136.75,"sector":"Consumer Discretionary","shares":79,"position":10803.25},{"rank":16,"ticker":"VRTX","momentum":14.5098537413,"atr":8.91237,"price":292.55,"sector":"Health Care","shares":28,"position":8191.4},{"rank":17,"ticker":"VICI","momentum":13.5866978224,"atr":1.06652,"price":30.32,"sector":"Real Estate","shares":234,"position":7094.88},{"rank":18,"ticker":"CPB","momentum":13.2159287889,"atr":1.30125,"price":48.44,"sector":"Consumer Staples","shares":192,"position":9300.48},{"rank":19,"ticker":"NOC","momentum":12.0877263365,"atr":13.018385,"price":463.7,"sector":"Industrials","shares":19,"position":8810.3},{"rank":20,"ticker":"DG","momentum":10.2227605054,"atr":7.551225,"price":247.9,"sector":"Consumer Discretionary","shares":33,"position":8180.7},{"rank":21,"ticker":"ED","momentum":9.8611656722,"atr":2.265435,"price":92.93,"sector":"Utilities","shares":110,"position":10222.3},{"rank":22,"ticker":"AMGN","momentum":8.2153822791,"atr":5.141885,"price":245.37,"sector":"Health Care","shares":48,"position":11777.76},{"rank":23,"ticker":"PGR","momentum":7.5429161449,"atr":2.89925,"price":115.99,"sector":"Financials","shares":86,"position":9975.14},{"rank":24,"ticker":"TMUS","momentum":5.0621011476,"atr":3.59647,"price":137.08,"sector":"Communication Services","shares":69,"position":9458.52},{"rank":25,"ticker":"AZO","momentum":4.6260390381,"atr":53.94197,"price":2158.91,"sector":"Consumer Discretionary","shares":4,"position":8635.64},{"rank":26,"ticker":"HII","momentum":4.3387543103,"atr":5.24547,"price":215.34,"sector":"Industrials","shares":47,"position":10120.98},{"rank":27,"ticker":"CHRW","momentum":4.1648212902,"atr":3.401865,"price":103.86,"sector":"Industrials","shares":73,"position":7581.78},{"rank":28,"ticker":"AMT","momentum":4.0003797635,"atr":8.8735,"price":261.65,"sector":"Real Estate","shares":28,"position":7326.2},{"rank":29,"ticker":"TAP","momentum":3.8881919758,"atr":1.523,"price":55.77,"sector":"Consumer Staples","shares":164,"position":9146.28},{"rank":30,"ticker":"JNJ","momentum":3.7810941202,"atr":3.519925,"price":182.29,"sector":"Health Care","shares":71,"position":12942.59},{"rank":31,"ticker":"GIS","momentum":2.7517814818,"atr":1.47987,"price":70.63,"sector":"Consumer Staples","shares":168,"position":11865.84},{"rank":32,"ticker":"ULTA","momentum":2.5503744313,"atr":16.769395,"price":410.54,"sector":"Consumer Discretionary","shares":14,"position":5747.56},{"rank":33,"ticker":"ROL","momentum":2.4810832304,"atr":0.884255,"price":35.11,"sector":"Industrials","shares":282,"position":9901.02},{"rank":34,"ticker":"RSG","momentum":1.8870913984,"atr":2.8087,"price":129.9,"sector":"Industrials","shares":89,"position":11561.1},{"rank":35,"ticker":"GILD","momentum":1.5478154897,"atr":1.439005,"price":63.08,"sector":"Health Care","shares":173,"position":10912.84},{"rank":36,"ticker":"APD","momentum":1.4143116114,"atr":7.14395,"price":252.08,"sector":"Materials","shares":34,"position":8570.72},{"rank":37,"ticker":"EA","momentum":1.3410133364,"atr":2.97575,"price":130.2,"sector":"Communication Services","shares":84,"position":10936.8},{"rank":38,"ticker":"HSY","momentum":1.2149137693,"atr":4.58874,"price":220.96,"sector":"Consumer Staples","shares":54,"position":11931.84},{"rank":39,"ticker":"KMB","momentum":1.1629725952,"atr":2.9201,"price":134.46,"sector":"Consumer Staples","shares":85,"position":11429.1},{"rank":40,"ticker":"PWR","momentum":1.0850997646,"atr":5.44807,"price":125.98,"sector":"Industrials","shares":45,"position":5669.1},{"rank":41,"ticker":"PM","momentum":0.6650932591,"atr":2.496555,"price":103.4,"sector":"Consumer Staples","shares":100,"position":10340.0},{"rank":42,"ticker":"KO","momentum":0.5164172348,"atr":1.343905,"price":63.04,"sector":"Consumer Staples","shares":186,"position":11725.44},{"rank":43,"ticker":"WAT","momentum":0.2565195482,"atr":10.26698,"price":328.58,"sector":"Health Care","shares":24,"position":7885.92},{"rank":44,"ticker":"INCY","momentum":0.2319919628,"atr":2.23075,"price":78.19,"sector":"Health Care","shares":112,"position":8757.28},{"rank":45,"ticker":"PFE","momentum":0.2151016727,"atr":1.492835,"price":51.59,"sector":"Health Care","shares":167,"position":8615.53},{"rank":46,"ticker":"ADP","momentum":0.142976411,"atr":5.652875,"price":218.79,"sector":"Information Technology","shares":44,"position":9626.76},{"rank":47,"ticker":"BF.B","momentum":0.1219253961,"atr":1.77808,"price":71.51,"sector":"Consumer Staples","shares":140,"position":10011.4},{"rank":48,"ticker":"CTLT","momentum":0.1121852709,"atr":3.77559,"price":109.61,"sector":"Health Care","shares":66,"position":7234.26},{"rank":49,"ticker":"CL","momentum":0.0409303752,"atr":1.609145,"price":80.38,"sector":"Consumer Staples","shares":155,"position":12458.9},{"rank":50,"ticker":"MCD","momentum":0.0389760336,"atr":4.63944,"price":247.9,"sector":"Consumer Discretionary","shares":53,"position":13138.7},{"rank":51,"ticker":"DGX","momentum":-0.0000000143,"atr":3.4459,"price":140.31,"sector":"Health Care","shares":72,"position":10102.32},{"rank":52,"ticker":"O","momentum":-0.0000049957,"atr":1.61275,"price":69.19,"sector":"Real Estate","shares":155,"position":10724.45},{"rank":53,"ticker":"CDNS","momentum":-0.0122451428,"atr":5.90656,"price":157.62,"sector":"Information Technology","shares":42,"position":6620.04},{"rank":54,"ticker":"AJG","momentum":-0.0128234,"atr":4.31455,"price":165.25,"sector":"Financials","shares":57,"position":9419.25},{"rank":55,"ticker":"SYY","momentum":-0.0377112136,"atr":2.249735,"price":85.57,"sector":"Consumer Staples","shares":111,"position":9498.27},{"rank":56,"ticker":"SNPS","momentum":-0.0469562843,"atr":11.22614,"price":317.47,"sector":"Information Technology","shares":22,"position":6984.34},{"rank":57,"ticker":"OGN","momentum":-0.0790172188,"atr":1.08475,"price":35.86,"sector":"Health Care","shares":230,"position":8247.8},{"rank":58,"ticker":"MMC","momentum":-0.1351799715,"atr":4.067,"price":158.83,"sector":"Financials","shares":61,"position":9688.63},{"rank":59,"ticker":"CAG","momentum":-0.3693622512,"atr":0.8062,"price":34.1,"sector":"Consumer Staples","shares":310,"position":10571.0},{"rank":60,"ticker":"DLR","momentum":-0.8355085313,"atr":3.91375,"price":138.8,"sector":"Real Estate","shares":63,"position":8744.4},{"rank":61,"ticker":"ABBV","momentum":-1.0008770185,"atr":3.50685,"price":152.34,"sector":"Health Care","shares":71,"position":10816.14},{"rank":62,"ticker":"DRE","momentum":-1.2904272564,"atr":1.7905,"price":57.45,"sector":"Real Estate","shares":139,"position":7985.55},{"rank":63,"ticker":"NEE","momentum":-4.4817172075,"atr":2.4283,"price":78.02,"sector":"Utilities","shares":102,"position":7958.04},{"rank":64,"ticker":"CBOE","momentum":-9.9451860086,"atr":2.38673,"price":114.94,"sector":"Financials","shares":104,"position":11953.76},{"rank":65,"ticker":"EL","momentum":-25.0026815999,"atr":10.083125,"price":270.2,"sector":"Consumer Staples","shares":24,"position":6484.8}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

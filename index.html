<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":76.8644952144,"atr":2.4935,"price":96.8,"sector":"Consumer Staples","shares":100,"position":9680.0},{"rank":2,"ticker":"T","momentum":58.3852255811,"atr":0.492925,"price":20.45,"sector":"Communication Services","shares":507,"position":10368.15},{"rank":3,"ticker":"MRK","momentum":44.8436106791,"atr":2.040865,"price":93.77,"sector":"Health Care","shares":122,"position":11439.94},{"rank":4,"ticker":"LLY","momentum":33.0063155403,"atr":8.14337,"price":322.46,"sector":"Health Care","shares":30,"position":9673.8},{"rank":5,"ticker":"K","momentum":32.1982427774,"atr":1.572635,"price":73.89,"sector":"Consumer Staples","shares":158,"position":11674.62},{"rank":6,"ticker":"AMCR","momentum":26.2949945252,"atr":0.31275,"price":12.38,"sector":"Materials","shares":799,"position":9891.62},{"rank":7,"ticker":"IBM","momentum":25.772633263,"atr":2.873835,"price":137.18,"sector":"Information Technology","shares":86,"position":11797.48},{"rank":8,"ticker":"CI","momentum":24.5823750786,"atr":7.36922,"price":273.75,"sector":"Health Care","shares":33,"position":9033.75},{"rank":9,"ticker":"VICI","momentum":22.8412068713,"atr":0.880635,"price":31.6,"sector":"Real Estate","shares":283,"position":8942.8},{"rank":10,"ticker":"CPB","momentum":17.9754583419,"atr":1.02477,"price":49.46,"sector":"Consumer Staples","shares":243,"position":12018.78},{"rank":11,"ticker":"GPC","momentum":15.7227341686,"atr":2.938975,"price":137.3,"sector":"Consumer Discretionary","shares":85,"position":11670.5},{"rank":12,"ticker":"MCK","momentum":12.6463789803,"atr":8.122085,"price":325.18,"sector":"Health Care","shares":30,"position":9755.4},{"rank":13,"ticker":"GIS","momentum":12.5498262273,"atr":1.609155,"price":76.43,"sector":"Consumer Staples","shares":155,"position":11846.65},{"rank":14,"ticker":"VRTX","momentum":11.120953506,"atr":8.56416,"price":288.73,"sector":"Health Care","shares":29,"position":8373.17},{"rank":15,"ticker":"BMY","momentum":9.8027637875,"atr":1.45558,"price":74.53,"sector":"Health Care","shares":171,"position":12744.63},{"rank":16,"ticker":"CEG","momentum":8.2322454482,"atr":2.69175,"price":59.82,"sector":"Utilities","shares":92,"position":5503.44},{"rank":17,"ticker":"KMB","momentum":7.7797763969,"atr":2.66271,"price":136.05,"sector":"Consumer Staples","shares":93,"position":12652.65},{"rank":18,"ticker":"TMUS","momentum":7.4148014715,"atr":3.5519,"price":134.92,"sector":"Communication Services","shares":70,"position":9444.4},{"rank":19,"ticker":"PGR","momentum":5.1392397206,"atr":3.07725,"price":117.42,"sector":"Financials","shares":81,"position":9511.02},{"rank":20,"ticker":"NOC","momentum":4.9082253509,"atr":13.428515,"price":465.2,"sector":"Industrials","shares":18,"position":8373.6},{"rank":21,"ticker":"STZ","momentum":4.8409309677,"atr":5.749985,"price":244.98,"sector":"Consumer Staples","shares":43,"position":10534.14},{"rank":22,"ticker":"DG","momentum":4.5657884435,"atr":5.622475,"price":246.63,"sector":"Consumer Discretionary","shares":44,"position":10851.72},{"rank":23,"ticker":"GILD","momentum":3.8303311172,"atr":1.222035,"price":62.46,"sector":"Health Care","shares":204,"position":12741.84},{"rank":24,"ticker":"AZO","momentum":3.6183479332,"atr":54.844985,"price":2174.89,"sector":"Consumer Discretionary","shares":4,"position":8699.56},{"rank":25,"ticker":"WAT","momentum":3.5155129621,"atr":8.41573,"price":336.44,"sector":"Health Care","shares":29,"position":9756.76},{"rank":26,"ticker":"BF.B","momentum":3.462875793,"atr":1.491485,"price":70.93,"sector":"Consumer Staples","shares":167,"position":11845.31},{"rank":27,"ticker":"TAP","momentum":2.7749792057,"atr":1.504475,"price":58.25,"sector":"Consumer Staples","shares":166,"position":9669.5},{"rank":28,"ticker":"MCD","momentum":1.8858472896,"atr":4.652345,"price":252.67,"sector":"Consumer Discretionary","shares":53,"position":13391.51},{"rank":29,"ticker":"CL","momentum":1.3947089498,"atr":1.668875,"price":78.43,"sector":"Consumer Staples","shares":149,"position":11686.07},{"rank":30,"ticker":"AMT","momentum":1.3882525725,"atr":7.59275,"price":255.92,"sector":"Real Estate","shares":32,"position":8189.44},{"rank":31,"ticker":"AMGN","momentum":1.2281371901,"atr":4.427365,"price":247.09,"sector":"Health Care","shares":56,"position":13837.04},{"rank":32,"ticker":"ROL","momentum":0.8878606667,"atr":0.854155,"price":35.33,"sector":"Industrials","shares":292,"position":10316.36},{"rank":33,"ticker":"CTLT","momentum":0.8559700059,"atr":3.56064,"price":103.69,"sector":"Health Care","shares":70,"position":7258.3},{"rank":34,"ticker":"SYY","momentum":0.6225166293,"atr":2.060245,"price":86.27,"sector":"Consumer Staples","shares":121,"position":10438.67},{"rank":35,"ticker":"CAG","momentum":0.1953368887,"atr":0.722795,"price":35.74,"sector":"Consumer Staples","shares":345,"position":12330.3},{"rank":36,"ticker":"WEC","momentum":0.1881743908,"atr":2.406695,"price":100.13,"sector":"Utilities","shares":103,"position":10313.39},{"rank":37,"ticker":"HSY","momentum":0.0462526409,"atr":4.452295,"price":219.78,"sector":"Consumer Staples","shares":56,"position":12307.68},{"rank":38,"ticker":"PEP","momentum":0.0403273795,"atr":3.26537,"price":170.1,"sector":"Consumer Staples","shares":76,"position":12927.6},{"rank":39,"ticker":"PFE","momentum":-0.0007440571,"atr":1.36766,"price":51.79,"sector":"Health Care","shares":182,"position":9425.78},{"rank":40,"ticker":"PWR","momentum":-0.0192269595,"atr":5.20107,"price":127.9,"sector":"Industrials","shares":48,"position":6139.2},{"rank":41,"ticker":"INCY","momentum":-0.021581567,"atr":2.209495,"price":79.41,"sector":"Health Care","shares":113,"position":8973.33},{"rank":42,"ticker":"CDNS","momentum":-0.1960787005,"atr":5.29875,"price":153.34,"sector":"Information Technology","shares":47,"position":7206.98},{"rank":43,"ticker":"CBOE","momentum":-0.3487174095,"atr":2.61833,"price":118.11,"sector":"Financials","shares":95,"position":11220.45},{"rank":44,"ticker":"UNH","momentum":-0.4744282654,"atr":14.561955,"price":501.24,"sector":"Health Care","shares":17,"position":8521.08},{"rank":45,"ticker":"CNC","momentum":-0.8427725256,"atr":2.489285,"price":85.19,"sector":"Health Care","shares":100,"position":8519.0},{"rank":46,"ticker":"AJG","momentum":-1.0372866985,"atr":3.72875,"price":164.66,"sector":"Financials","shares":67,"position":11032.22},{"rank":47,"ticker":"DRE","momentum":-1.3147458621,"atr":1.7745,"price":56.88,"sector":"Real Estate","shares":140,"position":7963.2},{"rank":48,"ticker":"SJM","momentum":-1.6618582842,"atr":2.99717,"price":134.64,"sector":"Consumer Staples","shares":83,"position":11175.12},{"rank":49,"ticker":"NEE","momentum":-4.7567162899,"atr":2.278845,"price":80.26,"sector":"Utilities","shares":109,"position":8748.34},{"rank":50,"ticker":"PHM","momentum":-6.1978800894,"atr":1.820315,"price":44.33,"sector":"Consumer Discretionary","shares":137,"position":6073.21},{"rank":51,"ticker":"ORLY","momentum":-11.0620229801,"atr":15.002995,"price":667.16,"sector":"Consumer Discretionary","shares":16,"position":10674.56},{"rank":52,"ticker":"CHD","momentum":-12.7683785618,"atr":2.16321,"price":96.05,"sector":"Consumer Staples","shares":115,"position":11045.75}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

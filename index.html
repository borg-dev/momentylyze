<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"BALL","momentum":891.356643245,"atr":0.1,"price":71.21,"sector":"Materials","shares":2500,"position":178025.0},{"rank":2,"ticker":"CF","momentum":258.4506374216,"atr":6.2667,"price":101.61,"sector":"Materials","shares":39,"position":3962.79},{"rank":3,"ticker":"CTRA","momentum":215.7402253227,"atr":1.60956,"price":30.69,"sector":"Energy","shares":155,"position":4756.95},{"rank":4,"ticker":"VLO","momentum":208.6136711161,"atr":5.826245,"price":124.68,"sector":"Energy","shares":42,"position":5236.56},{"rank":5,"ticker":"MCK","momentum":129.1345471457,"atr":10.26915,"price":320.65,"sector":"Health Care","shares":24,"position":7695.6},{"rank":6,"ticker":"CEG","momentum":122.9166389885,"atr":2.926565,"price":57.28,"sector":"Utilities","shares":85,"position":4868.8},{"rank":7,"ticker":"CVX","momentum":110.0546205947,"atr":6.25425,"price":168.06,"sector":"Energy","shares":39,"position":6554.34},{"rank":8,"ticker":"DVN","momentum":108.8576501753,"atr":3.94949,"price":69.92,"sector":"Energy","shares":63,"position":4404.96},{"rank":9,"ticker":"MPC","momentum":104.1200530144,"atr":3.85125,"price":96.21,"sector":"Energy","shares":64,"position":6157.44},{"rank":10,"ticker":"ADM","momentum":98.8918552152,"atr":3.32431,"price":84.54,"sector":"Consumer Staples","shares":75,"position":6340.5},{"rank":11,"ticker":"SRE","momentum":88.940339144,"atr":3.881655,"price":162.78,"sector":"Utilities","shares":64,"position":10417.92},{"rank":12,"ticker":"HAL","momentum":86.6999497855,"atr":1.97427,"price":36.0,"sector":"Energy","shares":126,"position":4536.0},{"rank":13,"ticker":"AIZ","momentum":86.1919661618,"atr":4.7175,"price":186.85,"sector":"Financials","shares":52,"position":9716.2},{"rank":14,"ticker":"WMB","momentum":84.4356680546,"atr":1.20475,"price":35.23,"sector":"Energy","shares":207,"position":7292.61},{"rank":15,"ticker":"WRB","momentum":82.3436817737,"atr":1.77771,"price":67.91,"sector":"Financials","shares":140,"position":9507.4},{"rank":16,"ticker":"BMY","momentum":82.1294752104,"atr":1.673,"price":77.02,"sector":"Health Care","shares":149,"position":11475.98},{"rank":17,"ticker":"LLY","momentum":81.6363893878,"atr":9.53878,"price":295.19,"sector":"Health Care","shares":26,"position":7674.94},{"rank":18,"ticker":"IRM","momentum":75.6358242716,"atr":1.77274,"price":51.02,"sector":"Real Estate","shares":141,"position":7193.82},{"rank":19,"ticker":"CTVA","momentum":70.312865645,"atr":1.923305,"price":57.09,"sector":"Materials","shares":129,"position":7364.61},{"rank":20,"ticker":"EXC","momentum":66.2292802929,"atr":1.252635,"price":47.13,"sector":"Utilities","shares":199,"position":9378.87},{"rank":21,"ticker":"ABC","momentum":62.3640840127,"atr":5.0284,"price":151.11,"sector":"Health Care","shares":49,"position":7404.39},{"rank":22,"ticker":"XOM","momentum":60.5167405152,"atr":3.43975,"price":90.65,"sector":"Energy","shares":72,"position":6526.8},{"rank":23,"ticker":"BKR","momentum":60.4133029819,"atr":1.70808,"price":34.64,"sector":"Energy","shares":146,"position":5057.44},{"rank":24,"ticker":"KHC","momentum":58.4405271768,"atr":1.31208,"price":39.04,"sector":"Consumer Staples","shares":190,"position":7417.6},{"rank":25,"ticker":"PXD","momentum":57.72278283,"atr":11.814795,"price":271.08,"sector":"Energy","shares":21,"position":5692.68},{"rank":26,"ticker":"LMT","momentum":53.0425189524,"atr":10.88898,"price":434.33,"sector":"Industrials","shares":22,"position":9555.26},{"rank":27,"ticker":"ED","momentum":52.0735598861,"atr":2.287295,"price":95.22,"sector":"Utilities","shares":109,"position":10378.98},{"rank":28,"ticker":"NOC","momentum":49.954359121,"atr":12.44925,"price":454.87,"sector":"Industrials","shares":20,"position":9097.4},{"rank":29,"ticker":"CNP","momentum":49.1320525538,"atr":0.7535,"price":30.67,"sector":"Utilities","shares":331,"position":10151.77},{"rank":30,"ticker":"PKG","momentum":46.4855259023,"atr":4.20488,"price":151.02,"sector":"Materials","shares":59,"position":8910.18},{"rank":31,"ticker":"COP","momentum":45.8606145481,"atr":5.07886,"price":104.48,"sector":"Energy","shares":49,"position":5119.52},{"rank":32,"ticker":"DOW","momentum":44.0603700713,"atr":2.183045,"price":68.91,"sector":"Materials","shares":114,"position":7855.74},{"rank":33,"ticker":"LDOS","momentum":43.9368279113,"atr":2.51395,"price":101.69,"sector":"Industrials","shares":99,"position":10067.31},{"rank":34,"ticker":"ANTM","momentum":43.2893244278,"atr":14.80025,"price":476.39,"sector":"Health Care","shares":16,"position":7622.24},{"rank":35,"ticker":"AEP","momentum":43.0089786797,"atr":2.519495,"price":99.88,"sector":"Utilities","shares":99,"position":9888.12},{"rank":36,"ticker":"DTE","momentum":37.5823799138,"atr":2.912995,"price":128.31,"sector":"Utilities","shares":85,"position":10906.35},{"rank":37,"ticker":"HST","momentum":36.8164824441,"atr":0.917815,"price":19.77,"sector":"Real Estate","shares":272,"position":5377.44},{"rank":38,"ticker":"ABBV","momentum":36.3335840433,"atr":4.64236,"price":152.43,"sector":"Health Care","shares":53,"position":8078.79},{"rank":39,"ticker":"TMUS","momentum":36.3016888743,"atr":4.539245,"price":125.24,"sector":"Communication Services","shares":55,"position":6888.2},{"rank":40,"ticker":"TAP","momentum":33.7616251146,"atr":1.801335,"price":52.44,"sector":"Consumer Staples","shares":138,"position":7236.72},{"rank":41,"ticker":"VRTX","momentum":32.8561820203,"atr":9.652335,"price":252.35,"sector":"Health Care","shares":25,"position":6308.75},{"rank":42,"ticker":"CI","momentum":30.8133333256,"atr":7.8146,"price":257.57,"sector":"Health Care","shares":31,"position":7984.67},{"rank":43,"ticker":"CMS","momentum":30.703938931,"atr":1.587545,"price":68.9,"sector":"Utilities","shares":157,"position":10817.3},{"rank":44,"ticker":"SO","momentum":29.8040240362,"atr":1.735275,"price":73.82,"sector":"Utilities","shares":144,"position":10630.08},{"rank":45,"ticker":"MRK","momentum":27.6819669874,"atr":2.18126,"price":92.1,"sector":"Health Care","shares":114,"position":10499.4},{"rank":46,"ticker":"ATO","momentum":27.2943206801,"atr":2.62975,"price":111.85,"sector":"Utilities","shares":95,"position":10625.75},{"rank":47,"ticker":"HII","momentum":27.145861537,"atr":6.865635,"price":202.84,"sector":"Industrials","shares":36,"position":7302.24},{"rank":48,"ticker":"ETR","momentum":26.1891161045,"atr":2.97825,"price":116.47,"sector":"Utilities","shares":83,"position":9667.01},{"rank":49,"ticker":"HSIC","momentum":25.6106981322,"atr":2.64025,"price":83.71,"sector":"Health Care","shares":94,"position":7868.74},{"rank":50,"ticker":"XEL","momentum":25.2015444697,"atr":1.69625,"price":74.89,"sector":"Utilities","shares":147,"position":11008.83},{"rank":51,"ticker":"MO","momentum":24.9253812137,"atr":1.473815,"price":53.2,"sector":"Consumer Staples","shares":169,"position":8990.8},{"rank":52,"ticker":"LYB","momentum":24.425759107,"atr":3.839,"price":110.31,"sector":"Materials","shares":65,"position":7170.15},{"rank":53,"ticker":"KMI","momentum":24.3856763022,"atr":0.621495,"price":19.3,"sector":"Energy","shares":402,"position":7758.6},{"rank":54,"ticker":"AEE","momentum":23.6143400968,"atr":1.99113,"price":92.8,"sector":"Utilities","shares":125,"position":11600.0},{"rank":55,"ticker":"DUK","momentum":23.0903200337,"atr":2.5991,"price":108.9,"sector":"Utilities","shares":96,"position":10454.4},{"rank":56,"ticker":"VTR","momentum":21.267609547,"atr":1.64675,"price":56.31,"sector":"Real Estate","shares":151,"position":8502.81},{"rank":57,"ticker":"WEC","momentum":18.4683481609,"atr":2.440795,"price":101.95,"sector":"Utilities","shares":102,"position":10398.9},{"rank":58,"ticker":"JNJ","momentum":16.8137787738,"atr":3.21132,"price":175.5,"sector":"Health Care","shares":77,"position":13513.5},{"rank":59,"ticker":"ALL","momentum":16.560445083,"atr":3.51425,"price":128.01,"sector":"Financials","shares":71,"position":9088.71},{"rank":60,"ticker":"LHX","momentum":16.1416205808,"atr":7.04795,"price":237.85,"sector":"Industrials","shares":35,"position":8324.75},{"rank":61,"ticker":"ROL","momentum":16.1106140707,"atr":1.106055,"price":34.4,"sector":"Industrials","shares":226,"position":7774.4},{"rank":62,"ticker":"PEG","momentum":15.8195509852,"atr":1.49815,"price":67.86,"sector":"Utilities","shares":166,"position":11264.76},{"rank":63,"ticker":"NI","momentum":15.5878685964,"atr":0.70215,"price":30.56,"sector":"Utilities","shares":356,"position":10879.36},{"rank":64,"ticker":"AMGN","momentum":15.0458143633,"atr":5.993195,"price":243.96,"sector":"Health Care","shares":41,"position":10002.36},{"rank":65,"ticker":"D","momentum":14.8700922129,"atr":2.018925,"price":82.66,"sector":"Utilities","shares":123,"position":10167.18},{"rank":66,"ticker":"L","momentum":14.1978023745,"atr":1.681615,"price":63.46,"sector":"Financials","shares":148,"position":9392.08},{"rank":67,"ticker":"REGN","momentum":13.3006126287,"atr":20.60158,"price":659.2,"sector":"Health Care","shares":12,"position":7910.4},{"rank":68,"ticker":"PNW","momentum":13.2751956803,"atr":1.889195,"price":74.54,"sector":"Utilities","shares":132,"position":9839.28},{"rank":69,"ticker":"EVRG","momentum":12.7088181882,"atr":1.597555,"price":67.06,"sector":"Utilities","shares":156,"position":10461.36},{"rank":70,"ticker":"CPB","momentum":10.3340507904,"atr":1.414,"price":46.22,"sector":"Consumer Staples","shares":176,"position":8134.72},{"rank":71,"ticker":"HOLX","momentum":9.8826680119,"atr":2.26125,"price":77.55,"sector":"Health Care","shares":110,"position":8530.5},{"rank":72,"ticker":"CB","momentum":9.6228678587,"atr":5.426625,"price":207.31,"sector":"Financials","shares":46,"position":9536.26},{"rank":73,"ticker":"K","momentum":9.2598963825,"atr":1.97413,"price":69.32,"sector":"Consumer Staples","shares":126,"position":8734.32},{"rank":74,"ticker":"SLB","momentum":8.9841612123,"atr":2.41625,"price":41.13,"sector":"Energy","shares":103,"position":4236.39},{"rank":75,"ticker":"TRV","momentum":7.8012909803,"atr":3.44783,"price":174.32,"sector":"Financials","shares":72,"position":12551.04},{"rank":76,"ticker":"CERN","momentum":6.5276724384,"atr":0.36677,"price":93.97,"sector":"Health Care","shares":681,"position":63993.57},{"rank":77,"ticker":"ES","momentum":4.6213010059,"atr":2.214035,"price":89.18,"sector":"Utilities","shares":112,"position":9988.16},{"rank":78,"ticker":"CHRW","momentum":3.1229648305,"atr":3.683205,"price":103.17,"sector":"Industrials","shares":67,"position":6912.39},{"rank":79,"ticker":"PGR","momentum":1.9925020168,"atr":3.38075,"price":111.9,"sector":"Financials","shares":73,"position":8168.7},{"rank":80,"ticker":"STZ","momentum":1.8606161107,"atr":5.87938,"price":237.05,"sector":"Consumer Staples","shares":42,"position":9956.1},{"rank":81,"ticker":"SNA","momentum":0.8272394404,"atr":6.696635,"price":216.4,"sector":"Industrials","shares":37,"position":8006.8},{"rank":82,"ticker":"OGN","momentum":0.7404874888,"atr":1.24374,"price":35.96,"sector":"Health Care","shares":201,"position":7227.96},{"rank":83,"ticker":"PSX","momentum":0.684915758,"atr":3.94325,"price":95.52,"sector":"Energy","shares":63,"position":6017.76},{"rank":84,"ticker":"AMCR","momentum":0.508090718,"atr":0.423165,"price":12.73,"sector":"Materials","shares":590,"position":7510.7},{"rank":85,"ticker":"T","momentum":0.134749304,"atr":0.54013,"price":20.23,"sector":"Communication Services","shares":462,"position":9346.26},{"rank":86,"ticker":"IBM","momentum":0.0230914712,"atr":3.716745,"price":132.94,"sector":"Information Technology","shares":67,"position":8906.98},{"rank":87,"ticker":"GPC","momentum":0.0060332007,"atr":4.03853,"price":131.48,"sector":"Consumer Discretionary","shares":61,"position":8020.28},{"rank":88,"ticker":"NRG","momentum":0.004696351,"atr":1.468,"price":45.76,"sector":"Utilities","shares":170,"position":7779.2},{"rank":89,"ticker":"IP","momentum":0.0037184509,"atr":1.39375,"price":48.33,"sector":"Materials","shares":179,"position":8651.07},{"rank":90,"ticker":"PPL","momentum":-0.0024767074,"atr":0.62871,"price":29.37,"sector":"Utilities","shares":397,"position":11659.89},{"rank":91,"ticker":"MNST","momentum":-0.1097278773,"atr":2.98445,"price":86.62,"sector":"Consumer Staples","shares":83,"position":7189.46},{"rank":92,"ticker":"PM","momentum":-0.2477145482,"atr":2.72768,"price":106.18,"sector":"Consumer Staples","shares":91,"position":9662.38},{"rank":93,"ticker":"WDC","momentum":-1.2602985416,"atr":2.75516,"price":59.1,"sector":"Information Technology","shares":90,"position":5319.0},{"rank":94,"ticker":"WAT","momentum":-1.8342636829,"atr":12.22275,"price":330.19,"sector":"Health Care","shares":20,"position":6603.8},{"rank":95,"ticker":"CE","momentum":-11.9776063343,"atr":6.06617,"price":151.31,"sector":"Materials","shares":41,"position":6203.71},{"rank":96,"ticker":"EA","momentum":-15.81581284,"atr":4.655795,"price":128.97,"sector":"Communication Services","shares":53,"position":6835.41}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

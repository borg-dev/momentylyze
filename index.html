<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":118.486909849,"atr":1.6815,"price":67.79,"sector":"Health Care","shares":148,"position":10032.92},{"rank":2,"ticker":"NDAQ","momentum":70.4017990313,"atr":1.361995,"price":57.11,"sector":"Financials","shares":183,"position":10451.13},{"rank":3,"ticker":"MOH","momentum":68.3085724983,"atr":8.179625,"price":331.1,"sector":"Health Care","shares":30,"position":9933.0},{"rank":4,"ticker":"GPC","momentum":61.6699172092,"atr":3.47371,"price":149.7,"sector":"Consumer Discretionary","shares":71,"position":10628.7},{"rank":5,"ticker":"AES","momentum":61.4359656621,"atr":0.82038,"price":22.75,"sector":"Utilities","shares":304,"position":6916.0},{"rank":6,"ticker":"KEYS","momentum":60.7576656842,"atr":3.8708,"price":158.82,"sector":"Information Technology","shares":64,"position":10164.48},{"rank":7,"ticker":"LW","momentum":59.3972446502,"atr":1.99975,"price":78.08,"sector":"Consumer Staples","shares":125,"position":9760.0},{"rank":8,"ticker":"TT","momentum":57.1728196651,"atr":4.34975,"price":145.96,"sector":"Industrials","shares":57,"position":8319.72},{"rank":9,"ticker":"SBUX","momentum":55.7952994851,"atr":2.63423,"price":86.57,"sector":"Consumer Discretionary","shares":94,"position":8137.58},{"rank":10,"ticker":"IT","momentum":52.4594440208,"atr":8.22084,"price":278.67,"sector":"Information Technology","shares":30,"position":8360.1},{"rank":11,"ticker":"ON","momentum":47.285806976,"atr":3.09928,"price":62.94,"sector":"Information Technology","shares":80,"position":5035.2},{"rank":12,"ticker":"ORLY","momentum":45.1157778519,"atr":15.30032,"price":711.76,"sector":"Consumer Discretionary","shares":16,"position":11388.16},{"rank":13,"ticker":"XYL","momentum":42.5307988756,"atr":2.6775,"price":88.09,"sector":"Industrials","shares":93,"position":8192.37},{"rank":14,"ticker":"SJM","momentum":41.5161673404,"atr":2.95832,"price":139.0,"sector":"Consumer Staples","shares":84,"position":11676.0},{"rank":15,"ticker":"AJG","momentum":40.1045595308,"atr":3.76866,"price":171.14,"sector":"Financials","shares":66,"position":11295.24},{"rank":16,"ticker":"RJF","momentum":38.7206278547,"atr":2.84179,"price":98.28,"sector":"Financials","shares":87,"position":8550.36},{"rank":17,"ticker":"GIS","momentum":35.0322993742,"atr":1.75751,"price":77.71,"sector":"Consumer Staples","shares":142,"position":11034.82},{"rank":18,"ticker":"HII","momentum":31.7160645465,"atr":5.590125,"price":223.33,"sector":"Industrials","shares":44,"position":9826.52},{"rank":19,"ticker":"RSG","momentum":30.3612431503,"atr":2.644385,"price":137.45,"sector":"Industrials","shares":94,"position":12920.3},{"rank":20,"ticker":"MCK","momentum":29.2929203091,"atr":8.508245,"price":342.0,"sector":"Health Care","shares":29,"position":9918.0},{"rank":21,"ticker":"WM","momentum":29.1620730353,"atr":2.86122,"price":161.91,"sector":"Industrials","shares":87,"position":14086.17},{"rank":22,"ticker":"CI","momentum":28.8949678452,"atr":6.04,"price":280.56,"sector":"Health Care","shares":41,"position":11502.96},{"rank":23,"ticker":"ADP","momentum":26.8206082754,"atr":5.36722,"price":227.75,"sector":"Information Technology","shares":46,"position":10476.5},{"rank":24,"ticker":"SCHW","momentum":26.6848423053,"atr":2.04368,"price":72.64,"sector":"Financials","shares":122,"position":8862.08},{"rank":25,"ticker":"IEX","momentum":26.0078293087,"atr":4.404665,"price":200.25,"sector":"Industrials","shares":56,"position":11214.0},{"rank":26,"ticker":"CDAY","momentum":25.6651001499,"atr":2.23375,"price":56.6,"sector":"Information Technology","shares":111,"position":6282.6},{"rank":27,"ticker":"CDNS","momentum":24.852551547,"atr":4.56975,"price":164.69,"sector":"Information Technology","shares":54,"position":8893.26},{"rank":28,"ticker":"WMT","momentum":23.8792055845,"atr":2.818275,"price":132.25,"sector":"Consumer Staples","shares":88,"position":11638.0},{"rank":29,"ticker":"BRO","momentum":17.9214404762,"atr":1.39875,"price":60.89,"sector":"Financials","shares":178,"position":10838.42},{"rank":30,"ticker":"CF","momentum":17.4303379215,"atr":4.948625,"price":97.06,"sector":"Materials","shares":50,"position":4853.0},{"rank":31,"ticker":"PFG","momentum":16.4516784836,"atr":1.95644,"price":71.42,"sector":"Financials","shares":127,"position":9070.34},{"rank":32,"ticker":"HSY","momentum":15.9531939158,"atr":4.422145,"price":223.8,"sector":"Consumer Staples","shares":56,"position":12532.8},{"rank":33,"ticker":"CBOE","momentum":14.5095193087,"atr":2.8439,"price":117.73,"sector":"Financials","shares":87,"position":10242.51},{"rank":34,"ticker":"MTB","momentum":13.8156443126,"atr":5.28554,"price":174.84,"sector":"Financials","shares":47,"position":8217.48},{"rank":35,"ticker":"DRI","momentum":12.5792465073,"atr":4.051895,"price":129.32,"sector":"Consumer Discretionary","shares":61,"position":7888.52},{"rank":36,"ticker":"PGR","momentum":12.0793189528,"atr":2.774845,"price":118.39,"sector":"Financials","shares":90,"position":10655.1},{"rank":37,"ticker":"CTXS","momentum":11.3638218947,"atr":0.26915,"price":103.9,"sector":"Information Technology","shares":928,"position":96419.2},{"rank":38,"ticker":"GL","momentum":8.8176621894,"atr":2.18075,"price":100.24,"sector":"Financials","shares":114,"position":11427.36},{"rank":39,"ticker":"VRTX","momentum":8.5292663616,"atr":8.435095,"price":292.8,"sector":"Health Care","shares":29,"position":8491.2},{"rank":40,"ticker":"AZO","momentum":6.2228728017,"atr":54.547605,"price":2159.02,"sector":"Consumer Discretionary","shares":4,"position":8636.08},{"rank":41,"ticker":"ULTA","momentum":3.5597272198,"atr":11.44737,"price":404.76,"sector":"Consumer Discretionary","shares":21,"position":8499.96},{"rank":42,"ticker":"GILD","momentum":1.8087782884,"atr":1.573585,"price":63.07,"sector":"Health Care","shares":158,"position":9965.06},{"rank":43,"ticker":"COP","momentum":0.2689391435,"atr":4.222055,"price":103.66,"sector":"Energy","shares":59,"position":6115.94},{"rank":44,"ticker":"MPC","momentum":0.0227997503,"atr":3.52421,"price":98.7,"sector":"Energy","shares":70,"position":6909.0},{"rank":45,"ticker":"LLY","momentum":0.0141758858,"atr":9.402425,"price":330.01,"sector":"Health Care","shares":26,"position":8580.26},{"rank":46,"ticker":"ALL","momentum":-0.2086363955,"atr":3.26375,"price":126.13,"sector":"Financials","shares":76,"position":9585.88}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

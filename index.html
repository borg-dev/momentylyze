<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":62.4680811359,"atr":2.5946,"price":97.48,"sector":"Consumer Staples","shares":96,"position":9358.08},{"rank":2,"ticker":"T","momentum":61.543493137,"atr":0.52042,"price":20.8,"sector":"Communication Services","shares":480,"position":9984.0},{"rank":3,"ticker":"MRK","momentum":48.1922195229,"atr":2.10312,"price":92.78,"sector":"Health Care","shares":118,"position":10948.04},{"rank":4,"ticker":"LLY","momentum":36.3614304014,"atr":8.61975,"price":330.47,"sector":"Health Care","shares":29,"position":9583.63},{"rank":5,"ticker":"K","momentum":30.3922194297,"atr":1.599385,"price":72.52,"sector":"Consumer Staples","shares":156,"position":11313.12},{"rank":6,"ticker":"AMCR","momentum":29.5237564584,"atr":0.327885,"price":12.44,"sector":"Materials","shares":762,"position":9479.28},{"rank":7,"ticker":"IBM","momentum":28.6109095677,"atr":3.000085,"price":140.47,"sector":"Information Technology","shares":83,"position":11659.01},{"rank":8,"ticker":"CI","momentum":22.736726458,"atr":7.75932,"price":279.19,"sector":"Health Care","shares":32,"position":8934.08},{"rank":9,"ticker":"VICI","momentum":18.4284171298,"atr":0.93896,"price":31.32,"sector":"Real Estate","shares":266,"position":8331.12},{"rank":10,"ticker":"GPC","momentum":17.1043819264,"atr":3.135565,"price":137.14,"sector":"Consumer Discretionary","shares":79,"position":10834.06},{"rank":11,"ticker":"MCK","momentum":17.0594165503,"atr":8.05635,"price":331.2,"sector":"Health Care","shares":31,"position":10267.2},{"rank":12,"ticker":"CPB","momentum":15.7808872409,"atr":1.1135,"price":48.58,"sector":"Consumer Staples","shares":224,"position":10881.92},{"rank":13,"ticker":"BMY","momentum":14.7320180419,"atr":1.525505,"price":75.38,"sector":"Health Care","shares":163,"position":12286.94},{"rank":14,"ticker":"WRB","momentum":14.5165612104,"atr":1.750905,"price":67.31,"sector":"Financials","shares":142,"position":9558.02},{"rank":15,"ticker":"CEG","momentum":13.8462824306,"atr":2.89925,"price":59.65,"sector":"Utilities","shares":86,"position":5129.9},{"rank":16,"ticker":"VRTX","momentum":12.1344570951,"atr":8.85187,"price":294.29,"sector":"Health Care","shares":28,"position":8240.12},{"rank":17,"ticker":"GIS","momentum":8.9901480461,"atr":1.690655,"price":75.54,"sector":"Consumer Staples","shares":147,"position":11104.38},{"rank":18,"ticker":"STZ","momentum":7.7484109767,"atr":6.19138,"price":242.17,"sector":"Consumer Staples","shares":40,"position":9686.8},{"rank":19,"ticker":"TMUS","momentum":7.5692994683,"atr":3.80947,"price":135.72,"sector":"Communication Services","shares":65,"position":8821.8},{"rank":20,"ticker":"PGR","momentum":6.2712309692,"atr":3.22675,"price":120.38,"sector":"Financials","shares":77,"position":9269.26},{"rank":21,"ticker":"KMB","momentum":5.9638255587,"atr":2.805805,"price":134.2,"sector":"Consumer Staples","shares":89,"position":11943.8},{"rank":22,"ticker":"DG","momentum":5.5554937532,"atr":5.598225,"price":252.88,"sector":"Consumer Discretionary","shares":44,"position":11126.72},{"rank":23,"ticker":"AZO","momentum":4.310826706,"atr":56.906955,"price":2182.37,"sector":"Consumer Discretionary","shares":4,"position":8729.48},{"rank":24,"ticker":"NOC","momentum":4.1461264871,"atr":13.331135,"price":480.43,"sector":"Industrials","shares":18,"position":8647.74},{"rank":25,"ticker":"GILD","momentum":3.2476349497,"atr":1.31179,"price":62.84,"sector":"Health Care","shares":190,"position":11939.6},{"rank":26,"ticker":"TAP","momentum":2.3441161115,"atr":1.54075,"price":55.5,"sector":"Consumer Staples","shares":162,"position":8991.0},{"rank":27,"ticker":"BF.B","momentum":2.2112018443,"atr":1.655985,"price":70.16,"sector":"Consumer Staples","shares":150,"position":10524.0},{"rank":28,"ticker":"WAT","momentum":2.0930068418,"atr":8.64823,"price":346.25,"sector":"Health Care","shares":28,"position":9695.0},{"rank":29,"ticker":"AMGN","momentum":2.0158628171,"atr":4.57037,"price":248.48,"sector":"Health Care","shares":54,"position":13417.92},{"rank":30,"ticker":"AMT","momentum":1.9908747454,"atr":8.15475,"price":255.01,"sector":"Real Estate","shares":30,"position":7650.3},{"rank":31,"ticker":"MCD","momentum":1.5881497838,"atr":4.73572,"price":253.24,"sector":"Consumer Discretionary","shares":52,"position":13168.48},{"rank":32,"ticker":"CL","momentum":1.3628831264,"atr":1.775145,"price":78.35,"sector":"Consumer Staples","shares":140,"position":10969.0},{"rank":33,"ticker":"WEC","momentum":0.8767151144,"atr":2.632195,"price":99.51,"sector":"Utilities","shares":94,"position":9353.94},{"rank":34,"ticker":"HII","momentum":0.8639000413,"atr":6.12256,"price":215.68,"sector":"Industrials","shares":40,"position":8627.2},{"rank":35,"ticker":"CTLT","momentum":0.5840027748,"atr":3.570125,"price":111.81,"sector":"Health Care","shares":70,"position":7826.7},{"rank":36,"ticker":"ROL","momentum":0.5451407178,"atr":0.857405,"price":36.71,"sector":"Industrials","shares":291,"position":10682.61},{"rank":37,"ticker":"KO","momentum":0.3765436,"atr":1.31946,"price":63.14,"sector":"Consumer Staples","shares":189,"position":11933.46},{"rank":38,"ticker":"JNJ","momentum":0.3437467785,"atr":3.43528,"price":178.28,"sector":"Health Care","shares":72,"position":12836.16},{"rank":39,"ticker":"HSY","momentum":0.11013072,"atr":4.783855,"price":219.79,"sector":"Consumer Staples","shares":52,"position":11429.08},{"rank":40,"ticker":"SYY","momentum":0.0727380843,"atr":2.20075,"price":86.15,"sector":"Consumer Staples","shares":113,"position":9734.95},{"rank":41,"ticker":"PEP","momentum":0.0461059058,"atr":3.35777,"price":171.88,"sector":"Consumer Staples","shares":74,"position":12719.12},{"rank":42,"ticker":"CAG","momentum":0.0114077253,"atr":0.753045,"price":35.31,"sector":"Consumer Staples","shares":331,"position":11687.61},{"rank":43,"ticker":"PFE","momentum":0.0078888226,"atr":1.52091,"price":53.17,"sector":"Health Care","shares":164,"position":8719.88},{"rank":44,"ticker":"ELV","momentum":0.0042197208,"atr":14.97025,"price":484.29,"sector":"Health Care","shares":16,"position":7748.64},{"rank":45,"ticker":"PWR","momentum":-0.0000270247,"atr":5.48082,"price":131.95,"sector":"Industrials","shares":45,"position":5937.75},{"rank":46,"ticker":"O","momentum":-0.0007080394,"atr":1.5862,"price":68.98,"sector":"Real Estate","shares":157,"position":10829.86},{"rank":47,"ticker":"INCY","momentum":-0.0017065025,"atr":2.292,"price":80.48,"sector":"Health Care","shares":109,"position":8772.32},{"rank":48,"ticker":"RSG","momentum":-0.0052317451,"atr":3.0105,"price":129.86,"sector":"Industrials","shares":83,"position":10778.38},{"rank":49,"ticker":"SNPS","momentum":-0.0358973114,"atr":10.21395,"price":317.54,"sector":"Information Technology","shares":24,"position":7620.96},{"rank":50,"ticker":"ADP","momentum":-0.1602114958,"atr":5.56223,"price":217.27,"sector":"Information Technology","shares":44,"position":9559.88},{"rank":51,"ticker":"UNH","momentum":-0.299448376,"atr":14.763705,"price":518.63,"sector":"Health Care","shares":16,"position":8298.08},{"rank":52,"ticker":"CDNS","momentum":-0.3683728518,"atr":5.4615,"price":160.42,"sector":"Information Technology","shares":45,"position":7218.9},{"rank":53,"ticker":"AJG","momentum":-0.5870055187,"atr":3.928,"price":166.76,"sector":"Financials","shares":63,"position":10505.88},{"rank":54,"ticker":"ALL","momentum":-0.9028359811,"atr":3.3688,"price":130.87,"sector":"Financials","shares":74,"position":9684.38},{"rank":55,"ticker":"DRE","momentum":-1.4076043007,"atr":1.8235,"price":57.27,"sector":"Real Estate","shares":137,"position":7845.99},{"rank":56,"ticker":"CNC","momentum":-1.5112818242,"atr":2.737035,"price":88.01,"sector":"Health Care","shares":91,"position":8008.91},{"rank":57,"ticker":"CBOE","momentum":-1.8261963522,"atr":2.57698,"price":118.51,"sector":"Financials","shares":97,"position":11495.47},{"rank":58,"ticker":"JKHY","momentum":-1.8423344795,"atr":3.844125,"price":185.57,"sector":"Information Technology","shares":65,"position":12062.05},{"rank":59,"ticker":"GL","momentum":-2.0073191477,"atr":2.67071,"price":99.27,"sector":"Financials","shares":93,"position":9232.11},{"rank":60,"ticker":"TMO","momentum":-3.1203472397,"atr":13.74034,"price":553.71,"sector":"Health Care","shares":18,"position":9966.78},{"rank":61,"ticker":"ABBV","momentum":-4.0941916596,"atr":3.76106,"price":152.85,"sector":"Health Care","shares":66,"position":10088.1},{"rank":62,"ticker":"NEE","momentum":-5.8481403833,"atr":2.389585,"price":80.25,"sector":"Utilities","shares":104,"position":8346.0},{"rank":63,"ticker":"BR","momentum":-6.0398141316,"atr":3.890655,"price":149.3,"sector":"Information Technology","shares":64,"position":9555.2},{"rank":64,"ticker":"PHM","momentum":-11.5187354319,"atr":1.847065,"price":44.2,"sector":"Consumer Discretionary","shares":135,"position":5967.0},{"rank":65,"ticker":"ORLY","momentum":-12.6253110249,"atr":15.102,"price":657.88,"sector":"Consumer Discretionary","shares":16,"position":10526.08},{"rank":66,"ticker":"FDS","momentum":-18.4804015803,"atr":10.71425,"price":401.63,"sector":"Financials","shares":23,"position":9237.49}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

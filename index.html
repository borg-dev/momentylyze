<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"VLO","momentum":299.3550157264,"atr":5.245645,"price":138.69,"sector":"Energy","shares":47,"position":6518.43},{"rank":2,"ticker":"CTRA","momentum":239.4003710697,"atr":1.466995,"price":35.95,"sector":"Energy","shares":170,"position":6111.5},{"rank":3,"ticker":"MPC","momentum":135.2208021753,"atr":3.22121,"price":109.39,"sector":"Energy","shares":77,"position":8423.03},{"rank":4,"ticker":"DVN","momentum":132.8231872492,"atr":3.33462,"price":77.05,"sector":"Energy","shares":74,"position":5701.7},{"rank":5,"ticker":"CEG","momentum":106.1778771986,"atr":3.06316,"price":66.39,"sector":"Utilities","shares":81,"position":5377.59},{"rank":6,"ticker":"MCK","momentum":93.5260058599,"atr":9.54455,"price":317.66,"sector":"Health Care","shares":26,"position":8259.16},{"rank":7,"ticker":"LLY","momentum":90.2153596485,"atr":10.1225,"price":303.36,"sector":"Health Care","shares":24,"position":7280.64},{"rank":8,"ticker":"WMB","momentum":80.5262589191,"atr":0.94003,"price":37.41,"sector":"Energy","shares":265,"position":9913.65},{"rank":9,"ticker":"MRK","momentum":67.5448679276,"atr":1.966555,"price":89.84,"sector":"Health Care","shares":127,"position":11409.68},{"rank":10,"ticker":"CTVA","momentum":64.5144744106,"atr":1.71071,"price":61.72,"sector":"Materials","shares":146,"position":9011.12},{"rank":11,"ticker":"WRB","momentum":64.4210649546,"atr":1.53225,"price":71.56,"sector":"Financials","shares":163,"position":11664.28},{"rank":12,"ticker":"XOM","momentum":62.1865049744,"atr":2.887775,"price":98.84,"sector":"Energy","shares":86,"position":8500.24},{"rank":13,"ticker":"BMY","momentum":60.6769757571,"atr":1.514755,"price":75.25,"sector":"Health Care","shares":165,"position":12416.25},{"rank":14,"ticker":"PXD","momentum":58.9478473811,"atr":10.530195,"price":278.74,"sector":"Energy","shares":23,"position":6411.02},{"rank":15,"ticker":"CI","momentum":57.2854770728,"atr":7.12575,"price":258.32,"sector":"Health Care","shares":35,"position":9041.2},{"rank":16,"ticker":"SRE","momentum":56.5909322056,"atr":3.46729,"price":161.17,"sector":"Utilities","shares":72,"position":11604.24},{"rank":17,"ticker":"BALL","momentum":56.3265835307,"atr":0.1,"price":73.77,"sector":"Materials","shares":2500,"position":184425.0},{"rank":18,"ticker":"EXC","momentum":50.651710741,"atr":1.09725,"price":48.55,"sector":"Utilities","shares":227,"position":11020.85},{"rank":19,"ticker":"HAL","momentum":49.1196251702,"atr":1.7465,"price":41.32,"sector":"Energy","shares":143,"position":5908.76},{"rank":20,"ticker":"ED","momentum":48.4708545627,"atr":2.062615,"price":98.1,"sector":"Utilities","shares":121,"position":11870.1},{"rank":21,"ticker":"NOC","momentum":48.242075183,"atr":11.807605,"price":478.86,"sector":"Industrials","shares":21,"position":10056.06},{"rank":22,"ticker":"COP","momentum":47.9250656624,"atr":4.4625,"price":117.38,"sector":"Energy","shares":56,"position":6573.28},{"rank":23,"ticker":"CNP","momentum":45.3154436949,"atr":0.62119,"price":31.54,"sector":"Utilities","shares":402,"position":12679.08},{"rank":24,"ticker":"AEP","momentum":44.604502927,"atr":2.0766,"price":102.06,"sector":"Utilities","shares":120,"position":12247.2},{"rank":25,"ticker":"DOW","momentum":43.8877405126,"atr":1.78649,"price":67.07,"sector":"Materials","shares":139,"position":9322.73},{"rank":26,"ticker":"AIZ","momentum":41.5777191722,"atr":4.519125,"price":183.18,"sector":"Financials","shares":55,"position":10074.9},{"rank":27,"ticker":"SO","momentum":39.7960022323,"atr":1.412545,"price":75.35,"sector":"Utilities","shares":176,"position":13261.6},{"rank":28,"ticker":"WEC","momentum":39.4797401074,"atr":2.276245,"price":104.31,"sector":"Utilities","shares":109,"position":11369.79},{"rank":29,"ticker":"BKR","momentum":37.9642475559,"atr":1.506555,"price":37.68,"sector":"Energy","shares":165,"position":6217.2},{"rank":30,"ticker":"IRM","momentum":36.2743727484,"atr":1.653965,"price":53.09,"sector":"Real Estate","shares":151,"position":8016.59},{"rank":31,"ticker":"ADM","momentum":35.6528462529,"atr":2.856265,"price":88.41,"sector":"Consumer Staples","shares":87,"position":7691.67},{"rank":32,"ticker":"KMI","momentum":34.3905074544,"atr":0.495955,"price":19.79,"sector":"Energy","shares":504,"position":9974.16},{"rank":33,"ticker":"ANTM","momentum":34.3246938703,"atr":12.81725,"price":497.42,"sector":"Health Care","shares":19,"position":9450.98},{"rank":34,"ticker":"XEL","momentum":33.4486780422,"atr":1.5931,"price":74.71,"sector":"Utilities","shares":156,"position":11654.76},{"rank":35,"ticker":"LYB","momentum":31.7192531841,"atr":3.690265,"price":109.83,"sector":"Materials","shares":67,"position":7358.61},{"rank":36,"ticker":"HST","momentum":31.201689391,"atr":0.8625,"price":21.16,"sector":"Real Estate","shares":289,"position":6115.24},{"rank":37,"ticker":"ROL","momentum":29.0544395019,"atr":0.956965,"price":35.04,"sector":"Industrials","shares":261,"position":9145.44},{"rank":38,"ticker":"ETR","momentum":28.7133503353,"atr":2.584375,"price":121.34,"sector":"Utilities","shares":96,"position":11648.64},{"rank":39,"ticker":"TAP","momentum":28.6425075691,"atr":1.637335,"price":54.06,"sector":"Consumer Staples","shares":152,"position":8217.12},{"rank":40,"ticker":"EIX","momentum":28.2703271846,"atr":1.68195,"price":69.4,"sector":"Utilities","shares":148,"position":10271.2},{"rank":41,"ticker":"CMS","momentum":28.1270294502,"atr":1.33355,"price":71.2,"sector":"Utilities","shares":187,"position":13314.4},{"rank":42,"ticker":"K","momentum":26.9390835371,"atr":1.850185,"price":68.45,"sector":"Consumer Staples","shares":135,"position":9240.75},{"rank":43,"ticker":"DTE","momentum":26.270613278,"atr":2.47317,"price":132.57,"sector":"Utilities","shares":101,"position":13389.57},{"rank":44,"ticker":"AEE","momentum":25.4270185464,"atr":1.7365,"price":93.15,"sector":"Utilities","shares":143,"position":13320.45},{"rank":45,"ticker":"CHRW","momentum":24.1565752405,"atr":3.07345,"price":109.34,"sector":"Industrials","shares":81,"position":8856.54},{"rank":46,"ticker":"AMGN","momentum":23.8755601191,"atr":5.14155,"price":245.44,"sector":"Health Care","shares":48,"position":11781.12},{"rank":47,"ticker":"LDOS","momentum":23.5275483036,"atr":2.230975,"price":105.92,"sector":"Industrials","shares":112,"position":11863.04},{"rank":48,"ticker":"HII","momentum":23.5067363107,"atr":5.62075,"price":212.51,"sector":"Industrials","shares":44,"position":9350.44},{"rank":49,"ticker":"VRTX","momentum":22.7617739374,"atr":8.512495,"price":268.0,"sector":"Health Care","shares":29,"position":7772.0},{"rank":50,"ticker":"AMCR","momentum":22.4549728864,"atr":0.32429,"price":13.49,"sector":"Materials","shares":770,"position":10387.3},{"rank":51,"ticker":"DUK","momentum":22.3054417394,"atr":2.204595,"price":111.11,"sector":"Utilities","shares":113,"position":12555.43},{"rank":52,"ticker":"EVRG","momentum":21.7833243813,"atr":1.33,"price":70.4,"sector":"Utilities","shares":187,"position":13164.8},{"rank":53,"ticker":"CPB","momentum":20.6119734754,"atr":1.43269,"price":45.91,"sector":"Consumer Staples","shares":174,"position":7988.34},{"rank":54,"ticker":"WM","momentum":20.1674475767,"atr":3.266655,"price":157.94,"sector":"Industrials","shares":76,"position":12003.44},{"rank":55,"ticker":"NRG","momentum":18.5603483342,"atr":1.28324,"price":46.23,"sector":"Utilities","shares":194,"position":8968.62},{"rank":56,"ticker":"J","momentum":18.4797664014,"atr":3.70742,"price":135.85,"sector":"Industrials","shares":67,"position":9101.95},{"rank":57,"ticker":"PSX","momentum":17.8564839832,"atr":3.378265,"price":106.02,"sector":"Energy","shares":74,"position":7845.48},{"rank":58,"ticker":"PWR","momentum":16.0545973824,"atr":5.05855,"price":131.4,"sector":"Industrials","shares":49,"position":6438.6},{"rank":59,"ticker":"PNW","momentum":15.9771311776,"atr":1.66011,"price":78.1,"sector":"Utilities","shares":150,"position":11715.0},{"rank":60,"ticker":"ES","momentum":15.342610319,"atr":1.786285,"price":92.28,"sector":"Utilities","shares":139,"position":12826.92},{"rank":61,"ticker":"PKG","momentum":15.0221317034,"atr":4.15375,"price":160.84,"sector":"Materials","shares":60,"position":9650.4},{"rank":62,"ticker":"TMUS","momentum":14.7742009375,"atr":3.269245,"price":137.17,"sector":"Communication Services","shares":76,"position":10424.92},{"rank":63,"ticker":"RSG","momentum":14.4906888517,"atr":2.8999,"price":133.24,"sector":"Industrials","shares":86,"position":11458.64},{"rank":64,"ticker":"STZ","momentum":14.3693346646,"atr":5.36676,"price":245.87,"sector":"Consumer Staples","shares":46,"position":11310.02},{"rank":65,"ticker":"HSY","momentum":14.1376023585,"atr":5.16146,"price":211.41,"sector":"Consumer Staples","shares":48,"position":10147.68},{"rank":66,"ticker":"DG","momentum":13.5486516586,"atr":10.02422,"price":232.47,"sector":"Consumer Discretionary","shares":24,"position":5579.28},{"rank":67,"ticker":"MO","momentum":13.0877791384,"atr":1.3255,"price":53.59,"sector":"Consumer Staples","shares":188,"position":10074.92},{"rank":68,"ticker":"JNJ","momentum":12.7504427479,"atr":3.169035,"price":176.4,"sector":"Health Care","shares":78,"position":13759.2},{"rank":69,"ticker":"ATO","momentum":11.6474634232,"atr":2.28558,"price":116.76,"sector":"Utilities","shares":109,"position":12726.84},{"rank":70,"ticker":"WDC","momentum":11.3234867698,"atr":2.50226,"price":59.72,"sector":"Information Technology","shares":99,"position":5912.28},{"rank":71,"ticker":"L","momentum":10.7854040233,"atr":1.47225,"price":64.49,"sector":"Financials","shares":169,"position":10898.81},{"rank":72,"ticker":"SLB","momentum":10.7614718397,"atr":2.049,"price":47.22,"sector":"Energy","shares":122,"position":5760.84},{"rank":73,"ticker":"JKHY","momentum":10.7186265793,"atr":4.13587,"price":186.38,"sector":"Information Technology","shares":60,"position":11182.8},{"rank":74,"ticker":"HOLX","momentum":9.5055436148,"atr":1.928,"price":75.13,"sector":"Health Care","shares":129,"position":9691.77},{"rank":75,"ticker":"PGR","momentum":9.0047977551,"atr":2.721,"price":120.07,"sector":"Financials","shares":91,"position":10926.37},{"rank":76,"ticker":"NI","momentum":8.9352747623,"atr":0.5749,"price":31.76,"sector":"Utilities","shares":434,"position":13783.84},{"rank":77,"ticker":"SBAC","momentum":8.4241901102,"atr":11.30675,"price":333.67,"sector":"Real Estate","shares":22,"position":7340.74},{"rank":78,"ticker":"KO","momentum":8.2667538837,"atr":1.504805,"price":62.87,"sector":"Consumer Staples","shares":166,"position":10436.42},{"rank":79,"ticker":"ADP","momentum":8.1594102725,"atr":5.2586,"price":219.51,"sector":"Information Technology","shares":47,"position":10316.97},{"rank":80,"ticker":"D","momentum":7.9116779374,"atr":1.79045,"price":82.73,"sector":"Utilities","shares":139,"position":11499.47},{"rank":81,"ticker":"WRK","momentum":7.5948846039,"atr":1.865435,"price":48.59,"sector":"Materials","shares":134,"position":6511.06},{"rank":82,"ticker":"CCI","momentum":7.2967750571,"atr":5.172835,"price":184.78,"sector":"Real Estate","shares":48,"position":8869.44},{"rank":83,"ticker":"GPC","momentum":7.1566976657,"atr":3.71759,"price":139.66,"sector":"Consumer Discretionary","shares":67,"position":9357.22},{"rank":84,"ticker":"CERN","momentum":7.1196505075,"atr":0.31975,"price":94.97,"sector":"Health Care","shares":781,"position":74171.57},{"rank":85,"ticker":"ALL","momentum":7.0425293401,"atr":3.206,"price":132.35,"sector":"Financials","shares":77,"position":10190.95},{"rank":86,"ticker":"PEG","momentum":6.7658334919,"atr":1.26165,"price":68.39,"sector":"Utilities","shares":198,"position":13541.22},{"rank":87,"ticker":"LIN","momentum":6.1432914921,"atr":7.93637,"price":335.51,"sector":"Materials","shares":31,"position":10400.81},{"rank":88,"ticker":"MNST","momentum":5.6934615744,"atr":2.47445,"price":91.36,"sector":"Consumer Staples","shares":101,"position":9227.36},{"rank":89,"ticker":"FANG","momentum":5.3289886715,"atr":6.80471,"price":155.81,"sector":"Energy","shares":36,"position":5609.16},{"rank":90,"ticker":"HSIC","momentum":5.2842222397,"atr":2.14425,"price":84.16,"sector":"Health Care","shares":116,"position":9762.56},{"rank":91,"ticker":"ULTA","momentum":4.8530393187,"atr":19.939145,"price":413.73,"sector":"Consumer Discretionary","shares":12,"position":4964.76},{"rank":92,"ticker":"SNA","momentum":4.6652650699,"atr":5.731085,"price":221.56,"sector":"Industrials","shares":43,"position":9527.08},{"rank":93,"ticker":"PPL","momentum":4.5665440774,"atr":0.541945,"price":29.97,"sector":"Utilities","shares":461,"position":13816.17},{"rank":94,"ticker":"IP","momentum":4.4414344191,"atr":1.238,"price":47.26,"sector":"Materials","shares":201,"position":9499.26},{"rank":95,"ticker":"GIS","momentum":3.9676571959,"atr":1.815665,"price":68.77,"sector":"Consumer Staples","shares":137,"position":9421.49},{"rank":96,"ticker":"LHX","momentum":3.4806929348,"atr":5.194775,"price":241.1,"sector":"Industrials","shares":48,"position":11572.8},{"rank":97,"ticker":"IBM","momentum":2.7942806355,"atr":3.687685,"price":142.88,"sector":"Information Technology","shares":67,"position":9572.96},{"rank":98,"ticker":"CINF","momentum":2.635823834,"atr":2.773895,"price":128.12,"sector":"Financials","shares":90,"position":11530.8},{"rank":99,"ticker":"LNT","momentum":2.5854395393,"atr":1.47,"price":62.53,"sector":"Utilities","shares":170,"position":10630.1},{"rank":100,"ticker":"GD","momentum":2.431823917,"atr":5.66713,"price":229.9,"sector":"Industrials","shares":44,"position":10115.6},{"rank":101,"ticker":"HWM","momentum":2.2045963332,"atr":1.2927,"price":36.65,"sector":"Industrials","shares":193,"position":7073.45},{"rank":102,"ticker":"AMT","momentum":1.859543673,"atr":7.94302,"price":267.36,"sector":"Real Estate","shares":31,"position":8288.16},{"rank":103,"ticker":"AZO","momentum":1.6525793776,"atr":78.970145,"price":2099.06,"sector":"Consumer Discretionary","shares":3,"position":6297.18},{"rank":104,"ticker":"CB","momentum":1.6288885699,"atr":4.75858,"price":212.13,"sector":"Financials","shares":52,"position":11030.76},{"rank":105,"ticker":"PAYX","momentum":1.4964765015,"atr":2.9861,"price":125.93,"sector":"Information Technology","shares":83,"position":10452.19},{"rank":106,"ticker":"OKE","momentum":1.4922255419,"atr":1.91826,"price":67.14,"sector":"Energy","shares":130,"position":8728.2},{"rank":107,"ticker":"SYY","momentum":0.8531311501,"atr":2.94334,"price":84.72,"sector":"Consumer Staples","shares":84,"position":7116.48},{"rank":108,"ticker":"OGN","momentum":0.7734112738,"atr":1.13561,"price":37.47,"sector":"Health Care","shares":220,"position":8243.4},{"rank":109,"ticker":"TRV","momentum":0.4853348237,"atr":3.67573,"price":176.98,"sector":"Financials","shares":68,"position":12034.64},{"rank":110,"ticker":"KMB","momentum":0.36142626,"atr":3.10995,"price":131.88,"sector":"Consumer Staples","shares":80,"position":10550.4},{"rank":111,"ticker":"HON","momentum":0.1732299591,"atr":4.78574,"price":195.19,"sector":"Industrials","shares":52,"position":10149.88},{"rank":112,"ticker":"CTAS","momentum":0.1727002803,"atr":10.35679,"price":397.42,"sector":"Industrials","shares":24,"position":9538.08},{"rank":113,"ticker":"CNC","momentum":0.1606521306,"atr":2.7595,"price":83.24,"sector":"Health Care","shares":90,"position":7491.6},{"rank":114,"ticker":"FLT","momentum":0.1128579403,"atr":8.00975,"price":247.45,"sector":"Information Technology","shares":31,"position":7670.95},{"rank":115,"ticker":"MAR","momentum":0.0986834299,"atr":6.899825,"price":177.61,"sector":"Consumer Discretionary","shares":36,"position":6393.96},{"rank":116,"ticker":"PFE","momentum":0.0907968172,"atr":1.29682,"price":53.26,"sector":"Health Care","shares":192,"position":10225.92},{"rank":117,"ticker":"LUV","momentum":0.0904609977,"atr":1.705275,"price":44.42,"sector":"Industrials","shares":146,"position":6485.32},{"rank":118,"ticker":"CDNS","momentum":0.0328964208,"atr":6.21841,"price":160.29,"sector":"Information Technology","shares":40,"position":6411.6},{"rank":119,"ticker":"HIG","momentum":0.0224255927,"atr":1.82189,"price":72.77,"sector":"Financials","shares":137,"position":9969.49},{"rank":120,"ticker":"MPWR","momentum":0.0213861525,"atr":27.43479,"price":466.1,"sector":"Information Technology","shares":9,"position":4194.9},{"rank":121,"ticker":"PM","momentum":0.0192932547,"atr":2.997455,"price":106.37,"sector":"Consumer Staples","shares":83,"position":8828.71},{"rank":122,"ticker":"ADI","momentum":0.0158360351,"atr":5.244,"price":165.27,"sector":"Information Technology","shares":47,"position":7767.69},{"rank":123,"ticker":"GWW","momentum":0.0027034342,"atr":11.47339,"price":498.73,"sector":"Industrials","shares":21,"position":10473.33},{"rank":124,"ticker":"RTX","momentum":0.0023331986,"atr":2.32726,"price":97.21,"sector":"Industrials","shares":107,"position":10401.47},{"rank":125,"ticker":"WAT","momentum":-0.0030656849,"atr":11.525,"price":337.16,"sector":"Health Care","shares":21,"position":7080.36},{"rank":126,"ticker":"EXPD","momentum":-0.0189132042,"atr":3.38475,"price":109.62,"sector":"Industrials","shares":73,"position":8002.26},{"rank":127,"ticker":"SHW","momentum":-0.0238815772,"atr":8.850135,"price":275.03,"sector":"Materials","shares":28,"position":7700.84},{"rank":128,"ticker":"WAB","momentum":-0.0573343911,"atr":2.59475,"price":94.53,"sector":"Industrials","shares":96,"position":9074.88},{"rank":129,"ticker":"EA","momentum":-0.0791606975,"atr":4.51448,"price":140.35,"sector":"Communication Services","shares":55,"position":7719.25},{"rank":130,"ticker":"MCD","momentum":-0.0818881712,"atr":5.14778,"price":248.07,"sector":"Consumer Discretionary","shares":48,"position":11907.36},{"rank":131,"ticker":"CTLT","momentum":-0.0849727804,"atr":3.82818,"price":111.23,"sector":"Health Care","shares":65,"position":7229.95},{"rank":132,"ticker":"AES","momentum":-0.1086946476,"atr":0.7397,"price":22.71,"sector":"Utilities","shares":337,"position":7653.27},{"rank":133,"ticker":"CL","momentum":-0.1351975455,"atr":1.579145,"price":78.78,"sector":"Consumer Staples","shares":158,"position":12447.24},{"rank":134,"ticker":"BF.B","momentum":-0.1487460023,"atr":1.48302,"price":66.4,"sector":"Consumer Staples","shares":168,"position":11155.2},{"rank":135,"ticker":"SNPS","momentum":-0.2071116742,"atr":13.03839,"price":328.79,"sector":"Information Technology","shares":19,"position":6247.01},{"rank":136,"ticker":"FISV","momentum":-0.2840630211,"atr":2.5732,"price":100.29,"sector":"Information Technology","shares":97,"position":9728.13},{"rank":137,"ticker":"IFF","momentum":-0.3303973777,"atr":3.7235,"price":132.59,"sector":"Materials","shares":67,"position":8883.53},{"rank":138,"ticker":"NEE","momentum":-0.6311888839,"atr":1.99925,"price":80.19,"sector":"Utilities","shares":125,"position":10023.75},{"rank":139,"ticker":"FIS","momentum":-0.6913446574,"atr":2.992255,"price":105.3,"sector":"Information Technology","shares":83,"position":8739.9},{"rank":140,"ticker":"APD","momentum":-0.9750292663,"atr":6.51956,"price":257.45,"sector":"Materials","shares":38,"position":9783.1},{"rank":141,"ticker":"MHK","momentum":-2.4650842715,"atr":5.198745,"price":141.66,"sector":"Consumer Discretionary","shares":48,"position":6799.68},{"rank":142,"ticker":"MTB","momentum":-2.5782865149,"atr":5.11624,"price":177.86,"sector":"Financials","shares":48,"position":8537.28},{"rank":143,"ticker":"MA","momentum":-2.9738849055,"atr":11.090315,"price":360.14,"sector":"Information Technology","shares":22,"position":7923.08},{"rank":144,"ticker":"AVY","momentum":-3.7904799137,"atr":5.546155,"price":180.01,"sector":"Materials","shares":45,"position":8100.45},{"rank":145,"ticker":"MAS","momentum":-5.5745310145,"atr":1.6461,"price":57.0,"sector":"Industrials","shares":151,"position":8607.0},{"rank":146,"ticker":"KLAC","momentum":-5.7834115723,"atr":16.32556,"price":362.47,"sector":"Information Technology","shares":15,"position":5437.05},{"rank":147,"ticker":"CMI","momentum":-6.9667841344,"atr":6.00377,"price":212.65,"sector":"Industrials","shares":41,"position":8718.65},{"rank":148,"ticker":"FTV","momentum":-10.8145570661,"atr":1.707,"price":63.0,"sector":"Industrials","shares":146,"position":9198.0},{"rank":149,"ticker":"BWA","momentum":-11.3171566373,"atr":1.37775,"price":40.08,"sector":"Consumer Discretionary","shares":181,"position":7254.48},{"rank":150,"ticker":"CDW","momentum":-12.3959994482,"atr":5.110825,"price":175.73,"sector":"Information Technology","shares":48,"position":8435.04},{"rank":151,"ticker":"FDX","momentum":-14.7981603169,"atr":7.999295,"price":222.85,"sector":"Industrials","shares":31,"position":6908.35},{"rank":152,"ticker":"PCAR","momentum":-17.8496031397,"atr":2.33725,"price":88.64,"sector":"Industrials","shares":106,"position":9395.84}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

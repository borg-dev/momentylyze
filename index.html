<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"PCG","momentum":154.5197798356,"atr":0.633495,"price":13.83,"sector":"Utilities","shares":394,"position":5449.02},{"rank":2,"ticker":"CAH","momentum":147.2496545063,"atr":1.8373,"price":68.08,"sector":"Health Care","shares":136,"position":9258.88},{"rank":3,"ticker":"MOH","momentum":113.1111183096,"atr":8.90078,"price":351.86,"sector":"Health Care","shares":28,"position":9852.08},{"rank":4,"ticker":"AES","momentum":69.973896968,"atr":0.969245,"price":23.31,"sector":"Utilities","shares":257,"position":5990.67},{"rank":5,"ticker":"IT","momentum":62.5894659293,"atr":9.26471,"price":278.33,"sector":"Information Technology","shares":26,"position":7236.58},{"rank":6,"ticker":"SCHW","momentum":59.6011025455,"atr":2.472875,"price":68.98,"sector":"Financials","shares":101,"position":6966.98},{"rank":7,"ticker":"RJF","momentum":53.8181678726,"atr":3.49091,"price":100.59,"sector":"Financials","shares":71,"position":7141.89},{"rank":8,"ticker":"GPC","momentum":49.3841526725,"atr":3.68195,"price":154.49,"sector":"Consumer Discretionary","shares":67,"position":10350.83},{"rank":9,"ticker":"CF","momentum":47.3057886743,"atr":5.398825,"price":98.04,"sector":"Materials","shares":46,"position":4509.84},{"rank":10,"ticker":"PFG","momentum":47.2006113645,"atr":2.39675,"price":76.61,"sector":"Financials","shares":104,"position":7967.44},{"rank":11,"ticker":"SBUX","momentum":45.4598905468,"atr":2.66,"price":86.37,"sector":"Consumer Discretionary","shares":93,"position":8032.41},{"rank":12,"ticker":"LW","momentum":39.5160331186,"atr":2.34025,"price":83.99,"sector":"Consumer Staples","shares":106,"position":8902.94},{"rank":13,"ticker":"ORLY","momentum":38.7055516324,"atr":17.179885,"price":731.91,"sector":"Consumer Discretionary","shares":14,"position":10246.74},{"rank":14,"ticker":"COP","momentum":36.1554958633,"atr":4.96002,"price":117.96,"sector":"Energy","shares":50,"position":5898.0},{"rank":15,"ticker":"SJM","momentum":33.6495823099,"atr":2.94257,"price":141.03,"sector":"Consumer Staples","shares":84,"position":11846.52},{"rank":16,"ticker":"MTB","momentum":31.9180520609,"atr":5.49404,"price":185.56,"sector":"Financials","shares":45,"position":8350.2},{"rank":17,"ticker":"CI","momentum":31.5160725026,"atr":6.8692,"price":295.3,"sector":"Health Care","shares":36,"position":10630.8},{"rank":18,"ticker":"HII","momentum":26.4854588885,"atr":6.26886,"price":223.17,"sector":"Industrials","shares":39,"position":8703.63},{"rank":19,"ticker":"DRI","momentum":26.1070583897,"atr":4.46939,"price":130.02,"sector":"Consumer Discretionary","shares":55,"position":7151.1},{"rank":20,"ticker":"MCK","momentum":25.527480825,"atr":8.26856,"price":352.65,"sector":"Health Care","shares":30,"position":10579.5},{"rank":21,"ticker":"CTVA","momentum":23.6184318715,"atr":1.88158,"price":58.73,"sector":"Materials","shares":132,"position":7752.36},{"rank":22,"ticker":"GIS","momentum":21.4617227349,"atr":1.90095,"price":77.71,"sector":"Consumer Staples","shares":131,"position":10180.01},{"rank":23,"ticker":"TJX","momentum":20.0158569516,"atr":1.97928,"price":63.55,"sector":"Consumer Discretionary","shares":126,"position":8007.3},{"rank":24,"ticker":"WMT","momentum":19.0832687587,"atr":3.132955,"price":130.43,"sector":"Consumer Staples","shares":79,"position":10303.97},{"rank":25,"ticker":"HBAN","momentum":18.3252482909,"atr":0.44898,"price":13.67,"sector":"Financials","shares":556,"position":7600.52},{"rank":26,"ticker":"GL","momentum":18.1100232227,"atr":2.559735,"price":109.04,"sector":"Financials","shares":97,"position":10576.88},{"rank":27,"ticker":"ADM","momentum":17.6041546598,"atr":2.89435,"price":83.38,"sector":"Consumer Staples","shares":86,"position":7170.68},{"rank":28,"ticker":"MPC","momentum":15.6784809859,"atr":4.18045,"price":104.1,"sector":"Energy","shares":59,"position":6141.9},{"rank":29,"ticker":"BSX","momentum":14.1438870784,"atr":1.0695,"price":39.98,"sector":"Health Care","shares":233,"position":9315.34},{"rank":30,"ticker":"CMI","momentum":12.8309426198,"atr":6.514,"price":219.25,"sector":"Industrials","shares":38,"position":8331.5},{"rank":31,"ticker":"GILD","momentum":11.4847306571,"atr":1.52417,"price":66.17,"sector":"Health Care","shares":164,"position":10851.88},{"rank":32,"ticker":"DVN","momentum":10.7983378234,"atr":3.4193,"price":68.02,"sector":"Energy","shares":73,"position":4965.46},{"rank":33,"ticker":"AFL","momentum":10.0173575108,"atr":1.53539,"price":59.13,"sector":"Financials","shares":162,"position":9579.06},{"rank":34,"ticker":"NRG","momentum":7.7761974806,"atr":1.28814,"price":41.04,"sector":"Utilities","shares":194,"position":7961.76},{"rank":35,"ticker":"VRTX","momentum":7.2780928613,"atr":8.143925,"price":293.21,"sector":"Health Care","shares":30,"position":8796.3},{"rank":36,"ticker":"HSY","momentum":6.6718553709,"atr":4.6781,"price":222.71,"sector":"Consumer Staples","shares":53,"position":11803.63},{"rank":37,"ticker":"KDP","momentum":4.9382208001,"atr":0.815465,"price":37.33,"sector":"Consumer Staples","shares":306,"position":11422.98},{"rank":38,"ticker":"WFC","momentum":4.3215701994,"atr":1.401125,"price":43.17,"sector":"Financials","shares":178,"position":7684.26},{"rank":39,"ticker":"XOM","momentum":2.8311023133,"atr":3.209405,"price":99.19,"sector":"Energy","shares":77,"position":7637.63},{"rank":40,"ticker":"PCAR","momentum":2.7581034563,"atr":2.3987,"price":88.27,"sector":"Industrials","shares":104,"position":9180.08},{"rank":41,"ticker":"AZO","momentum":2.5881047507,"atr":61.202605,"price":2255.17,"sector":"Consumer Discretionary","shares":4,"position":9020.68},{"rank":42,"ticker":"ALL","momentum":1.988841224,"atr":3.983,"price":132.44,"sector":"Financials","shares":62,"position":8211.28},{"rank":43,"ticker":"MET","momentum":1.4832176464,"atr":1.88267,"price":65.12,"sector":"Financials","shares":132,"position":8595.84},{"rank":44,"ticker":"FMC","momentum":0.908088301,"atr":3.412,"price":110.84,"sector":"Materials","shares":73,"position":8091.32},{"rank":45,"ticker":"SLB","momentum":0.6438588438,"atr":1.7949,"price":42.16,"sector":"Energy","shares":139,"position":5860.24},{"rank":46,"ticker":"CPB","momentum":0.4815410763,"atr":1.06524,"price":50.37,"sector":"Consumer Staples","shares":234,"position":11786.58},{"rank":47,"ticker":"PEP","momentum":0.3425756414,"atr":3.779065,"price":170.19,"sector":"Consumer Staples","shares":66,"position":11232.54},{"rank":48,"ticker":"CAG","momentum":0.310752445,"atr":0.85462,"price":34.29,"sector":"Consumer Staples","shares":292,"position":10012.68},{"rank":49,"ticker":"LLY","momentum":0.2477127943,"atr":10.29481,"price":331.39,"sector":"Health Care","shares":24,"position":7953.36},{"rank":50,"ticker":"CVX","momentum":0.2474234202,"atr":5.150595,"price":160.14,"sector":"Energy","shares":48,"position":7686.72},{"rank":51,"ticker":"WRB","momentum":-0.0000000003,"atr":1.762265,"price":70.1,"sector":"Financials","shares":141,"position":9884.1},{"rank":52,"ticker":"TSCO","momentum":-0.1487043883,"atr":5.746035,"price":198.68,"sector":"Consumer Discretionary","shares":43,"position":8543.24},{"rank":53,"ticker":"MO","momentum":-0.2023759191,"atr":1.10212,"price":45.23,"sector":"Consumer Staples","shares":226,"position":10221.98},{"rank":54,"ticker":"RHI","momentum":-0.4041363473,"atr":2.40965,"price":81.0,"sector":"Industrials","shares":103,"position":8343.0},{"rank":55,"ticker":"MRK","momentum":-0.7518067481,"atr":1.852035,"price":92.18,"sector":"Health Care","shares":134,"position":12352.12},{"rank":56,"ticker":"PSX","momentum":-0.782620063,"atr":3.755215,"price":94.1,"sector":"Energy","shares":66,"position":6210.6},{"rank":57,"ticker":"AMGN","momentum":-2.0282029777,"atr":5.507925,"price":251.34,"sector":"Health Care","shares":45,"position":11310.3}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

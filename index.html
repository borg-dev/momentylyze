<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"CAH","momentum":150.7106739209,"atr":1.6513,"price":68.78,"sector":"Health Care","shares":151,"position":10385.78},{"rank":2,"ticker":"MOH","momentum":105.3747409787,"atr":8.451125,"price":350.45,"sector":"Health Care","shares":29,"position":10163.05},{"rank":3,"ticker":"PCG","momentum":85.0559172828,"atr":0.584705,"price":14.13,"sector":"Utilities","shares":427,"position":6033.51},{"rank":4,"ticker":"AES","momentum":66.392339926,"atr":0.904625,"price":24.89,"sector":"Utilities","shares":276,"position":6869.64},{"rank":5,"ticker":"IT","momentum":57.1738332138,"atr":9.17534,"price":289.88,"sector":"Information Technology","shares":27,"position":7826.76},{"rank":6,"ticker":"KEYS","momentum":52.13035394,"atr":4.3585,"price":160.32,"sector":"Information Technology","shares":57,"position":9138.24},{"rank":7,"ticker":"GPC","momentum":51.6822538485,"atr":3.68271,"price":154.5,"sector":"Consumer Discretionary","shares":67,"position":10351.5},{"rank":8,"ticker":"TT","momentum":50.036027126,"atr":4.49175,"price":147.83,"sector":"Industrials","shares":55,"position":8130.65},{"rank":9,"ticker":"RJF","momentum":48.8381225879,"atr":3.052865,"price":107.35,"sector":"Financials","shares":81,"position":8695.35},{"rank":10,"ticker":"SCHW","momentum":47.2913463845,"atr":2.08643,"price":73.56,"sector":"Financials","shares":119,"position":8753.64},{"rank":11,"ticker":"SBUX","momentum":45.6779671022,"atr":2.59675,"price":87.06,"sector":"Consumer Discretionary","shares":96,"position":8357.76},{"rank":12,"ticker":"NDAQ","momentum":45.6107382799,"atr":1.44875,"price":57.7,"sector":"Financials","shares":172,"position":9924.4},{"rank":13,"ticker":"LW","momentum":41.958270572,"atr":2.284,"price":82.93,"sector":"Consumer Staples","shares":109,"position":9039.37},{"rank":14,"ticker":"ORLY","momentum":39.6353282301,"atr":17.262885,"price":724.57,"sector":"Consumer Discretionary","shares":14,"position":10143.98},{"rank":15,"ticker":"CF","momentum":38.6210035961,"atr":5.019825,"price":106.53,"sector":"Materials","shares":49,"position":5219.97},{"rank":16,"ticker":"XYL","momentum":37.0382799743,"atr":2.816615,"price":88.82,"sector":"Industrials","shares":88,"position":7816.16},{"rank":17,"ticker":"SJM","momentum":36.2228870749,"atr":2.81207,"price":141.35,"sector":"Consumer Staples","shares":88,"position":12438.8},{"rank":18,"ticker":"CDAY","momentum":34.3223367164,"atr":2.366375,"price":57.51,"sector":"Information Technology","shares":105,"position":6038.55},{"rank":19,"ticker":"PFG","momentum":33.7041721493,"atr":2.16069,"price":76.12,"sector":"Financials","shares":115,"position":8753.8},{"rank":20,"ticker":"CI","momentum":32.5237745508,"atr":6.32645,"price":285.73,"sector":"Health Care","shares":39,"position":11143.47},{"rank":21,"ticker":"MCK","momentum":30.0531026925,"atr":8.11125,"price":347.32,"sector":"Health Care","shares":30,"position":10419.6},{"rank":22,"ticker":"AJG","momentum":29.0429016936,"atr":4.01185,"price":176.57,"sector":"Financials","shares":62,"position":10947.34},{"rank":23,"ticker":"HII","momentum":28.1269069768,"atr":5.788925,"price":235.06,"sector":"Industrials","shares":43,"position":10107.58},{"rank":24,"ticker":"FDS","momentum":26.4706128469,"atr":12.0285,"price":412.78,"sector":"Financials","shares":20,"position":8255.6},{"rank":25,"ticker":"GIS","momentum":26.1081983526,"atr":1.85225,"price":76.41,"sector":"Consumer Staples","shares":134,"position":10238.94},{"rank":26,"ticker":"IEX","momentum":24.7789478901,"atr":4.60454,"price":203.69,"sector":"Industrials","shares":54,"position":10999.26},{"rank":27,"ticker":"MTB","momentum":22.4227293827,"atr":5.39309,"price":181.28,"sector":"Financials","shares":46,"position":8338.88},{"rank":28,"ticker":"WMT","momentum":21.0394816752,"atr":2.88899,"price":129.32,"sector":"Consumer Staples","shares":86,"position":11121.52},{"rank":29,"ticker":"DRI","momentum":16.8952531126,"atr":4.228895,"price":126.67,"sector":"Consumer Discretionary","shares":59,"position":7473.53},{"rank":30,"ticker":"TJX","momentum":15.5680303713,"atr":1.853525,"price":64.33,"sector":"Consumer Discretionary","shares":134,"position":8620.22},{"rank":31,"ticker":"GL","momentum":12.6166444206,"atr":2.225985,"price":107.21,"sector":"Financials","shares":112,"position":12007.52},{"rank":32,"ticker":"PGR","momentum":12.432688592,"atr":2.70125,"price":123.73,"sector":"Financials","shares":92,"position":11383.16},{"rank":33,"ticker":"BSX","momentum":12.2370530798,"atr":1.01375,"price":39.64,"sector":"Health Care","shares":246,"position":9751.44},{"rank":34,"ticker":"AMP","momentum":12.1414283287,"atr":8.416125,"price":272.9,"sector":"Financials","shares":29,"position":7914.1},{"rank":35,"ticker":"BRO","momentum":11.0041956109,"atr":1.513975,"price":62.07,"sector":"Financials","shares":165,"position":10241.55},{"rank":36,"ticker":"CTVA","momentum":10.8785810907,"atr":1.75533,"price":61.05,"sector":"Materials","shares":142,"position":8669.1},{"rank":37,"ticker":"HSY","momentum":9.4437694334,"atr":4.3216,"price":223.55,"sector":"Consumer Staples","shares":57,"position":12742.35},{"rank":38,"ticker":"COP","momentum":8.9355446264,"atr":4.60902,"price":116.8,"sector":"Energy","shares":54,"position":6307.2},{"rank":39,"ticker":"VRTX","momentum":8.6105103677,"atr":8.029425,"price":294.54,"sector":"Health Care","shares":31,"position":9130.74},{"rank":40,"ticker":"CMI","momentum":8.2515014003,"atr":5.909135,"price":219.24,"sector":"Industrials","shares":42,"position":9208.08},{"rank":41,"ticker":"LOW","momentum":7.466632588,"atr":5.660745,"price":194.9,"sector":"Consumer Discretionary","shares":44,"position":8575.6},{"rank":42,"ticker":"ADM","momentum":7.2101312757,"atr":2.43025,"price":86.61,"sector":"Consumer Staples","shares":102,"position":8834.22},{"rank":43,"ticker":"GILD","momentum":7.0610509403,"atr":1.51246,"price":64.46,"sector":"Health Care","shares":165,"position":10635.9},{"rank":44,"ticker":"NOC","momentum":6.7307483002,"atr":14.179195,"price":503.83,"sector":"Industrials","shares":17,"position":8565.11},{"rank":45,"ticker":"CBOE","momentum":6.3384641563,"atr":2.739465,"price":118.71,"sector":"Financials","shares":91,"position":10802.61},{"rank":46,"ticker":"AON","momentum":5.4321661286,"atr":6.281245,"price":279.59,"sector":"Financials","shares":39,"position":10904.01},{"rank":47,"ticker":"WTW","momentum":3.1738473791,"atr":5.444,"price":205.92,"sector":"Financials","shares":45,"position":9266.4},{"rank":48,"ticker":"MPC","momentum":2.9518998718,"atr":3.74995,"price":106.06,"sector":"Energy","shares":66,"position":6999.96},{"rank":49,"ticker":"AZO","momentum":2.2774321152,"atr":61.154355,"price":2233.54,"sector":"Consumer Discretionary","shares":4,"position":8934.16},{"rank":50,"ticker":"PCAR","momentum":1.3274612052,"atr":2.283,"price":87.88,"sector":"Industrials","shares":109,"position":9578.92},{"rank":51,"ticker":"NRG","momentum":1.2932324309,"atr":1.20264,"price":41.01,"sector":"Utilities","shares":207,"position":8489.07},{"rank":52,"ticker":"DVN","momentum":1.1799269646,"atr":3.34765,"price":70.35,"sector":"Energy","shares":74,"position":5205.9},{"rank":53,"ticker":"ROL","momentum":1.1107402636,"atr":0.8342,"price":36.45,"sector":"Industrials","shares":299,"position":10898.55},{"rank":54,"ticker":"GD","momentum":0.8759458508,"atr":5.497065,"price":225.41,"sector":"Industrials","shares":45,"position":10143.45},{"rank":55,"ticker":"LLY","momentum":0.1958565744,"atr":9.65436,"price":323.89,"sector":"Health Care","shares":25,"position":8097.25},{"rank":56,"ticker":"XOM","momentum":0.1836042031,"atr":3.215405,"price":98.84,"sector":"Energy","shares":77,"position":7610.68},{"rank":57,"ticker":"DHI","momentum":0.176472362,"atr":2.54575,"price":72.21,"sector":"Consumer Discretionary","shares":98,"position":7076.58},{"rank":58,"ticker":"ALL","momentum":0.0968736432,"atr":3.48275,"price":131.39,"sector":"Financials","shares":71,"position":9328.69},{"rank":59,"ticker":"FMC","momentum":-0.0060940644,"atr":3.10125,"price":112.42,"sector":"Materials","shares":80,"position":8993.6},{"rank":60,"ticker":"CVX","momentum":-0.0196339016,"atr":4.801805,"price":157.14,"sector":"Energy","shares":52,"position":8171.28},{"rank":61,"ticker":"SLB","momentum":-0.1241366884,"atr":1.7956,"price":42.13,"sector":"Energy","shares":139,"position":5856.07},{"rank":62,"ticker":"WRB","momentum":-0.6549979328,"atr":1.511265,"price":67.59,"sector":"Financials","shares":165,"position":11152.35},{"rank":63,"ticker":"TSCO","momentum":-0.6676901185,"atr":5.767035,"price":195.63,"sector":"Consumer Discretionary","shares":43,"position":8412.09},{"rank":64,"ticker":"MRK","momentum":-1.7392379227,"atr":1.747295,"price":90.48,"sector":"Health Care","shares":143,"position":12938.64},{"rank":65,"ticker":"PSX","momentum":-5.7337010745,"atr":3.633215,"price":91.11,"sector":"Energy","shares":68,"position":6195.48}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

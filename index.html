<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":77.4597140628,"atr":2.31025,"price":96.26,"sector":"Consumer Staples","shares":108,"position":10396.08},{"rank":2,"ticker":"T","momentum":50.6738496953,"atr":0.43675,"price":20.8,"sector":"Communication Services","shares":572,"position":11897.6},{"rank":3,"ticker":"MRK","momentum":39.2427449261,"atr":2.071865,"price":92.36,"sector":"Health Care","shares":120,"position":11083.2},{"rank":4,"ticker":"K","momentum":32.1547036753,"atr":1.463585,"price":71.95,"sector":"Consumer Staples","shares":170,"position":12231.5},{"rank":5,"ticker":"LLY","momentum":29.5626989674,"atr":8.30537,"price":326.2,"sector":"Health Care","shares":30,"position":9786.0},{"rank":6,"ticker":"VICI","momentum":25.0357903467,"atr":0.810135,"price":32.91,"sector":"Real Estate","shares":308,"position":10136.28},{"rank":7,"ticker":"CI","momentum":22.3782011862,"atr":7.72822,"price":274.6,"sector":"Health Care","shares":32,"position":8787.2},{"rank":8,"ticker":"AMCR","momentum":18.9267177412,"atr":0.29525,"price":12.63,"sector":"Materials","shares":846,"position":10684.98},{"rank":9,"ticker":"CPB","momentum":17.4258680838,"atr":0.93927,"price":48.42,"sector":"Consumer Staples","shares":266,"position":12879.72},{"rank":10,"ticker":"GIS","momentum":14.0064699043,"atr":1.521205,"price":74.37,"sector":"Consumer Staples","shares":164,"position":12196.68},{"rank":11,"ticker":"GPC","momentum":13.1513981457,"atr":2.830975,"price":141.79,"sector":"Consumer Discretionary","shares":88,"position":12477.52},{"rank":12,"ticker":"VRTX","momentum":9.5466561331,"atr":8.231155,"price":289.6,"sector":"Health Care","shares":30,"position":8688.0},{"rank":13,"ticker":"MCK","momentum":7.8192612606,"atr":8.153535,"price":329.97,"sector":"Health Care","shares":30,"position":9899.1},{"rank":14,"ticker":"KMB","momentum":7.557846549,"atr":2.428815,"price":132.24,"sector":"Consumer Staples","shares":102,"position":13488.48},{"rank":15,"ticker":"XOM","momentum":7.2378139327,"atr":3.63031,"price":88.27,"sector":"Energy","shares":68,"position":6002.36},{"rank":16,"ticker":"BF.B","momentum":6.3618372342,"atr":1.398235,"price":71.4,"sector":"Consumer Staples","shares":178,"position":12709.2},{"rank":17,"ticker":"TMUS","momentum":6.3481913983,"atr":3.42615,"price":137.52,"sector":"Communication Services","shares":72,"position":9901.44},{"rank":18,"ticker":"NOC","momentum":5.5636826681,"atr":13.11511,"price":457.39,"sector":"Industrials","shares":19,"position":8690.41},{"rank":19,"ticker":"TAP","momentum":4.4320485782,"atr":1.476475,"price":58.57,"sector":"Consumer Staples","shares":169,"position":9898.33},{"rank":20,"ticker":"WAT","momentum":4.0748077622,"atr":8.86998,"price":330.76,"sector":"Health Care","shares":28,"position":9261.28},{"rank":21,"ticker":"GILD","momentum":3.2223012695,"atr":1.167785,"price":62.12,"sector":"Health Care","shares":214,"position":13293.68},{"rank":22,"ticker":"AZO","momentum":3.1186722027,"atr":54.54595,"price":2224.32,"sector":"Consumer Discretionary","shares":4,"position":8897.28},{"rank":23,"ticker":"DG","momentum":2.7689981621,"atr":5.70645,"price":245.35,"sector":"Consumer Discretionary","shares":43,"position":10550.05},{"rank":24,"ticker":"STZ","momentum":2.2276177992,"atr":6.154335,"price":244.73,"sector":"Consumer Staples","shares":40,"position":9789.2},{"rank":25,"ticker":"MCD","momentum":0.9945200283,"atr":4.487345,"price":256.5,"sector":"Consumer Discretionary","shares":55,"position":14107.5},{"rank":26,"ticker":"ROL","momentum":0.9645597396,"atr":0.87115,"price":36.44,"sector":"Industrials","shares":286,"position":10421.84},{"rank":27,"ticker":"AMT","momentum":0.674603348,"atr":7.39475,"price":257.16,"sector":"Real Estate","shares":33,"position":8486.28},{"rank":28,"ticker":"SYY","momentum":0.6121134103,"atr":2.053495,"price":87.36,"sector":"Consumer Staples","shares":121,"position":10570.56},{"rank":29,"ticker":"AMGN","momentum":0.5906409472,"atr":4.07748,"price":247.32,"sector":"Health Care","shares":61,"position":15086.52},{"rank":30,"ticker":"EA","momentum":0.5163079401,"atr":2.771625,"price":126.75,"sector":"Communication Services","shares":90,"position":11407.5},{"rank":31,"ticker":"CTLT","momentum":0.3134961445,"atr":3.68314,"price":102.72,"sector":"Health Care","shares":67,"position":6882.24},{"rank":32,"ticker":"PEP","momentum":0.0066415332,"atr":3.113505,"price":170.06,"sector":"Consumer Staples","shares":80,"position":13604.8},{"rank":33,"ticker":"HSY","momentum":0.001232492,"atr":3.980545,"price":216.11,"sector":"Consumer Staples","shares":62,"position":13398.82},{"rank":34,"ticker":"SNPS","momentum":-0.0007259921,"atr":9.53099,"price":323.51,"sector":"Information Technology","shares":26,"position":8411.26},{"rank":35,"ticker":"ULTA","momentum":-0.0025566765,"atr":11.979645,"price":402.36,"sector":"Consumer Discretionary","shares":20,"position":8047.2},{"rank":36,"ticker":"CBOE","momentum":-0.0035311261,"atr":2.7035,"price":121.86,"sector":"Financials","shares":92,"position":11211.12},{"rank":37,"ticker":"O","momentum":-0.0466298348,"atr":1.396315,"price":70.08,"sector":"Real Estate","shares":179,"position":12544.32},{"rank":38,"ticker":"MAS","momentum":-0.0646182346,"atr":1.48155,"price":54.32,"sector":"Industrials","shares":168,"position":9125.76},{"rank":39,"ticker":"INCY","momentum":-0.0809337313,"atr":2.062495,"price":81.36,"sector":"Health Care","shares":121,"position":9844.56},{"rank":40,"ticker":"CDNS","momentum":-0.1032810366,"atr":5.2865,"price":161.58,"sector":"Information Technology","shares":47,"position":7594.26},{"rank":41,"ticker":"PFE","momentum":-0.1270100559,"atr":1.30491,"price":51.37,"sector":"Health Care","shares":191,"position":9811.67},{"rank":42,"ticker":"CNC","momentum":-0.1495938853,"atr":2.510535,"price":91.35,"sector":"Health Care","shares":99,"position":9043.65},{"rank":43,"ticker":"PWR","momentum":-0.1645704829,"atr":5.13073,"price":131.11,"sector":"Industrials","shares":48,"position":6293.28},{"rank":44,"ticker":"CMI","momentum":-0.3065853723,"atr":6.104165,"price":205.05,"sector":"Industrials","shares":40,"position":8202.0},{"rank":45,"ticker":"ELV","momentum":-0.3328743917,"atr":14.644,"price":497.43,"sector":"Health Care","shares":17,"position":8456.31},{"rank":46,"ticker":"UNH","momentum":-0.4592913162,"atr":15.604,"price":533.45,"sector":"Health Care","shares":16,"position":8535.2},{"rank":47,"ticker":"DRE","momentum":-1.0050950968,"atr":1.7185,"price":58.89,"sector":"Real Estate","shares":145,"position":8539.05},{"rank":48,"ticker":"YUM","momentum":-1.2575155732,"atr":2.31367,"price":119.91,"sector":"Consumer Discretionary","shares":108,"position":12950.28},{"rank":49,"ticker":"AVY","momentum":-2.0625699985,"atr":4.47322,"price":171.65,"sector":"Materials","shares":55,"position":9440.75},{"rank":50,"ticker":"ADP","momentum":-2.3122646599,"atr":5.27943,"price":218.95,"sector":"Information Technology","shares":47,"position":10290.65},{"rank":51,"ticker":"GL","momentum":-2.3473935684,"atr":2.37171,"price":100.5,"sector":"Financials","shares":105,"position":10552.5},{"rank":52,"ticker":"PHM","momentum":-2.36957534,"atr":1.713885,"price":44.55,"sector":"Consumer Discretionary","shares":145,"position":6459.75},{"rank":53,"ticker":"AJG","momentum":-2.7292579948,"atr":3.79425,"price":166.52,"sector":"Financials","shares":65,"position":10823.8},{"rank":54,"ticker":"NEE","momentum":-2.8360694382,"atr":2.056845,"price":78.93,"sector":"Utilities","shares":121,"position":9550.53},{"rank":55,"ticker":"JKHY","momentum":-3.3274378462,"atr":3.912895,"price":194.45,"sector":"Information Technology","shares":63,"position":12250.35},{"rank":56,"ticker":"ADI","momentum":-3.3298732255,"atr":4.7315,"price":161.45,"sector":"Information Technology","shares":52,"position":8395.4},{"rank":57,"ticker":"ON","momentum":-3.3664909549,"atr":2.597575,"price":58.78,"sector":"Information Technology","shares":96,"position":5642.88},{"rank":58,"ticker":"TJX","momentum":-4.2631988078,"atr":1.67136,"price":62.65,"sector":"Consumer Discretionary","shares":149,"position":9334.85},{"rank":59,"ticker":"KLAC","momentum":-4.6981893297,"atr":14.21187,"price":345.58,"sector":"Information Technology","shares":17,"position":5874.86},{"rank":60,"ticker":"BR","momentum":-4.7965533656,"atr":3.7301,"price":152.34,"sector":"Information Technology","shares":67,"position":10206.78},{"rank":61,"ticker":"V","momentum":-5.5012915572,"atr":5.723005,"price":213.66,"sector":"Information Technology","shares":43,"position":9187.38},{"rank":62,"ticker":"IQV","momentum":-6.1880501217,"atr":6.387425,"price":220.5,"sector":"Health Care","shares":39,"position":8599.5},{"rank":63,"ticker":"MPWR","momentum":-7.3541550763,"atr":18.206775,"price":426.24,"sector":"Information Technology","shares":13,"position":5541.12},{"rank":64,"ticker":"ORLY","momentum":-7.8174551905,"atr":15.107745,"price":689.32,"sector":"Consumer Discretionary","shares":16,"position":11029.12},{"rank":65,"ticker":"IEX","momentum":-8.9443796745,"atr":4.537,"price":189.39,"sector":"Industrials","shares":55,"position":10416.45},{"rank":66,"ticker":"FISV","momentum":-9.0820477293,"atr":2.646,"price":97.56,"sector":"Information Technology","shares":94,"position":9170.64},{"rank":67,"ticker":"HWM","momentum":-9.3807049736,"atr":1.12561,"price":34.48,"sector":"Industrials","shares":222,"position":7654.56},{"rank":68,"ticker":"SBUX","momentum":-10.0957099691,"atr":2.06448,"price":82.55,"sector":"Consumer Discretionary","shares":121,"position":9988.55},{"rank":69,"ticker":"DHI","momentum":-10.799859792,"atr":2.73176,"price":74.28,"sector":"Consumer Discretionary","shares":91,"position":6759.48},{"rank":70,"ticker":"KEYS","momentum":-12.7976043147,"atr":3.850955,"price":147.55,"sector":"Information Technology","shares":64,"position":9443.2},{"rank":71,"ticker":"LEN","momentum":-12.8533044365,"atr":2.95268,"price":79.35,"sector":"Consumer Discretionary","shares":84,"position":6665.4},{"rank":72,"ticker":"NVR","momentum":-14.2139577016,"atr":149.389515,"price":4458.29,"sector":"Consumer Discretionary","shares":1,"position":4458.29},{"rank":73,"ticker":"FDS","momentum":-14.3793915503,"atr":11.30451,"price":399.67,"sector":"Financials","shares":22,"position":8792.74},{"rank":74,"ticker":"FRC","momentum":-15.0556027494,"atr":4.201625,"price":157.55,"sector":"Financials","shares":59,"position":9295.45},{"rank":75,"ticker":"CPRT","momentum":-15.2547305736,"atr":3.09465,"price":121.41,"sector":"Industrials","shares":80,"position":9712.8},{"rank":76,"ticker":"RMD","momentum":-16.4308785784,"atr":5.33176,"price":224.76,"sector":"Health Care","shares":46,"position":10338.96},{"rank":77,"ticker":"DFS","momentum":-16.6396709776,"atr":3.544735,"price":108.82,"sector":"Financials","shares":70,"position":7617.4},{"rank":78,"ticker":"COST","momentum":-21.7628605205,"atr":12.480325,"price":520.23,"sector":"Consumer Staples","shares":20,"position":10404.6},{"rank":79,"ticker":"GS","momentum":-22.3767180227,"atr":9.648915,"price":318.05,"sector":"Financials","shares":25,"position":7951.25}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

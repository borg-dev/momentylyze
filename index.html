<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"PCG","momentum":173.1681189534,"atr":0.628995,"price":14.16,"sector":"Utilities","shares":397,"position":5621.52},{"rank":2,"ticker":"CAH","momentum":144.4263361322,"atr":1.8028,"price":68.22,"sector":"Health Care","shares":138,"position":9414.36},{"rank":3,"ticker":"MOH","momentum":113.6730204193,"atr":8.72578,"price":352.46,"sector":"Health Care","shares":28,"position":9868.88},{"rank":4,"ticker":"AES","momentum":69.6655211416,"atr":0.976745,"price":23.88,"sector":"Utilities","shares":255,"position":6089.4},{"rank":5,"ticker":"IT","momentum":62.5438690929,"atr":9.51996,"price":285.61,"sector":"Information Technology","shares":26,"position":7425.86},{"rank":6,"ticker":"RJF","momentum":53.0412786182,"atr":3.45291,"price":100.87,"sector":"Financials","shares":72,"position":7262.64},{"rank":7,"ticker":"PFG","momentum":51.4927663176,"atr":2.40675,"price":78.22,"sector":"Financials","shares":103,"position":8056.66},{"rank":8,"ticker":"GPC","momentum":49.5740175298,"atr":3.6682,"price":158.24,"sector":"Consumer Discretionary","shares":68,"position":10760.32},{"rank":9,"ticker":"COP","momentum":49.5468304363,"atr":4.93177,"price":118.36,"sector":"Energy","shares":50,"position":5918.0},{"rank":10,"ticker":"CF","momentum":45.7124993556,"atr":5.16375,"price":98.88,"sector":"Materials","shares":48,"position":4746.24},{"rank":11,"ticker":"SBUX","momentum":45.587569841,"atr":2.7165,"price":88.9,"sector":"Consumer Discretionary","shares":92,"position":8178.8},{"rank":12,"ticker":"TT","momentum":41.918677479,"atr":4.92175,"price":147.42,"sector":"Industrials","shares":50,"position":7371.0},{"rank":13,"ticker":"KEYS","momentum":40.53161608,"atr":4.7215,"price":159.11,"sector":"Information Technology","shares":52,"position":8273.72},{"rank":14,"ticker":"LW","momentum":38.9660155633,"atr":2.30575,"price":84.55,"sector":"Consumer Staples","shares":108,"position":9131.4},{"rank":15,"ticker":"ORLY","momentum":37.9406367928,"atr":16.809635,"price":736.27,"sector":"Consumer Discretionary","shares":14,"position":10307.78},{"rank":16,"ticker":"MTB","momentum":35.2375701896,"atr":5.43454,"price":187.9,"sector":"Financials","shares":46,"position":8643.4},{"rank":17,"ticker":"SJM","momentum":32.9038165665,"atr":3.00207,"price":139.97,"sector":"Consumer Staples","shares":83,"position":11617.51},{"rank":18,"ticker":"XYL","momentum":32.9005777532,"atr":2.986615,"price":90.55,"sector":"Industrials","shares":83,"position":7515.65},{"rank":19,"ticker":"CI","momentum":30.825419187,"atr":7.0332,"price":289.92,"sector":"Health Care","shares":35,"position":10147.2},{"rank":20,"ticker":"DRI","momentum":28.5282636405,"atr":4.398885,"price":131.94,"sector":"Consumer Discretionary","shares":56,"position":7388.64},{"rank":21,"ticker":"CTVA","momentum":27.7674777713,"atr":1.93633,"price":60.36,"sector":"Materials","shares":129,"position":7786.44},{"rank":22,"ticker":"HII","momentum":26.0375394943,"atr":6.47761,"price":228.01,"sector":"Industrials","shares":38,"position":8664.38},{"rank":23,"ticker":"IEX","momentum":25.5545221926,"atr":5.33425,"price":203.58,"sector":"Industrials","shares":46,"position":9364.68},{"rank":24,"ticker":"MCK","momentum":24.347802999,"atr":7.98531,"price":354.49,"sector":"Health Care","shares":31,"position":10989.19},{"rank":25,"ticker":"MPC","momentum":23.3009874353,"atr":4.1467,"price":105.37,"sector":"Energy","shares":60,"position":6322.2},{"rank":26,"ticker":"AMP","momentum":21.4948115424,"atr":9.85682,"price":267.05,"sector":"Financials","shares":25,"position":6676.25},{"rank":27,"ticker":"TJX","momentum":21.4364666979,"atr":2.05078,"price":65.89,"sector":"Consumer Discretionary","shares":121,"position":7972.69},{"rank":28,"ticker":"ADM","momentum":21.2638887772,"atr":2.85635,"price":85.76,"sector":"Consumer Staples","shares":87,"position":7461.12},{"rank":29,"ticker":"AJG","momentum":20.8230546554,"atr":4.5875,"price":175.08,"sector":"Financials","shares":54,"position":9454.32},{"rank":30,"ticker":"HBAN","momentum":20.6386287889,"atr":0.44173,"price":13.85,"sector":"Financials","shares":565,"position":7825.25},{"rank":31,"ticker":"GIS","momentum":20.1089562878,"atr":1.9457,"price":77.41,"sector":"Consumer Staples","shares":128,"position":9908.48},{"rank":32,"ticker":"GL","momentum":19.6744405048,"atr":2.585735,"price":110.64,"sector":"Financials","shares":96,"position":10621.44},{"rank":33,"ticker":"WMT","momentum":17.8186960428,"atr":3.13821,"price":131.37,"sector":"Consumer Staples","shares":79,"position":10378.23},{"rank":34,"ticker":"DVN","momentum":16.593109133,"atr":3.40267,"price":69.8,"sector":"Energy","shares":73,"position":5095.4},{"rank":35,"ticker":"BSX","momentum":14.6978563664,"atr":1.0625,"price":40.86,"sector":"Health Care","shares":235,"position":9602.1},{"rank":36,"ticker":"GWW","momentum":14.456834357,"atr":15.038495,"price":517.23,"sector":"Industrials","shares":16,"position":8275.68},{"rank":37,"ticker":"PGR","momentum":14.432212325,"atr":3.638245,"price":119.59,"sector":"Financials","shares":68,"position":8132.12},{"rank":38,"ticker":"CMI","momentum":14.2659700952,"atr":6.457335,"price":220.11,"sector":"Industrials","shares":38,"position":8364.18},{"rank":39,"ticker":"ADP","momentum":13.210143774,"atr":5.9863,"price":233.08,"sector":"Information Technology","shares":41,"position":9556.28},{"rank":40,"ticker":"GILD","momentum":12.5951368134,"atr":1.51092,"price":66.38,"sector":"Health Care","shares":165,"position":10952.7},{"rank":41,"ticker":"RF","momentum":11.6219516088,"atr":0.71295,"price":21.25,"sector":"Financials","shares":350,"position":7437.5},{"rank":42,"ticker":"NRG","momentum":11.5569062937,"atr":1.31889,"price":41.91,"sector":"Utilities","shares":189,"position":7920.99},{"rank":43,"ticker":"AFL","momentum":10.8134479103,"atr":1.52089,"price":59.63,"sector":"Financials","shares":164,"position":9779.32},{"rank":44,"ticker":"A","momentum":9.8382968233,"atr":3.84036,"price":130.56,"sector":"Health Care","shares":65,"position":8486.4},{"rank":45,"ticker":"LOW","momentum":9.7439367555,"atr":5.68261,"price":194.09,"sector":"Consumer Discretionary","shares":43,"position":8345.87},{"rank":46,"ticker":"URI","momentum":8.7317651024,"atr":12.285725,"price":287.84,"sector":"Industrials","shares":20,"position":5756.8},{"rank":47,"ticker":"VRTX","momentum":7.3254643182,"atr":7.899925,"price":297.02,"sector":"Health Care","shares":31,"position":9207.62},{"rank":48,"ticker":"MGM","momentum":7.2040706755,"atr":1.5155,"price":32.25,"sector":"Consumer Discretionary","shares":164,"position":5289.0},{"rank":49,"ticker":"JCI","momentum":7.0914082157,"atr":1.7955,"price":52.45,"sector":"Industrials","shares":139,"position":7290.55},{"rank":50,"ticker":"ADSK","momentum":6.525136141,"atr":7.27397,"price":198.7,"sector":"Information Technology","shares":34,"position":6755.8},{"rank":51,"ticker":"HSY","momentum":6.0678592534,"atr":4.6137,"price":225.72,"sector":"Consumer Staples","shares":54,"position":12188.88},{"rank":52,"ticker":"WFC","momentum":5.5623657184,"atr":1.442125,"price":43.96,"sector":"Financials","shares":173,"position":7605.08},{"rank":53,"ticker":"XOM","momentum":5.2220450922,"atr":3.223905,"price":100.62,"sector":"Energy","shares":77,"position":7747.74},{"rank":54,"ticker":"SYK","momentum":4.9663557519,"atr":6.77216,"price":215.63,"sector":"Health Care","shares":36,"position":7762.68},{"rank":55,"ticker":"IR","momentum":4.7449841594,"atr":1.7915,"price":46.73,"sector":"Industrials","shares":139,"position":6495.47},{"rank":56,"ticker":"KDP","momentum":4.6569867287,"atr":0.801715,"price":37.76,"sector":"Consumer Staples","shares":311,"position":11743.36},{"rank":57,"ticker":"HLT","momentum":4.3045364188,"atr":4.53275,"price":126.41,"sector":"Consumer Discretionary","shares":55,"position":6952.55},{"rank":58,"ticker":"WTW","momentum":4.189229027,"atr":6.02175,"price":207.07,"sector":"Financials","shares":41,"position":8489.87},{"rank":59,"ticker":"CBOE","momentum":3.7371272767,"atr":2.9782,"price":120.15,"sector":"Financials","shares":83,"position":9972.45},{"rank":60,"ticker":"PCAR","momentum":3.2991077497,"atr":2.3772,"price":88.85,"sector":"Industrials","shares":105,"position":9329.25},{"rank":61,"ticker":"ALL","momentum":2.9901557241,"atr":3.97875,"price":133.5,"sector":"Financials","shares":62,"position":8277.0},{"rank":62,"ticker":"AZO","momentum":2.7641902714,"atr":55.95845,"price":2289.79,"sector":"Consumer Discretionary","shares":4,"position":9159.16},{"rank":63,"ticker":"SLB","momentum":2.3610930086,"atr":1.76065,"price":42.86,"sector":"Energy","shares":141,"position":6043.26},{"rank":64,"ticker":"MET","momentum":2.2723389107,"atr":1.87642,"price":66.27,"sector":"Financials","shares":133,"position":8813.91},{"rank":65,"ticker":"GD","momentum":2.1574004285,"atr":6.169495,"price":228.84,"sector":"Industrials","shares":40,"position":9153.6},{"rank":66,"ticker":"FMC","momentum":1.8968363958,"atr":3.405,"price":114.45,"sector":"Materials","shares":73,"position":8354.85},{"rank":67,"ticker":"ULTA","momentum":1.6007680706,"atr":12.13335,"price":402.54,"sector":"Consumer Discretionary","shares":20,"position":8050.8},{"rank":68,"ticker":"UNH","momentum":1.5702111572,"atr":13.497995,"price":521.88,"sector":"Health Care","shares":18,"position":9393.84},{"rank":69,"ticker":"ROL","momentum":0.8910575066,"atr":0.9462,"price":36.14,"sector":"Industrials","shares":264,"position":9540.96},{"rank":70,"ticker":"CVX","momentum":0.8130587215,"atr":5.181595,"price":161.31,"sector":"Energy","shares":48,"position":7742.88},{"rank":71,"ticker":"K","momentum":0.5744105929,"atr":1.6304,"price":72.22,"sector":"Consumer Staples","shares":153,"position":11049.66},{"rank":72,"ticker":"CPB","momentum":0.4906259452,"atr":1.09799,"price":50.01,"sector":"Consumer Staples","shares":227,"position":11352.27},{"rank":73,"ticker":"SYF","momentum":0.4524441466,"atr":1.23325,"price":32.17,"sector":"Financials","shares":202,"position":6498.34},{"rank":74,"ticker":"LLY","momentum":0.3395386769,"atr":10.04231,"price":332.76,"sector":"Health Care","shares":24,"position":7986.24},{"rank":75,"ticker":"PEP","momentum":0.32458369,"atr":3.833565,"price":172.73,"sector":"Consumer Staples","shares":65,"position":11227.45},{"rank":76,"ticker":"CAG","momentum":0.2343204407,"atr":0.86412,"price":34.25,"sector":"Consumer Staples","shares":289,"position":9898.25},{"rank":77,"ticker":"WRB","momentum":0.0194603104,"atr":1.773,"price":71.3,"sector":"Financials","shares":141,"position":10053.3},{"rank":78,"ticker":"BAC","momentum":-0.0000058044,"atr":1.137655,"price":33.62,"sector":"Financials","shares":219,"position":7362.78},{"rank":79,"ticker":"HIG","momentum":-0.0655807734,"atr":1.72925,"price":66.02,"sector":"Financials","shares":144,"position":9506.88},{"rank":80,"ticker":"RHI","momentum":-0.0822396384,"atr":2.38565,"price":82.0,"sector":"Industrials","shares":104,"position":8528.0},{"rank":81,"ticker":"TSCO","momentum":-0.0823020851,"atr":5.757285,"price":201.71,"sector":"Consumer Discretionary","shares":43,"position":8673.53},{"rank":82,"ticker":"VLO","momentum":-0.1064503536,"atr":5.568845,"price":115.5,"sector":"Energy","shares":44,"position":5082.0},{"rank":83,"ticker":"RE","momentum":-0.1781179278,"atr":8.7695,"price":273.65,"sector":"Financials","shares":28,"position":7662.2},{"rank":84,"ticker":"PSX","momentum":-0.2242992425,"atr":3.769715,"price":95.46,"sector":"Energy","shares":66,"position":6300.36},{"rank":85,"ticker":"MRK","momentum":-0.4951117194,"atr":1.857535,"price":94.12,"sector":"Health Care","shares":134,"position":12612.08},{"rank":86,"ticker":"RL","momentum":-0.8961860184,"atr":3.95297,"price":94.94,"sector":"Consumer Discretionary","shares":63,"position":5981.22},{"rank":87,"ticker":"CB","momentum":-0.9043058857,"atr":5.21566,"price":192.69,"sector":"Financials","shares":47,"position":9056.43},{"rank":88,"ticker":"TRV","momentum":-1.0688754399,"atr":4.01789,"price":164.8,"sector":"Financials","shares":62,"position":10217.6},{"rank":89,"ticker":"AMGN","momentum":-1.5119754162,"atr":5.502175,"price":252.93,"sector":"Health Care","shares":45,"position":11381.85},{"rank":90,"ticker":"JPM","momentum":-2.1128930474,"atr":3.9441,"price":115.86,"sector":"Financials","shares":63,"position":7299.18},{"rank":91,"ticker":"ABBV","momentum":-4.6414289884,"atr":3.903905,"price":144.41,"sector":"Health Care","shares":64,"position":9242.24}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

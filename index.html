<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"T","momentum":61.3253182853,"atr":0.51092,"price":21.17,"sector":"Communication Services","shares":489,"position":10352.13},{"rank":2,"ticker":"MRK","momentum":52.7076261786,"atr":2.048625,"price":92.64,"sector":"Health Care","shares":122,"position":11302.08},{"rank":3,"ticker":"MNST","momentum":49.0097481734,"atr":2.6021,"price":96.11,"sector":"Consumer Staples","shares":96,"position":9226.56},{"rank":4,"ticker":"LLY","momentum":39.1305352464,"atr":9.05425,"price":327.18,"sector":"Health Care","shares":27,"position":8833.86},{"rank":5,"ticker":"IBM","momentum":30.8642875659,"atr":3.07332,"price":137.62,"sector":"Information Technology","shares":81,"position":11147.22},{"rank":6,"ticker":"AMCR","momentum":28.939809202,"atr":0.320135,"price":12.44,"sector":"Materials","shares":780,"position":9703.2},{"rank":7,"ticker":"K","momentum":27.5735970158,"atr":1.613835,"price":72.27,"sector":"Consumer Staples","shares":154,"position":11129.58},{"rank":8,"ticker":"MCK","momentum":22.6843205919,"atr":7.80585,"price":322.38,"sector":"Health Care","shares":32,"position":10316.16},{"rank":9,"ticker":"CI","momentum":22.5728066545,"atr":7.468875,"price":264.84,"sector":"Health Care","shares":33,"position":8739.72},{"rank":10,"ticker":"WRB","momentum":20.8801959969,"atr":1.74025,"price":67.81,"sector":"Financials","shares":143,"position":9696.83},{"rank":11,"ticker":"BMY","momentum":20.0090819941,"atr":1.507955,"price":75.96,"sector":"Health Care","shares":165,"position":12533.4},{"rank":12,"ticker":"GPC","momentum":18.8091024856,"atr":3.21888,"price":135.24,"sector":"Consumer Discretionary","shares":77,"position":10413.48},{"rank":13,"ticker":"VICI","momentum":16.4864594233,"atr":1.10646,"price":30.7,"sector":"Real Estate","shares":225,"position":6907.5},{"rank":14,"ticker":"CPB","momentum":14.7820600209,"atr":1.201,"price":48.25,"sector":"Consumer Staples","shares":208,"position":10036.0},{"rank":15,"ticker":"VRTX","momentum":12.7533550315,"atr":9.00662,"price":288.98,"sector":"Health Care","shares":27,"position":7802.46},{"rank":16,"ticker":"STZ","momentum":11.3724834924,"atr":6.008115,"price":236.71,"sector":"Consumer Staples","shares":41,"position":9705.11},{"rank":17,"ticker":"TMUS","momentum":6.9346113043,"atr":3.96697,"price":137.56,"sector":"Communication Services","shares":63,"position":8666.28},{"rank":18,"ticker":"DG","momentum":6.7999936572,"atr":5.739225,"price":250.05,"sector":"Consumer Discretionary","shares":43,"position":10752.15},{"rank":19,"ticker":"GIS","momentum":6.2402135285,"atr":1.656145,"price":75.15,"sector":"Consumer Staples","shares":150,"position":11272.5},{"rank":20,"ticker":"PGR","momentum":6.1158491065,"atr":3.177,"price":117.14,"sector":"Financials","shares":78,"position":9136.92},{"rank":21,"ticker":"NOC","momentum":4.9654745298,"atr":13.71407,"price":464.36,"sector":"Industrials","shares":18,"position":8358.48},{"rank":22,"ticker":"AZO","momentum":4.9402298742,"atr":56.75983,"price":2140.39,"sector":"Consumer Discretionary","shares":4,"position":8561.56},{"rank":23,"ticker":"KMB","momentum":4.0650566818,"atr":2.752935,"price":136.09,"sector":"Consumer Staples","shares":90,"position":12248.1},{"rank":24,"ticker":"AMGN","momentum":3.3891474802,"atr":4.651835,"price":246.73,"sector":"Health Care","shares":53,"position":13076.69},{"rank":25,"ticker":"ED","momentum":2.9388393033,"atr":2.544085,"price":92.69,"sector":"Utilities","shares":98,"position":9083.62},{"rank":26,"ticker":"GILD","momentum":2.7255121734,"atr":1.39234,"price":62.34,"sector":"Health Care","shares":179,"position":11158.86},{"rank":27,"ticker":"AMT","momentum":2.6127973184,"atr":8.3985,"price":255.94,"sector":"Real Estate","shares":29,"position":7422.26},{"rank":28,"ticker":"TAP","momentum":2.3324602637,"atr":1.5055,"price":55.34,"sector":"Consumer Staples","shares":166,"position":9186.44},{"rank":29,"ticker":"WEC","momentum":2.3146940038,"atr":2.625195,"price":98.86,"sector":"Utilities","shares":95,"position":9391.7},{"rank":30,"ticker":"BF.B","momentum":1.4952382445,"atr":1.779855,"price":70.8,"sector":"Consumer Staples","shares":140,"position":9912.0},{"rank":31,"ticker":"JNJ","momentum":1.2298489713,"atr":3.54503,"price":178.14,"sector":"Health Care","shares":70,"position":12469.8},{"rank":32,"ticker":"HII","momentum":1.1707241557,"atr":5.86431,"price":209.86,"sector":"Industrials","shares":42,"position":8814.12},{"rank":33,"ticker":"CL","momentum":1.0003277416,"atr":1.681395,"price":81.0,"sector":"Consumer Staples","shares":148,"position":11988.0},{"rank":34,"ticker":"WAT","momentum":0.9292486233,"atr":8.74098,"price":339.66,"sector":"Health Care","shares":28,"position":9510.48},{"rank":35,"ticker":"MCD","momentum":0.7590565757,"atr":4.78447,"price":252.29,"sector":"Consumer Discretionary","shares":52,"position":13119.08},{"rank":36,"ticker":"ROL","momentum":0.5394433391,"atr":0.823755,"price":34.98,"sector":"Industrials","shares":303,"position":10598.94},{"rank":37,"ticker":"KO","momentum":0.4116860891,"atr":1.35096,"price":63.28,"sector":"Consumer Staples","shares":185,"position":11706.8},{"rank":38,"ticker":"HSY","momentum":0.3566402375,"atr":4.70814,"price":218.34,"sector":"Consumer Staples","shares":53,"position":11572.02},{"rank":39,"ticker":"CTLT","momentum":0.2163434357,"atr":3.55784,"price":105.99,"sector":"Health Care","shares":70,"position":7419.3},{"rank":40,"ticker":"PFE","momentum":0.0555380278,"atr":1.49566,"price":51.64,"sector":"Health Care","shares":167,"position":8623.88},{"rank":41,"ticker":"RSG","momentum":0.034161592,"atr":3.0425,"price":129.56,"sector":"Industrials","shares":82,"position":10623.92},{"rank":42,"ticker":"PEP","momentum":0.0183650121,"atr":3.37252,"price":169.01,"sector":"Consumer Staples","shares":74,"position":12506.74},{"rank":43,"ticker":"PWR","momentum":0.0056106243,"atr":5.72277,"price":127.25,"sector":"Industrials","shares":43,"position":5471.75},{"rank":44,"ticker":"SYY","momentum":0.0004637241,"atr":2.23825,"price":85.2,"sector":"Consumer Staples","shares":111,"position":9457.2},{"rank":45,"ticker":"INCY","momentum":0.0001187184,"atr":2.255,"price":79.25,"sector":"Health Care","shares":110,"position":8717.5},{"rank":46,"ticker":"O","momentum":-0.000037065,"atr":1.64875,"price":69.29,"sector":"Real Estate","shares":151,"position":10462.79},{"rank":47,"ticker":"CAG","momentum":-0.0013053483,"atr":0.74045,"price":34.37,"sector":"Consumer Staples","shares":337,"position":11582.69},{"rank":48,"ticker":"UNH","momentum":-0.1161731647,"atr":14.379705,"price":505.24,"sector":"Health Care","shares":17,"position":8589.08},{"rank":49,"ticker":"AJG","momentum":-0.3734229219,"atr":3.96025,"price":166.07,"sector":"Financials","shares":63,"position":10462.41},{"rank":50,"ticker":"CDNS","momentum":-0.7083284388,"atr":5.39215,"price":151.64,"sector":"Information Technology","shares":46,"position":6975.44},{"rank":51,"ticker":"DRE","momentum":-1.5510774199,"atr":1.81575,"price":56.84,"sector":"Real Estate","shares":137,"position":7787.08},{"rank":52,"ticker":"CNC","momentum":-1.9460000678,"atr":2.55963,"price":84.75,"sector":"Health Care","shares":97,"position":8220.75},{"rank":53,"ticker":"ABBV","momentum":-2.8135786708,"atr":3.65666,"price":153.93,"sector":"Health Care","shares":68,"position":10467.24},{"rank":54,"ticker":"VZ","momentum":-4.3545597334,"atr":1.034795,"price":51.42,"sector":"Communication Services","shares":241,"position":12392.22},{"rank":55,"ticker":"CBOE","momentum":-4.5830566539,"atr":2.55873,"price":117.44,"sector":"Financials","shares":97,"position":11391.68},{"rank":56,"ticker":"NEE","momentum":-6.6215249607,"atr":2.52096,"price":79.11,"sector":"Utilities","shares":99,"position":7831.89}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

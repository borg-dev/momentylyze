<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"MNST","momentum":72.0784185235,"atr":2.5255,"price":96.75,"sector":"Consumer Staples","shares":98,"position":9481.5},{"rank":2,"ticker":"T","momentum":59.5727425072,"atr":0.525175,"price":20.6,"sector":"Communication Services","shares":476,"position":9805.6},{"rank":3,"ticker":"MRK","momentum":45.9753752424,"atr":2.10137,"price":93.6,"sector":"Health Care","shares":118,"position":11044.8},{"rank":4,"ticker":"LLY","momentum":34.1965351793,"atr":8.37587,"price":323.59,"sector":"Health Care","shares":29,"position":9384.11},{"rank":5,"ticker":"K","momentum":31.0057024863,"atr":1.568635,"price":72.99,"sector":"Consumer Staples","shares":159,"position":11605.41},{"rank":6,"ticker":"AMCR","momentum":27.6720667179,"atr":0.32675,"price":12.46,"sector":"Materials","shares":765,"position":9531.9},{"rank":7,"ticker":"IBM","momentum":26.854008979,"atr":2.945335,"price":139.18,"sector":"Information Technology","shares":84,"position":11691.12},{"rank":8,"ticker":"CI","momentum":24.4079446297,"atr":7.67322,"price":279.35,"sector":"Health Care","shares":32,"position":8939.2},{"rank":9,"ticker":"VICI","momentum":21.1904554302,"atr":0.913635,"price":31.52,"sector":"Real Estate","shares":273,"position":8604.96},{"rank":10,"ticker":"CPB","momentum":16.7615335538,"atr":1.03502,"price":48.89,"sector":"Consumer Staples","shares":241,"position":11782.49},{"rank":11,"ticker":"GPC","momentum":16.1222910039,"atr":3.068975,"price":136.95,"sector":"Consumer Discretionary","shares":81,"position":11092.95},{"rank":12,"ticker":"MCK","momentum":14.0228419622,"atr":8.172795,"price":327.38,"sector":"Health Care","shares":30,"position":9821.4},{"rank":13,"ticker":"VRTX","momentum":11.5071617471,"atr":8.76591,"price":290.01,"sector":"Health Care","shares":28,"position":8120.28},{"rank":14,"ticker":"BMY","momentum":11.4950106156,"atr":1.50458,"price":75.01,"sector":"Health Care","shares":166,"position":12451.66},{"rank":15,"ticker":"GIS","momentum":11.0294688486,"atr":1.626905,"price":75.92,"sector":"Consumer Staples","shares":153,"position":11615.76},{"rank":16,"ticker":"CEG","momentum":9.7933189456,"atr":2.81475,"price":59.23,"sector":"Utilities","shares":88,"position":5212.24},{"rank":17,"ticker":"TMUS","momentum":7.5086181151,"atr":3.67,"price":134.44,"sector":"Communication Services","shares":68,"position":9141.92},{"rank":18,"ticker":"KMB","momentum":7.0558828187,"atr":2.63731,"price":135.28,"sector":"Consumer Staples","shares":94,"position":12716.32},{"rank":19,"ticker":"PGR","momentum":5.5542238681,"atr":3.11675,"price":117.05,"sector":"Financials","shares":80,"position":9364.0},{"rank":20,"ticker":"STZ","momentum":5.4922561062,"atr":5.930665,"price":240.56,"sector":"Consumer Staples","shares":42,"position":10103.52},{"rank":21,"ticker":"DG","momentum":4.9344509995,"atr":5.643725,"price":247.54,"sector":"Consumer Discretionary","shares":44,"position":10891.76},{"rank":22,"ticker":"NOC","momentum":4.9316197081,"atr":13.193135,"price":468.88,"sector":"Industrials","shares":18,"position":8439.84},{"rank":23,"ticker":"AZO","momentum":3.7223540107,"atr":55.364245,"price":2158.6,"sector":"Consumer Discretionary","shares":4,"position":8634.4},{"rank":24,"ticker":"GILD","momentum":3.4930026626,"atr":1.257535,"price":62.34,"sector":"Health Care","shares":198,"position":12343.32},{"rank":25,"ticker":"WAT","momentum":3.0067542657,"atr":8.71198,"price":341.41,"sector":"Health Care","shares":28,"position":9559.48},{"rank":26,"ticker":"TAP","momentum":2.485612733,"atr":1.54298,"price":57.4,"sector":"Consumer Staples","shares":162,"position":9298.8},{"rank":27,"ticker":"BF.B","momentum":2.4336215918,"atr":1.537985,"price":70.07,"sector":"Consumer Staples","shares":162,"position":11351.34},{"rank":28,"ticker":"MCD","momentum":1.8638847091,"atr":4.696345,"price":251.48,"sector":"Consumer Discretionary","shares":53,"position":13328.44},{"rank":29,"ticker":"AMT","momentum":1.5185136354,"atr":7.84275,"price":255.49,"sector":"Real Estate","shares":31,"position":7920.19},{"rank":30,"ticker":"AMGN","momentum":1.3856471894,"atr":4.44887,"price":246.97,"sector":"Health Care","shares":56,"position":13830.32},{"rank":31,"ticker":"CL","momentum":1.3286356515,"atr":1.674875,"price":78.31,"sector":"Consumer Staples","shares":149,"position":11668.19},{"rank":32,"ticker":"HII","momentum":0.8993136294,"atr":6.31706,"price":212.19,"sector":"Industrials","shares":39,"position":8275.41},{"rank":33,"ticker":"ROL","momentum":0.8682255957,"atr":0.876405,"price":35.9,"sector":"Industrials","shares":285,"position":10231.5},{"rank":34,"ticker":"CTLT","momentum":0.8436369654,"atr":3.70064,"price":104.61,"sector":"Health Care","shares":67,"position":7008.87},{"rank":35,"ticker":"SYY","momentum":0.3581655174,"atr":2.083745,"price":86.39,"sector":"Consumer Staples","shares":119,"position":10280.41},{"rank":36,"ticker":"KO","momentum":0.3479071022,"atr":1.262465,"price":62.67,"sector":"Consumer Staples","shares":198,"position":12408.66},{"rank":37,"ticker":"WEC","momentum":0.3243209855,"atr":2.536945,"price":100.46,"sector":"Utilities","shares":98,"position":9845.08},{"rank":38,"ticker":"CAG","momentum":0.0953205184,"atr":0.722795,"price":35.6,"sector":"Consumer Staples","shares":345,"position":12282.0},{"rank":39,"ticker":"JNJ","momentum":0.0691507581,"atr":3.255085,"price":175.85,"sector":"Health Care","shares":76,"position":13364.6},{"rank":40,"ticker":"HSY","momentum":0.0616941913,"atr":4.525795,"price":220.13,"sector":"Consumer Staples","shares":55,"position":12107.15},{"rank":41,"ticker":"PEP","momentum":0.0427787007,"atr":3.28287,"price":169.5,"sector":"Consumer Staples","shares":76,"position":12882.0},{"rank":42,"ticker":"SO","momentum":0.0409902625,"atr":1.670595,"price":71.98,"sector":"Utilities","shares":149,"position":10725.02},{"rank":43,"ticker":"PFE","momentum":0.0,"atr":1.44066,"price":52.04,"sector":"Health Care","shares":173,"position":9002.92},{"rank":44,"ticker":"O","momentum":-0.0026873262,"atr":1.550815,"price":69.36,"sector":"Real Estate","shares":161,"position":11166.96},{"rank":45,"ticker":"PWR","momentum":-0.0075814191,"atr":5.26532,"price":127.72,"sector":"Industrials","shares":47,"position":6002.84},{"rank":46,"ticker":"INCY","momentum":-0.0090911944,"atr":2.265995,"price":80.42,"sector":"Health Care","shares":110,"position":8846.2},{"rank":47,"ticker":"SNPS","momentum":-0.0103083634,"atr":10.2257,"price":306.41,"sector":"Information Technology","shares":24,"position":7353.84},{"rank":48,"ticker":"CDNS","momentum":-0.2272901273,"atr":5.45525,"price":154.22,"sector":"Information Technology","shares":45,"position":6939.9},{"rank":49,"ticker":"UNH","momentum":-0.3789071748,"atr":14.768955,"price":514.42,"sector":"Health Care","shares":16,"position":8230.72},{"rank":50,"ticker":"CBOE","momentum":-0.5908619718,"atr":2.65383,"price":120.12,"sector":"Financials","shares":94,"position":11291.28},{"rank":51,"ticker":"AJG","momentum":-0.8705581299,"atr":3.79475,"price":164.82,"sector":"Financials","shares":65,"position":10713.3},{"rank":52,"ticker":"CNC","momentum":-0.9864223253,"atr":2.604535,"price":86.91,"sector":"Health Care","shares":95,"position":8256.45},{"rank":53,"ticker":"DRE","momentum":-1.3885724142,"atr":1.792,"price":56.92,"sector":"Real Estate","shares":139,"position":7911.88},{"rank":54,"ticker":"GL","momentum":-1.6511464623,"atr":2.56271,"price":100.14,"sector":"Financials","shares":97,"position":9713.58},{"rank":55,"ticker":"SJM","momentum":-1.779961665,"atr":3.02892,"price":133.11,"sector":"Consumer Staples","shares":82,"position":10915.02},{"rank":56,"ticker":"NEE","momentum":-5.1966096606,"atr":2.364845,"price":79.95,"sector":"Utilities","shares":105,"position":8394.75},{"rank":57,"ticker":"PHM","momentum":-7.8613662169,"atr":1.825815,"price":44.06,"sector":"Consumer Discretionary","shares":136,"position":5992.16},{"rank":58,"ticker":"DHI","momentum":-20.5171170694,"atr":2.89231,"price":74.4,"sector":"Consumer Discretionary","shares":86,"position":6398.4}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentylyze - Hebelwerk Momentumtabelle</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_modern.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>

</head>

<body>

    <div id="sp500"></div>
    <script type="text/javascript">
        var tabledata = [{"rank":1,"ticker":"PCG","momentum":201.9044021825,"atr":0.62319,"price":14.04,"sector":"Utilities","shares":401,"position":5630.04},{"rank":2,"ticker":"CAH","momentum":137.5524681897,"atr":1.8723,"price":70.77,"sector":"Health Care","shares":133,"position":9412.41},{"rank":3,"ticker":"MOH","momentum":108.8747091,"atr":8.81578,"price":354.36,"sector":"Health Care","shares":28,"position":9922.08},{"rank":4,"ticker":"COP","momentum":98.5214780335,"atr":5.02052,"price":121.81,"sector":"Energy","shares":49,"position":5968.69},{"rank":5,"ticker":"AES","momentum":58.6745983177,"atr":0.985045,"price":23.48,"sector":"Utilities","shares":253,"position":5940.44},{"rank":6,"ticker":"PFG","momentum":55.1328243457,"atr":2.46575,"price":77.56,"sector":"Financials","shares":101,"position":7833.56},{"rank":7,"ticker":"MPC","momentum":54.6897918582,"atr":4.13201,"price":109.34,"sector":"Energy","shares":60,"position":6560.4},{"rank":8,"ticker":"IT","momentum":54.1117926471,"atr":9.36196,"price":280.55,"sector":"Information Technology","shares":26,"position":7294.3},{"rank":9,"ticker":"GPC","momentum":47.1910226578,"atr":3.86506,"price":157.87,"sector":"Consumer Discretionary","shares":64,"position":10103.68},{"rank":10,"ticker":"DVN","momentum":41.8776694506,"atr":3.40492,"price":71.68,"sector":"Energy","shares":73,"position":5232.64},{"rank":11,"ticker":"CF","momentum":41.3462212933,"atr":5.182345,"price":104.42,"sector":"Materials","shares":48,"position":5012.16},{"rank":12,"ticker":"SBUX","momentum":40.5038213579,"atr":2.56933,"price":86.79,"sector":"Consumer Discretionary","shares":97,"position":8418.63},{"rank":13,"ticker":"CTVA","momentum":36.0552463626,"atr":1.87783,"price":61.93,"sector":"Materials","shares":133,"position":8236.69},{"rank":14,"ticker":"LW","momentum":34.2544060461,"atr":2.37275,"price":82.68,"sector":"Consumer Staples","shares":105,"position":8681.4},{"rank":15,"ticker":"ORLY","momentum":33.2606435777,"atr":16.73159,"price":730.92,"sector":"Consumer Discretionary","shares":14,"position":10232.88},{"rank":16,"ticker":"KEYS","momentum":32.6715620325,"atr":4.7505,"price":160.8,"sector":"Information Technology","shares":52,"position":8361.6},{"rank":17,"ticker":"SJM","momentum":32.042889964,"atr":2.92207,"price":141.05,"sector":"Consumer Staples","shares":85,"position":11989.25},{"rank":18,"ticker":"DRI","momentum":31.5624372593,"atr":4.10101,"price":132.23,"sector":"Consumer Discretionary","shares":60,"position":7933.8},{"rank":19,"ticker":"ADM","momentum":30.7364483379,"atr":2.816035,"price":88.33,"sector":"Consumer Staples","shares":88,"position":7773.04},{"rank":20,"ticker":"XYL","momentum":28.6585320462,"atr":2.921365,"price":91.04,"sector":"Industrials","shares":85,"position":7738.4},{"rank":21,"ticker":"HII","momentum":28.1438246353,"atr":6.33361,"price":243.01,"sector":"Industrials","shares":39,"position":9477.39},{"rank":22,"ticker":"CI","momentum":27.372670877,"atr":7.00245,"price":294.31,"sector":"Health Care","shares":35,"position":10300.85},{"rank":23,"ticker":"NRG","momentum":23.7760840623,"atr":1.34389,"price":40.72,"sector":"Utilities","shares":186,"position":7573.92},{"rank":24,"ticker":"TJX","momentum":22.0508757878,"atr":2.01753,"price":65.36,"sector":"Consumer Discretionary","shares":123,"position":8039.28},{"rank":25,"ticker":"IEX","momentum":21.630567997,"atr":5.35375,"price":199.29,"sector":"Industrials","shares":46,"position":9167.34},{"rank":26,"ticker":"MCK","momentum":21.093031603,"atr":7.99231,"price":359.19,"sector":"Health Care","shares":31,"position":11134.89},{"rank":27,"ticker":"SLB","momentum":20.8072813209,"atr":1.7959,"price":45.69,"sector":"Energy","shares":139,"position":6350.91},{"rank":28,"ticker":"GL","momentum":20.8007339427,"atr":2.703985,"price":109.8,"sector":"Financials","shares":92,"position":10101.6},{"rank":29,"ticker":"CMI","momentum":16.1232870637,"atr":6.583235,"price":220.28,"sector":"Industrials","shares":37,"position":8150.36},{"rank":30,"ticker":"XOM","momentum":15.6822386702,"atr":3.283405,"price":103.93,"sector":"Energy","shares":76,"position":7898.68},{"rank":31,"ticker":"GIS","momentum":15.5889455929,"atr":1.6952,"price":76.67,"sector":"Consumer Staples","shares":147,"position":11270.49},{"rank":32,"ticker":"WMT","momentum":14.9822731339,"atr":3.11933,"price":134.09,"sector":"Consumer Staples","shares":80,"position":10727.2},{"rank":33,"ticker":"AJG","momentum":13.7805488341,"atr":4.49525,"price":173.82,"sector":"Financials","shares":55,"position":9560.1},{"rank":34,"ticker":"GILD","momentum":13.3044016341,"atr":1.374625,"price":66.16,"sector":"Health Care","shares":181,"position":11974.96},{"rank":35,"ticker":"BSX","momentum":12.616971639,"atr":1.07975,"price":40.23,"sector":"Health Care","shares":231,"position":9293.13},{"rank":36,"ticker":"NOC","momentum":12.076945258,"atr":15.736595,"price":512.44,"sector":"Industrials","shares":15,"position":7686.6},{"rank":37,"ticker":"AFL","momentum":9.9949232772,"atr":1.51589,"price":59.15,"sector":"Financials","shares":164,"position":9700.6},{"rank":38,"ticker":"MGM","momentum":7.9350842486,"atr":1.4395,"price":32.46,"sector":"Consumer Discretionary","shares":173,"position":5615.58},{"rank":39,"ticker":"SYK","momentum":7.706458231,"atr":6.849155,"price":214.44,"sector":"Health Care","shares":36,"position":7719.84},{"rank":40,"ticker":"HLT","momentum":6.4790065244,"atr":4.39875,"price":126.55,"sector":"Consumer Discretionary","shares":56,"position":7086.8},{"rank":41,"ticker":"CVX","momentum":6.24516551,"atr":5.421285,"price":168.96,"sector":"Energy","shares":46,"position":7772.16},{"rank":42,"ticker":"WFC","momentum":5.6330948981,"atr":1.438125,"price":43.65,"sector":"Financials","shares":173,"position":7551.45},{"rank":43,"ticker":"FMC","momentum":5.6179863038,"atr":3.54575,"price":115.35,"sector":"Materials","shares":70,"position":8074.5},{"rank":44,"ticker":"HSY","momentum":4.4625675275,"atr":4.59536,"price":224.74,"sector":"Consumer Staples","shares":54,"position":12135.96},{"rank":45,"ticker":"VRTX","momentum":4.3437402004,"atr":7.825425,"price":290.16,"sector":"Health Care","shares":31,"position":8994.96},{"rank":46,"ticker":"PCAR","momentum":3.7888700378,"atr":2.49145,"price":87.57,"sector":"Industrials","shares":100,"position":8757.0},{"rank":47,"ticker":"MET","momentum":3.6651539888,"atr":1.88292,"price":66.02,"sector":"Financials","shares":132,"position":8714.64},{"rank":48,"ticker":"WTW","momentum":3.625796795,"atr":5.602,"price":205.48,"sector":"Financials","shares":44,"position":9041.12},{"rank":49,"ticker":"GD","momentum":3.6102104757,"atr":6.3385,"price":237.44,"sector":"Industrials","shares":39,"position":9260.16},{"rank":50,"ticker":"KDP","momentum":3.2205018221,"atr":0.831515,"price":37.28,"sector":"Consumer Staples","shares":300,"position":11184.0},{"rank":51,"ticker":"AZO","momentum":2.7802129295,"atr":54.87275,"price":2258.83,"sector":"Consumer Discretionary","shares":4,"position":9035.32},{"rank":52,"ticker":"CBOE","momentum":2.1392519785,"atr":2.99845,"price":118.98,"sector":"Financials","shares":83,"position":9875.34},{"rank":53,"ticker":"CTRA","momentum":2.107105713,"atr":1.259295,"price":29.69,"sector":"Energy","shares":198,"position":5878.62},{"rank":54,"ticker":"UNH","momentum":0.6354948062,"atr":13.089,"price":520.88,"sector":"Health Care","shares":19,"position":9896.72},{"rank":55,"ticker":"WRB","momentum":0.5417359252,"atr":1.77816,"price":70.26,"sector":"Financials","shares":140,"position":9836.4},{"rank":56,"ticker":"ROL","momentum":0.5133698842,"atr":0.97335,"price":35.99,"sector":"Industrials","shares":256,"position":9213.44},{"rank":57,"ticker":"CPB","momentum":0.4274356118,"atr":1.072615,"price":49.88,"sector":"Consumer Staples","shares":233,"position":11622.04},{"rank":58,"ticker":"VLO","momentum":0.2332220492,"atr":5.619745,"price":124.44,"sector":"Energy","shares":44,"position":5475.36},{"rank":59,"ticker":"LLY","momentum":0.2239706449,"atr":9.52556,"price":329.07,"sector":"Health Care","shares":26,"position":8555.82},{"rank":60,"ticker":"PEP","momentum":0.143256924,"atr":3.989565,"price":171.46,"sector":"Consumer Staples","shares":62,"position":10630.52},{"rank":61,"ticker":"CAG","momentum":0.0797208758,"atr":0.85737,"price":34.36,"sector":"Consumer Staples","shares":291,"position":9998.76},{"rank":62,"ticker":"PSX","momentum":0.0724745801,"atr":3.772715,"price":97.74,"sector":"Energy","shares":66,"position":6450.84},{"rank":63,"ticker":"BAC","momentum":0.0048134806,"atr":1.17147,"price":33.7,"sector":"Financials","shares":213,"position":7178.1},{"rank":64,"ticker":"RHI","momentum":0.0044482459,"atr":2.4379,"price":79.84,"sector":"Industrials","shares":102,"position":8143.68},{"rank":65,"ticker":"ELV","momentum":0.0032894656,"atr":13.294125,"price":502.22,"sector":"Health Care","shares":18,"position":9039.96},{"rank":66,"ticker":"LMT","momentum":-0.0067921385,"atr":12.945025,"price":444.34,"sector":"Industrials","shares":19,"position":8442.46},{"rank":67,"ticker":"CB","momentum":-0.1586678253,"atr":5.11275,"price":192.21,"sector":"Financials","shares":48,"position":9226.08},{"rank":68,"ticker":"TRV","momentum":-0.1670709035,"atr":4.10814,"price":170.87,"sector":"Financials","shares":60,"position":10252.2},{"rank":69,"ticker":"MRK","momentum":-0.3227235275,"atr":1.732785,"price":92.94,"sector":"Health Care","shares":144,"position":13383.36},{"rank":70,"ticker":"JPM","momentum":-0.7807017695,"atr":3.958095,"price":116.13,"sector":"Financials","shares":63,"position":7316.19},{"rank":71,"ticker":"LHX","momentum":-0.818290427,"atr":6.89367,"price":239.0,"sector":"Industrials","shares":36,"position":8604.0},{"rank":72,"ticker":"AMGN","momentum":-1.0746356321,"atr":5.280675,"price":247.45,"sector":"Health Care","shares":47,"position":11630.15},{"rank":73,"ticker":"HAL","momentum":-3.4529356261,"atr":1.51025,"price":31.66,"sector":"Energy","shares":165,"position":5223.9},{"rank":74,"ticker":"DGX","momentum":-10.0014827234,"atr":3.21122,"price":134.66,"sector":"Health Care","shares":77,"position":10368.82}];

        const sectorTypes = ["Communication Services", "Consumer Discretionary", "Consumer Staples", "Energy", "Financials", "Health Care", "Industrials", "Information Technology", "Materials", "Real Estate", "Utilities"];
        function multiSelectHeaderFilter(cell) {
            var values = sectorTypes;

            const filterFunc = (rowData) => {
                return values.includes(rowData['sector']);
            }

            const getSelectedValues = (multiSelect) => {
                var result = [];
                var options = multiSelect && multiSelect.options;
                var opt;

                for (var i = 0, iLen = options.length; i < iLen; i++) {
                opt = options[i];

                if (opt.selected) {
                    result.push(opt.value || opt.text);
                }
                }
                return result;
            }

            const onChange = () => {
                var editor = document.getElementById('sectorSelector');
                values = getSelectedValues(editor);
                console.log("values: " + values);
                cell.getColumn().getTable().removeFilter(filterFunc);
                cell.getColumn().getTable().addFilter(filterFunc);
            }

            var select = document.createElement("select");
            select.multiple = "multiple";
            select.id = 'sectorSelector';
            select.class = "chosen-select";
            select.style = 'width: 100%';
            sectorTypes.forEach(sector => {
                select.innerHTML += "<option id='" + sector + "' value='" + sector + "' selected='selected'>" + sector + "</option>";
            });
            cell.getColumn().getTable().addFilter(filterFunc);
            select.addEventListener('change', onChange);

            return select;
        }

        var table = new Tabulator("#sp500", {
            data: tabledata,
            layout: "fitColumns",
            pagination: "local",
            paginationSize: 500,
            tooltips: true,
            columns: [{
                    title: "Rank",
                    field: "rank",
                    sorter: "number",
                }, 
                {
                    title: "Ticker",
                    field: "ticker",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: "input"
                },
                {
                    title: "Sector",
                    field: "sector",
                    sorter: "string",
                    hozAlign: "left",
                    headerFilter: multiSelectHeaderFilter, 
                    headerFilterLiveFilter: false
                },
                {
                    title: "Momentum",
                    field: "momentum",
                    sorter: "number",
                    hozAlign: "left",
                }, 
                {
                    title: "ATR20d",
                    field: "atr",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Price ($)",
                    field: "price",
                    sorter: "money",
                    hozAlign: "left",
                },
                {
                    title: "Shares",
                    field: "shares",
                    sorter: "number",
                    hozAlign: "left",
                },
                {
                    title: "Position ($)",
                    field: "position",
                    sorter: "money",
                    hozAlign: "left",
                },
            ],
        });
    </script>
</body>

</html>
